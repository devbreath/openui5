{"version":3,"file":"ChangeVisualization.js","names":["sap","ui","define","Fragment","difference","deepEqual","JsControlTreeModifier","Control","OverlayRegistry","ElementUtil","PersistenceWriteAPI","Layer","FlUtils","ResourceModel","JSONModel","ChangeIndicator","ChangeIndicatorRegistry","ChangeCategories","_onClick","oPopover","this","getPopover","isOpen","close","ChangeVisualization","extend","metadata","library","properties","rootControlId","type","isActive","defaultValue","aggregations","popover","multiple","constructor","_oChangeIndicatorRegistry","changeCategories","getCategories","prototype","apply","arguments","_oTextBundle","getCore","getLibraryResourceBundle","setModel","bundle","_oChangeVisualizationModel","active","getIsActive","setDefaultBindingMode","_sSelectedChangeCategory","ALL","_bSetModeChanged","_fnOnClickHandler","bind","setRootControlId","sRootControlId","getRootControlId","_reset","setProperty","_getComponent","getAppComponentForControl","getElementInstance","setIsActive","bActiveState","_updateVisualizationModel","exit","destroy","_toggleRootOverlayClickHandler","reset","_updateVisualizationModelMenuData","aVisualizedChanges","getData","visualizedChanges","aHiddenChanges","aAllRegisteredChanges","getAllRegisteredChanges","forEach","oRegisteredChange","oVisualizedChange","find","change","getId","id","dependent","push","aCommandData","Object","keys","map","sChangeCategoryName","sTitle","_getChangeCategoryLabel","_getChangesForChangeCategory","length","key","count","title","icon","getIconForCategory","unshift","hiddenChanges","popupInfoMessage","getText","sChangeCategory","aChanges","filter","oChange","changeCategory","undefined","iChangesCount","sLabelKey","toUpperCase","_getChangeCategoryButton","sButtonKey","openChangeCategorySelectionPopover","oEvent","_oToolbarButton","byId","getParameter","load","name","createId","controller","then","addDependent","openBy","setPopover","onChangeCategorySelection","sSelectedChangeCategory","getSource","getBindingContext","getObject","_selectChangeCategory","sChangeCategoryText","changeCategoryText","_updateChangeIndicators","_setFocusedIndicator","_getCommandForChange","sCommand","getSupportInformation","command","oComponent","oSelectorControl","bySelector","getSelector","oLastDependentSelector","getDependentSelectorList","slice","oLastDependentSelectorControl","searchForCommand","oOverlay","sAggregationName","oControl","getElement","getDesignTimeMetadata","getCommandName","getChangeType","oParentOverlay","getParentElementOverlay","oParentAggregationOverlay","getParentAggregationOverlay","getAggregationName","getOverlay","_collectChanges","mPropertyBag","selector","invalidateCache","currentLayer","CUSTOMER","includeDirtyChanges","onlyCurrentVariants","_getUIChanges","_updateChangeRegistry","removeOutdatedRegisteredChanges","aRegisteredChangeIds","getRegisteredChangeIds","oCurrentChanges","getFileType","reduce","oChanges","aCurrentChangeIds","sChangeIdToRemove","removeRegisteredChange","aPromises","sChangeIdToAdd","oChangeToAdd","sCommandName","registerChange","Promise","all","selectChange","sChangeId","_selectChange","aDependentElements","getRegisteredChange","visualizationInfo","dependentElementIds","sElementId","oOverlayDomRef","getDomRef","scrollIntoView","block","classList","add","addEventListener","remove","once","oData","setData","assign","oSelectors","getSelectorsWithRegisteredChanges","oIndicators","sSelectorId","aRelevantChanges","_filterRelevantChanges","some","oElementOverlay","affectedElementId","oRelevantContainer","getRelevantContainer","isVisible","oOverlayPosition","getClientRects","left","top","posX","parseInt","posY","changes","oChangeIndicator","getChangeIndicator","sOverlayId","_createChangeIndicator","getOverlayId","setOverlayId","content","aChangeVizInfo","Array","isArray","oRootData","oChangeVizInfo","visible","overlayId","selectorId","bindElement","getModel","registerChangeIndicator","applyChanges","aVisibleIndicators","getChangeIndicators","oIndicator","getVisible","sort","oIndicator1","oIndicator2","iDeltaY","getPosY","iDeltaX","getPosX","iIndex","tabIndex","focus","bEnable","oRootOverlayDomRef","oRootOverlay","capture","removeEventListener","triggerModeChange","oRootControl","oToolbar","oMenuButton","getControl"],"sources":["ChangeVisualization-dbg.js"],"mappings":"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"}
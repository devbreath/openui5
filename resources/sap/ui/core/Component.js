/*
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(['./Manifest','./ComponentMetadata','./Element','sap/base/util/extend','sap/base/util/deepExtend','sap/base/util/merge','sap/ui/base/ManagedObject','sap/ui/base/ManagedObjectRegistry','sap/ui/core/ResizeHandler','sap/ui/thirdparty/URI','sap/ui/performance/trace/Interaction','sap/base/assert','sap/base/Log','sap/base/util/ObjectPath','sap/base/util/UriParameters','sap/base/util/isPlainObject','sap/base/util/LoaderExtensions','sap/ui/VersionInfo','sap/ui/core/mvc/ViewType'],function(M,C,E,a,d,b,c,f,R,U,I,g,L,O,h,j,l,V,n){"use strict";var S={lazy:"lazy",eager:"eager",waitFor:"waitFor"};function o(e){['sap-client','sap-server'].forEach(function(N){if(!e.hasSearch(N)){var v=sap.ui.getCore().getConfiguration().getSAPParam(N);if(v){e.addSearch(N,v);}}});}function p(m,e,i,k){if(i){for(var N in m){if(!e[N]&&i[N]&&i[N].uri){e[N]=k;}}}}function q(m,e,k,i){var v=e.getEntry(k);if(v!==undefined&&!j(v)){return v;}var P,G;if(i&&(P=m.getParent())instanceof C){G=P._getManifestEntry(k,i);}if(G||v){v=d({},G,v);}return v;}function r(e,i){var k=Object.create(Object.getPrototypeOf(e));k._oMetadata=e;k._oManifest=i;for(var m in e){if(!/^(getManifest|_getManifest|getManifestObject|getManifestEntry|_getManifestEntry|getMetadataVersion)$/.test(m)&&typeof e[m]==="function"){k[m]=e[m].bind(e);}}k.getManifest=function(){return this._getManifest();};k.getManifestEntry=function(K,v){return this._getManifestEntry(K,v);};k._getManifest=function(){return i&&i.getJson();};k.getManifestObject=function(){return i;};k._getManifestEntry=function(K,v){return q(e,i,K,v);};k.getMetadataVersion=function(){return 2;};return k;}function s(e,i,T){g(typeof e==="function","fn must be a function");var k=c._sOwnerId;try{c._sOwnerId=i;return e.call(T);}finally{c._sOwnerId=k;}}var t=c.extend("sap.ui.core.Component",{constructor:function(i,m){var e=Array.prototype.slice.call(arguments);if(typeof i!=="string"){m=i;i=undefined;}if(m&&typeof m._metadataProxy==="object"){this._oMetadataProxy=m._metadataProxy;this._oManifest=m._metadataProxy._oManifest;delete m._metadataProxy;this.getMetadata=function(){return this._oMetadataProxy;};}if(m&&typeof m._cacheTokens==="object"){this._mCacheTokens=m._cacheTokens;delete m._cacheTokens;}if(m&&Array.isArray(m._activeTerminologies)){this._aActiveTerminologies=m._activeTerminologies;delete m._activeTerminologies;}if(m&&typeof m._manifestModels==="object"){this._mManifestModels=m._manifestModels;delete m._manifestModels;}else{this._mManifestModels={};}this._mServices={};this._oKeepAliveConfig=this.getManifestEntry("/sap.ui5/keepAlive");if(this._oKeepAliveConfig){this._oKeepAliveConfig.supported=!!this._oKeepAliveConfig.supported;}this._bIsActive=true;this._aDestroyables=[];c.apply(this,e);},metadata:{stereotype:"component","abstract":true,specialSettings:{componentData:'any'},version:"0.0",includes:[],dependencies:{libs:[],components:[],ui5version:""},config:{},customizing:{},library:"sap.ui.core"}},C);f.apply(t,{onDeregister:function(e){u(function(i){if(i._sapui_candidateForDestroy){L.debug("destroying dangling template "+i+" when destroying the owner component");i.destroy();}},e);}});function u(e,i){E.registry.forEach(function(k,m){var v=t.getOwnerIdFor(k);if(v===i&&!k.getParent()){e(k,m);}});}function w(v){var e,i;if(!sap.ui.getCore().getConfiguration().getDisableCustomizing()){if(typeof v==="string"){i=v;}else if(v&&typeof v.isA==="function"&&!v.isA("sap.ui.core.Component")){i=t.getOwnerIdFor(v);}else{e=v;}if(i){e=t.get(i);}if(e){if(e.getExtensionComponent){e=e.getExtensionComponent();if(!e){throw new Error("getExtensionComponent() must return an instance.");}}}}return e;}t.getCustomizing=function(v,m){var T=m.type,e=m.name?"/"+m.name:"",P="/sap.ui5/extends/extensions/"+T+e;if(T==="sap.ui.viewExtensions"){P+="/"+m.extensionName;}var i=w(v);return i?i._getManifestEntry(P,true):undefined;};t.prototype.getManifest=function(){if(!this._oManifest){return this.getMetadata()._getManifest();}else{return this._oManifest.getJson();}};t.prototype.getManifestEntry=function(k){return this._getManifestEntry(k);};t.prototype._getManifestEntry=function(k,m){if(!this._oManifest){return this.getMetadata()._getManifestEntry(k,m);}else{return q(this.getMetadata(),this._oManifest,k,m);}};t.prototype.getManifestObject=function(){if(!this._oManifest){return this.getMetadata().getManifestObject();}else{return this._oManifest;}};t.prototype._isVariant=function(){if(this._oManifest){var e=this.getManifestEntry("/sap.ui5/componentName");return e&&e!==this.getManifestEntry("/sap.app/id");}else{return false;}};t.activateCustomizing=function(e){};t.deactivateCustomizing=function(e){};t.getOwnerIdFor=function(e){g(e instanceof c,"oObject must be given and must be a ManagedObject");var i=(e instanceof c)&&e._sOwnerId;return i||undefined;};t.getOwnerComponentFor=function(e){return t.get(t.getOwnerIdFor(e));};t.prototype.runAsOwner=function(e){if(!this.isActive()){throw new Error("Execute 'runAsOwner' on an inactive owner component is not supported. Component: '"+this.getMetadata().getName()+"' with id '"+this.getId()+"'.");}return s(e,this.getId());};t.prototype.getInterface=function(){return this;};t.prototype._initCompositeSupport=function(m){this.oComponentData=m&&m.componentData;if(this._oManifest){this._oManifest.init(this);}else{this.getMetadata().init();}if(this._isVariant()){var e=this._oManifest.getEntry("/sap.app/id");if(e){A(e,this._oManifest.resolveUri("./","manifest"));}}this.initComponentModels();if(this.onWindowError){this._fnWindowErrorHandler=function(i){var k=i.originalEvent;this.onWindowError(k.message,k.filename,k.lineno);}.bind(this);window.addEventListener("error",this._fnWindowErrorHandler);}if(this.onWindowBeforeUnload){this._fnWindowBeforeUnloadHandler=function(i){var v=this.onWindowBeforeUnload.apply(this,arguments);if(typeof(v)==='string'){i.returnValue=v;i.preventDefault();return v;}}.bind(this);window.addEventListener("beforeunload",this._fnWindowBeforeUnloadHandler);}if(this.onWindowUnload){this._fnWindowUnloadHandler=this.onWindowUnload.bind(this);window.addEventListener("unload",this._fnWindowUnloadHandler);}};t.prototype._getDestroyables=function(){if(!this._aDestroyables){L.error("Mandatory super constructor not called for Component: '"+this.getManifestObject().getComponentName()+"'.",null,"sap.ui.support",function(){return{type:"missingSuperConstructor"};});this._aDestroyables=[];}return this._aDestroyables;};t.prototype.destroy=function(){var e,k=false;for(var m in this._mServices){if(this._mServices[m].instance){this._mServices[m].instance.destroy();}}delete this._mServices;for(var v in this._mManifestModels){this._mManifestModels[v].destroy();}delete this._mManifestModels;if(this._fnWindowErrorHandler){window.removeEventListener("error",this._fnWindowErrorHandler);delete this._fnWindowErrorHandler;}if(this._fnWindowBeforeUnloadHandler){window.removeEventListener("beforeunload",this._fnWindowBeforeUnloadHandler);delete this._fnWindowBeforeUnloadHandler;}if(this._fnWindowUnloadHandler){window.removeEventListener("unload",this._fnWindowUnloadHandler);delete this._fnWindowUnloadHandler;}if(this._oEventBus){this._oEventBus.destroy();delete this._oEventBus;}function G(K){if(K&&!K._bIsBeingDestroyed){K.destroy();}}function H(K){k=true;}var J=this._getDestroyables();for(var i=0;i<J.length;i++){J[i]=J[i].then(G,H);}if(J.length>0){e=Promise.all(J).then(function(){if(k){u(function(K){K.destroy();},this.getId());}}.bind(this));}c.prototype.destroy.apply(this,arguments);sap.ui.getCore().getMessageManager().unregisterObject(this);if(this._oManifest){this._oManifest.exit(this);delete this._oManifest;}else{this.getMetadata().exit();}return e;};t.prototype.getComponentData=function(){return this.oComponentData;};t.prototype.getEventBus=function(){if(!this._oEventBus){var e=sap.ui.require("sap/ui/core/EventBus");if(!e){var i=this.getMetadata().getName();L.warning("Synchronous loading of EventBus, due to #getEventBus() call on Component '"+i+"'.","SyncXHR",null,function(){return{type:"SyncXHR",name:i};});e=sap.ui.requireSync("sap/ui/core/EventBus");}this._oEventBus=new e();if(!this.isActive()){this._oEventBus.suspend();}}return this._oEventBus;};t.prototype.isActive=function(){return this._bIsActive;};t.prototype.initComponentModels=function(){var m=this.getMetadata();if(m.isBaseClass()){return;}var e=this._getManifestEntry("/sap.app/dataSources",true)||{};var i=this._getManifestEntry("/sap.ui5/models",true)||{};this._initComponentModels(i,e,this._mCacheTokens);};t.prototype._initComponentModels=function(m,e,i){var k=this.getManifestObject().getComponentName();var v=t._findManifestModelClasses({models:m,dataSources:e,componentName:k});t._loadManifestModelClasses(v,k);var G=t._createManifestModelConfigurations({models:v,dataSources:e,component:this,mergeParent:true,cacheTokens:i,activeTerminologies:this.getActiveTerminologies()}),H={},J;if(!G){return;}for(J in G){if(!this._mManifestModels[J]){H[J]=G[J];}}var K=t._createManifestModels(H,k);for(J in K){this._mManifestModels[J]=K[J];}for(J in this._mManifestModels){var N=this._mManifestModels[J];this.setModel(N,J||undefined);}};t.prototype.getService=function(e){if(!this._mServices[e]){this._mServices[e]={};this._mServices[e].promise=new Promise(function(i,k){sap.ui.require(["sap/ui/core/service/ServiceFactoryRegistry"],function(m){var v=this._getManifestEntry("/sap.ui5/services/"+e,true);var G=v&&v.factoryName;if(!G){k(new Error("Service "+e+" not declared!"));return;}var H=m.get(G);if(H){H.createInstance({scopeObject:this,scopeType:"component",settings:v.settings||{}}).then(function(N){if(!this.bIsDestroyed){this._mServices[e].instance=N;this._mServices[e].interface=N.getInterface();i(this._mServices[e].interface);}else{k(new Error("Service "+e+" could not be loaded as its Component was destroyed."));}}.bind(this)).catch(k);}else{var J="The ServiceFactory "+G+" for Service "+e+" not found in ServiceFactoryRegistry!";var K=this._getManifestEntry("/sap.ui5/services/"+e+"/optional",true);if(!K){L.error(J);}k(new Error(J));}}.bind(this),k);}.bind(this));}return this._mServices[e].promise;};function x(e,i){var k=e._getManifestEntry("/sap.ui5/services",true);var m=i?[]:null;if(!k){return m;}var v=Object.keys(k);if(!i&&v.some(function(G){return k[G].startup===S.waitFor;})){throw new Error("The specified component \""+e.getMetadata().getName()+"\" cannot be loaded in sync mode since it has some services declared with \"startup\" set to \"waitFor\"");}return v.reduce(function(P,G){if(k[G].lazy===false||k[G].startup===S.waitFor||k[G].startup===S.eager){var H=e.getService(G);if(k[G].startup===S.waitFor){P.push(H);}}return P;},m);}t.prototype.createComponent=function(v){g((typeof v==='string'&&v)||(typeof v==='object'&&typeof v.usage==='string'&&v.usage),"vUsage either must be a non-empty string or an object with a non-empty usage id");var m={async:true};if(v){var e;if(typeof v==="object"){e=v.usage;["id","async","settings","componentData"].forEach(function(N){if(v[N]!==undefined){m[N]=v[N];}});}else if(typeof v==="string"){e=v;}m=this._enhanceWithUsageConfig(e,m);}var i=t._createComponent(m,this);if(i instanceof Promise){this.registerForDestroy(i);}return i;};t.prototype._enhanceWithUsageConfig=function(e,m){var i=this.getManifestEntry("/sap.ui5/componentUsages/"+e);if(!i){throw new Error("Component usage \""+e+"\" not declared in Component \""+this.getManifestObject().getComponentName()+"\"!");}if(i.activeTerminologies){throw new Error("Terminologies vector can't be used in component usages");}return d(i,m);};t.prototype.getActiveTerminologies=function(){return this._aActiveTerminologies?this._aActiveTerminologies.slice():undefined;};t._createComponent=function(m,e){function i(){if(m.async===true){return t.create(m);}else{return sap.ui.component(m);}}if(e){if(!e.isActive()){throw new Error("Creation of component '"+m.name+"' is not possible due to inactive owner component '"+e.getId()+"'");}return e.runAsOwner(i);}else{return i();}};t._applyCacheToken=function(e,i,m){var k=sap.ui.getCore().getConfiguration();var v=m?"Model":"DataSource";var G=m?"[\"sap.ui5\"][\"models\"]":"[\"sap.app\"][\"dataSources\"]";var H=m&&m["sap-language"]||e.search(true)["sap-language"];var J=m&&m["sap-client"]||e.search(true)["sap-client"];if(!H){L.warning("Component Manifest: Ignoring provided \"sap-context-token="+i.cacheToken+"\" for "+v+" \""+i.dataSource+"\" ("+e.toString()+"). "+"Missing \"sap-language\" URI parameter",G+"[\""+i.dataSource+"\"]",i.componentName);return;}if(!J){L.warning("Component Manifest: Ignoring provided \"sap-context-token="+i.cacheToken+"\" for "+v+" \""+i.dataSource+"\" ("+e.toString()+"). "+"Missing \"sap-client\" URI parameter",G+"[\""+i.dataSource+"\"]",i.componentName);return;}if(J!==k.getSAPParam("sap-client")){L.warning("Component Manifest: Ignoring provided \"sap-context-token="+i.cacheToken+"\" for "+v+" \""+i.dataSource+"\" ("+e.toString()+"). "+"URI parameter \"sap-client="+J+"\" must be identical with configuration \"sap-client="+k.getSAPParam("sap-client")+"\"",G+"[\""+i.dataSource+"\"]",i.componentName);return;}if(e.hasQuery("sap-context-token")&&!e.hasQuery("sap-context-token",i.cacheToken)||m&&m["sap-context-token"]&&m["sap-context-token"]!==i.cacheToken){L.warning("Component Manifest: Overriding existing \"sap-context-token="+(e.query(true)["sap-context-token"]||m["sap-context-token"])+"\" with provided value \""+i.cacheToken+"\" for "+v+" \""+i.dataSource+"\" ("+e.toString()+").",G+"[\""+i.dataSource+"\"]",i.componentName);}if(m){if(e.hasQuery("sap-context-token")){L.warning("Component Manifest: Move existing \"sap-context-token="+e.query(true)["sap-context-token"]+"\" to metadataUrlParams for "+v+" \""+i.dataSource+"\" ("+e.toString()+").",G+"[\""+i.dataSource+"\"]",i.componentName);}e.removeQuery("sap-context-token");m["sap-context-token"]=i.cacheToken;}else{e.setQuery("sap-context-token",i.cacheToken);}};t._findManifestModelClasses=function(m){if(!m.models){return null;}var e={models:m.models,dataSources:m.dataSources||{},origin:{dataSources:{},models:{}}};var i=m.componentName;var k={};for(var v in e.models){var G=e.models[v];if(typeof G==='string'){G={dataSource:G};}if(G.dataSource){var H=e.dataSources&&e.dataSources[G.dataSource];if(typeof H==='object'){if(H.type===undefined){H.type='OData';}var J;if(!G.type){switch(H.type){case'OData':J=H.settings&&H.settings.odataVersion;if(J==="4.0"){G.type='sap.ui.model.odata.v4.ODataModel';}else if(!J||J==="2.0"){G.type='sap.ui.model.odata.v2.ODataModel';}else{L.error('Component Manifest: Provided OData version "'+J+'" in '+'dataSource "'+G.dataSource+'" for model "'+v+'" is unknown. '+'Falling back to default model type "sap.ui.model.odata.v2.ODataModel".','["sap.app"]["dataSources"]["'+G.dataSource+'"]',i);G.type='sap.ui.model.odata.v2.ODataModel';}break;case'JSON':G.type='sap.ui.model.json.JSONModel';break;case'XML':G.type='sap.ui.model.xml.XMLModel';break;default:}}}}if(!G.type){L.error("Component Manifest: Missing \"type\" for model \""+v+"\"","[\"sap.ui5\"][\"models\"][\""+v+"\"]",i);continue;}k[v]=G;}return k;};t._createManifestModelConfigurations=function(m){var e=m.component;var v=m.manifest||e.getManifestObject();var G=m.mergeParent;var H=m.cacheTokens||{};var J=e?e.getMetadata().getComponentName():v.getComponentName();var K=sap.ui.getCore().getConfiguration();var N=m.activeTerminologies;if(!m.models){return null;}var P={models:m.models,dataSources:m.dataSources||{},origin:{dataSources:{},models:{}}};if(e&&G){var Q=e.getMetadata();while(Q instanceof C){var T=Q.getManifestObject();var W=Q._getManifestEntry("/sap.app/dataSources");p(P.dataSources,P.origin.dataSources,W,T);var X=Q._getManifestEntry("/sap.ui5/models");p(P.models,P.origin.models,X,T);Q=Q.getParent();}}var Y={};for(var Z in P.models){var $=P.models[Z];var a1=sap.ui.require($.type.replace(/\./g,"/"));if(!a1){a1=O.get($.type);}if(!a1){L.error("Component Manifest: Class \""+$.type+"\" for model \""+Z+"\" could not be found","[\"sap.ui5\"][\"models\"][\""+Z+"\"]",J);continue;}var b1=a1.getMetadata();var c1=b1.isA("sap.ui.model.odata.ODataModel");var d1=b1.isA("sap.ui.model.odata.v2.ODataModel");var e1=b1.isA("sap.ui.model.odata.v4.ODataModel");var f1=b1.isA("sap.ui.model.resource.ResourceModel");var g1=false;var h1=null;if(typeof $==='string'){$={dataSource:$};}if($.dataSource){var i1=P.dataSources&&P.dataSources[$.dataSource];if(typeof i1==='object'){if(i1.type===undefined){i1.type='OData';}if(e1&&i1.settings&&i1.settings.odataVersion){$.settings=$.settings||{};$.settings.odataVersion=i1.settings.odataVersion;}if(!$.uri){$.uri=i1.uri;g1=true;}if(i1.type==='OData'&&i1.settings&&typeof i1.settings.maxAge==="number"){$.settings=$.settings||{};$.settings.headers=$.settings.headers||{};$.settings.headers["Cache-Control"]="max-age="+i1.settings.maxAge;}if(i1.type==='OData'&&i1.settings&&i1.settings.annotations){var j1=i1.settings.annotations;for(var i=0;i<j1.length;i++){var k1=j1[i];var l1=P.dataSources[k1];if(!l1){L.error("Component Manifest: ODataAnnotation \""+k1+"\" for dataSource \""+$.dataSource+"\" could not be found in manifest","[\"sap.app\"][\"dataSources\"][\""+k1+"\"]",J);continue;}if(l1.type!=='ODataAnnotation'){L.error("Component Manifest: dataSource \""+k1+"\" was expected to have type \"ODataAnnotation\" but was \""+l1.type+"\"","[\"sap.app\"][\"dataSources\"][\""+k1+"\"]",J);continue;}if(!l1.uri){L.error("Component Manifest: Missing \"uri\" for ODataAnnotation \""+k1+"\"","[\"sap.app\"][\"dataSources\"][\""+k1+"\"]",J);continue;}var m1=new U(l1.uri);if(d1||e1){["sap-language","sap-client"].forEach(function(B1){if(!m1.hasQuery(B1)&&K.getSAPParam(B1)){m1.setQuery(B1,K.getSAPParam(B1));}});var n1=H.dataSources&&H.dataSources[l1.uri];if(n1){t._applyCacheToken(m1,{cacheToken:n1,componentName:J,dataSource:k1});}}var o1=P.origin.dataSources[j1[i]]||v;var p1=o1._resolveUri(m1).toString();$.settings=$.settings||{};$.settings.annotationURI=$.settings.annotationURI||[];$.settings.annotationURI.push(p1);}}}else{L.error("Component Manifest: dataSource \""+$.dataSource+"\" for model \""+Z+"\" not found or invalid","[\"sap.app\"][\"dataSources\"][\""+$.dataSource+"\"]",J);continue;}}if(c1&&(!$.settings||$.settings.json===undefined)){$.settings=$.settings||{};$.settings.json=true;}if(f1){if($.uri&&$.settings&&$.settings.bundleUrl){L.warning("Defining both model uri and bundleUrl is not supported. Only model uri will be resolved.");}if(!$.uri&&$.settings&&$.settings.terminologies){if($.bundleUrl||$.settings.bundleUrl){$.uri=$.bundleUrl||$.settings.bundleUrl;delete $.settings.bundleUrl;}}}if($.uri){var q1=new U($.uri);var r1=(g1?P.origin.dataSources[$.dataSource]:P.origin.models[Z])||v;q1=r1._resolveUri(q1);if($.dataSource){o(q1);if(d1||e1){var s1=P.dataSources&&P.dataSources[$.dataSource];var t1=H.dataSources&&H.dataSources[s1.uri];h1=$.settings&&$.settings.metadataUrlParams;var u1=(!h1||typeof h1['sap-language']==='undefined')&&!q1.hasQuery('sap-language')&&K.getSAPParam('sap-language');if(u1||t1){$.settings=$.settings||{};h1=$.settings.metadataUrlParams=$.settings.metadataUrlParams||{};if(u1){h1['sap-language']=K.getSAPParam('sap-language');}}if(t1){t._applyCacheToken(q1,{cacheToken:t1,componentName:J,dataSource:Z},h1);}}}$.uri=q1.toString();}if($.uriSettingName===undefined){if(c1||d1||e1){$.uriSettingName='serviceUrl';}else if(f1){$.uriSettingName='bundleUrl';}else{}}var v1;var w1;if(e){w1=e.getComponentData();}else{w1=m.componentData;}v1=w1&&w1.startupParameters&&w1.startupParameters["sap-system"];if(!v1){v1=K.getSAPParam("sap-system");}var x1=false;var y1;if(v1&&(c1||d1)){x1=true;y1=sap.ui.require("sap/ui/model/odata/ODataUtils");}if($.uri){if(x1){$.preOriginBaseUri=$.uri.split("?")[0];$.uri=y1.setOrigin($.uri,{alias:v1});$.postOriginBaseUri=$.uri.split("?")[0];}if($.uriSettingName!==undefined){$.settings=$.settings||{};if(!$.settings[$.uriSettingName]){$.settings[$.uriSettingName]=$.uri;}}else if($.settings){$.settings=[$.uri,$.settings];}else{$.settings=[$.uri];}}else if(x1&&$.uriSettingName!==undefined&&$.settings&&$.settings[$.uriSettingName]){$.preOriginBaseUri=$.settings[$.uriSettingName].split("?")[0];$.settings[$.uriSettingName]=y1.setOrigin($.settings[$.uriSettingName],{alias:v1});$.postOriginUri=$.settings[$.uriSettingName].split("?")[0];}if(x1&&$.settings&&$.settings.annotationURI){var z1=[].concat($.settings.annotationURI);var A1=[];for(var k=0;k<z1.length;k++){A1.push(y1.setAnnotationOrigin(z1[k],{alias:v1,preOriginBaseUri:$.preOriginBaseUri,postOriginBaseUri:$.postOriginBaseUri}));}$.settings.annotationURI=A1;}if(f1&&$.settings){if(N){$.settings.activeTerminologies=N;}v._processResourceConfiguration($.settings,undefined,true);}if($.settings&&!Array.isArray($.settings)){$.settings=[$.settings];}Y[Z]=$;}if(v.getEntry("/sap.ui5/commands")||(e&&e._getManifestEntry("/sap.ui5/commands",true))){Y["$cmd"]={type:'sap.ui.model.json.JSONModel'};}return Y;};t._loadManifestModelClasses=function(m,e){for(var i in m){var k=m[i];try{sap.ui.requireSync(k.type.replace(/\./g,"/"));}catch(v){L.error("Component Manifest: Class \""+k.type+"\" for model \""+i+"\" could not be loaded. "+v,"[\"sap.ui5\"][\"models\"][\""+i+"\"]",e);continue;}}};t._createManifestModels=function(m,e){var i={};for(var k in m){var v=m[k];var G=O.get(v.type);var H=[null].concat(v.settings||[]);var J=G.bind.apply(G,H);var K=new J();i[k]=K;}return i;};function y(m){var e={afterManifest:{},afterPreload:{}};var i=b({},m.getEntry("/sap.app/dataSources"));var k=b({},m.getEntry("/sap.ui5/models"));var v=m.getComponentName();var G=t._findManifestModelClasses({models:k,dataSources:i,componentName:v});var P=h.fromQuery(window.location.search).get("sap-ui-xx-preload-component-models-"+m.getComponentName());var H=P&&P.split(",");for(var J in G){var K=G[J];if(!K.preload&&H&&H.indexOf(J)>-1){K.preload=true;L.warning("FOR TESTING ONLY!!! Activating preload for model \""+J+"\" ("+K.type+")",v,"sap.ui.core.Component");}if(K.type==="sap.ui.model.resource.ResourceModel"&&(!K.settings||K.settings.async!==true)){e.afterPreload[J]=K;}else if(K.preload){if(sap.ui.loader._.getModuleState(K.type.replace(/\./g,"/")+".js")){e.afterManifest[J]=K;}else{L.warning("Can not preload model \""+J+"\" as required class has not been loaded: \""+K.type+"\"",v,"sap.ui.core.Component");}}}return e;}function z(e){return sap.ui.require.toUrl(e.replace(/\./g,"/")+"/manifest.json");}function A(m,v){l.registerResourcePath(m.replace(/\./g,"/"),v);}function B(e){var m=[];var k=[];function v(i){if(!i._oManifest){var N=i.getComponentName();var G=z(N);var H=l.loadResource({url:G,dataType:"json",async:true}).catch(function(J){L.error("Failed to load component manifest from \""+G+"\" (component "+N+")! Reason: "+J);return{};});m.push(H);k.push(i);}var P=i.getParent();if(P&&(P instanceof C)&&!P.isBaseClass()){v(P);}}v(e);return Promise.all(m).then(function(G){for(var i=0;i<G.length;i++){if(G[i]){k[i]._applyManifest(G[i]);}}});}t._fnLoadComponentCallback=null;var _=[];Object.defineProperty(t,"_fnOnInstanceCreated",{get:function(){return _[0];},set:function(e){if(typeof e==="function"){_.push(e);}else{_=[];}}});t._fnPreprocessManifest=null;t.create=function(m){if(m==null||typeof m!=="object"){throw new TypeError("Component.create() must be called with a configuration object.");}var P=b({},m);P.async=true;if(P.manifest===undefined){P.manifest=true;}return D(P);};sap.ui.component=function(v){if(!v){throw new Error("sap.ui.component cannot be called without parameter!");}var e=function(i){return{type:"sap.ui.component",name:i};};if(typeof v==='string'){L.warning("Do not use deprecated function 'sap.ui.component' ("+v+") + for Component instance lookup. "+"Use 'Component.get' instead","sap.ui.component",null,e.bind(null,v));return t.get(v);}if(v.async){L.info("Do not use deprecated factory function 'sap.ui.component' ("+v["name"]+"). "+"Use 'Component.create' instead","sap.ui.component",null,e.bind(null,v["name"]));}else{L.warning("Do not use synchronous component creation ("+v["name"]+")! "+"Use the new asynchronous factory 'Component.create' instead","sap.ui.component",null,e.bind(null,v["name"]));}return D(v,true);};function D(v,e){var i=t.get(c._sOwnerId);var k=v.activeTerminologies||(i&&i.getActiveTerminologies())||sap.ui.getCore().getConfiguration().getActiveTerminologies();if(!v.asyncHints||!v.asyncHints.cacheTokens){var m=i&&i._mCacheTokens;if(typeof m==="object"){v.asyncHints=v.asyncHints||{};v.asyncHints.cacheTokens=m;}}function G(P,v){return _.map(function(Q){return Q(P,v);});}function H(P,v){if(v.async){var Q=P.rootControlLoaded?P.rootControlLoaded():Promise.resolve();var T=G(P,v);T.push(Q);return Promise.all(T);}else{G(P,v);}return P;}function J(P){if(e&&P.getMetadata().isA("sap.ui.core.IAsyncContentCreation")){throw new Error("Do not use deprecated factory function 'sap.ui.component' in combination with IAsyncContentCreation ("+v["name"]+"). "+"Use 'Component.create' instead");}var Q=v.name,T=v.id,W=v.componentData,X=Q+'.Component',Y=v.settings;var Z=new P(a({},Y,{id:T,componentData:W,_cacheTokens:v.asyncHints&&v.asyncHints.cacheTokens,_activeTerminologies:k}));g(Z instanceof t,"The specified component \""+X+"\" must be an instance of sap.ui.core.Component!");L.info("Component instance Id = "+Z.getId());var $=Z.getMetadata()._getManifestEntry("/sap.ui5/handleValidation");if($!==undefined||v.handleValidation){sap.ui.getCore().getMessageManager().registerObject(Z,$===undefined?v.handleValidation:$);}var a1=x(Z,v.async);if(v.async){return H(Z,v).then(function(){return Promise.all(a1);}).then(function(){return Z;});}else{return H(Z,v);}}var K=F(v,{failOnError:true,createModels:true,waitFor:v.asyncHints&&v.asyncHints.waitFor,activeTerminologies:k});if(v.async){var N=c._sOwnerId;return K.then(function(P){var Q=function(T){var W=T.getParent();var X=Promise.resolve();if(W instanceof C){X=X.then(function(){return Q(W);});}return X.then(function(){return T.getManifestObject().loadDependenciesAndIncludes(true);});};return Q(P.getMetadata()).then(function(){return s(function(){return J(P);},N);});});}else{return J(K);}}t.load=function(m){var P=b({},m);P.async=true;if(P.manifest===undefined){P.manifest=true;}return F(P,{preloadOnly:P.asyncHints&&P.asyncHints.preloadOnly});};t.get=function(i){return t.registry.get(i);};sap.ui.component.load=function(e,i){L.warning("Do not use deprecated function 'sap.ui.component.load'! Use 'Component.load' instead");return F(e,{failOnError:i,preloadOnly:e.asyncHints&&e.asyncHints.preloadOnly});};function F(i,m){var k=m.activeTerminologies,N=i.name,G=i.url,H=sap.ui.getCore().getConfiguration(),J=/^(sync|async)$/.test(H.getComponentPreload()),K=i.manifest,P,Q,T,W,X,Y;function Z(e,m){var v=JSON.parse(JSON.stringify(e));if(i.async){return a1(v).then(function($){return new M($,m);});}else{return new M(v,m);}}function a1(e){if(typeof t._fnPreprocessManifest==="function"&&e!=null){try{var v=d({},i);return t._fnPreprocessManifest(e,v);}catch($){L.error("Failed to execute flexibility hook for manifest preprocessing.",$);return Promise.reject($);}}else{return Promise.resolve(e);}}g(!G||typeof G==='string',"sUrl must be a string or undefined");if(N&&typeof G==='string'){A(N,G);}I.setStepComponent(N);if(K===undefined){P=i.manifestFirst===undefined?H.getManifestFirst():!!i.manifestFirst;Q=i.manifestUrl;}else{if(i.async===undefined){i.async=true;}P=!!K;Q=K&&typeof K==='string'?K:undefined;T=K&&typeof K==='object'?Z(K,{url:i&&i.altManifestUrl,activeTerminologies:k}):undefined;}if(!T&&Q){T=M.load({activeTerminologies:k,manifestUrl:Q,componentName:N,processJson:a1,async:i.async,failOnError:true});}if(T&&!i.async){N=T.getComponentName();if(N&&typeof G==='string'){A(N,G);}}if(!(T&&i.async)){if(!N){throw new Error("The name of the component is undefined.");}g(typeof N==='string',"sName must be a string");}if(P&&!T){T=M.load({activeTerminologies:k,manifestUrl:z(N),componentName:N,async:i.async,processJson:a1,failOnError:false});}function b1(){return(N+".Component").replace(/\./g,"/");}function c1(e){var v=N+'.Component';if(!e){var $="The specified component controller '"+v+"' could not be found!";if(m.failOnError){throw new Error($);}else{L.warning($);}}if(T){var o1=r(e.getMetadata(),T);var p1=function(){var q1=Array.prototype.slice.call(arguments);var r1;if(q1.length===0||typeof q1[0]==="object"){r1=q1[0]=q1[0]||{};}else if(typeof q1[0]==="string"){r1=q1[1]=q1[1]||{};}r1._metadataProxy=o1;if(W){r1._manifestModels=W;}var s1=Object.create(e.prototype);e.apply(s1,q1);return s1;};p1.getMetadata=function(){return o1;};p1.extend=function(){throw new Error("Extending Components created by Manifest is not supported!");};return p1;}else{return e;}}function d1(v,e){g((typeof v==='string'&&v)||(typeof v==='object'&&typeof v.name==='string'&&v.name),"reference either must be a non-empty string or an object with a non-empty 'name' and an optional 'url' property");if(typeof v==='object'){if(v.url){A(v.name,v.url);}return(v.lazy&&e!==true)?undefined:v.name;}return v;}function e1(v,$){var o1=v+'.Component',p1=sap.ui.getCore().getConfiguration().getDepCache(),q1,r1,s1,t1=function(q1,$){return function(e){var u1="Component-preload for this component does not exist.";L.warning("Couldn't preload component from "+q1+": "+((e&&e.message)||e),!$?u1:u1+" If the component is part of a library or another component, the configuration 'sap.app/embeddedBy' is not maintained. "+" The 'sap.app/embeddedBy' property must be relative path inside the deployment unit (library or component).","sap.ui.core.Component#preload");};};if(J&&v!=null&&!sap.ui.loader._.getModuleState(o1.replace(/\./g,"/")+".js")){if($){r1=V._getTransitiveDependencyForComponent(v);if(r1&&!r1.hasOwnPreload){s1=[r1.library];Array.prototype.push.apply(s1,r1.dependencies);return sap.ui.getCore().loadLibraries(s1,{preloadOnly:true}).catch(t1(r1.library,true));}else{q1=o1.replace(/\./g,"/")+(p1?'-h2-preload.js':'-preload.js');return sap.ui.loader._.loadJSResourceAsync(q1).catch(t1(q1,true));}}try{q1=o1+'-preload';sap.ui.requireSync(q1.replace(/\./g,"/"));}catch(e){t1(q1,false)(e);}}else if($){return Promise.resolve();}}function f1(e,T,v){var $=[];var o1=v?function(y1){$.push(y1);}:function(){};var p1=T.getEntry("/sap.ui5/dependencies/libs");if(p1){var q1=[];for(var r1 in p1){if(!p1[r1].lazy){q1.push(r1);}}if(q1.length>0){L.info("Component \""+e+"\" is loading libraries: \""+q1.join(", ")+"\"");o1(sap.ui.getCore().loadLibraries(q1,{async:v}));}}var s1=T.getEntry("/sap.ui5/extends/component");if(s1){o1(e1(s1,v));}var t1=[];var u1=T.getEntry("/sap.ui5/dependencies/components");if(u1){for(var v1 in u1){if(!u1[v1].lazy){t1.push(v1);}}}var w1=T.getEntry("/sap.ui5/componentUsages");if(w1){for(var x1 in w1){if(w1[x1].lazy===false&&t1.indexOf(w1[x1].name)===-1){t1.push(w1[x1].name);}}}if(t1.length>0){t1.forEach(function(e){o1(e1(e,v));});}return v?Promise.all($):undefined;}if(i.async){var g1=i.asyncHints||{},h1=[],i1=function(e){e=e.then(function(v){return{result:v,rejected:false};},function(v){return{result:v,rejected:true};});return e;},j1=function(e){if(e){h1.push(i1(e));}},k1=function($){return $;},l1,m1;l1=[];if(Array.isArray(g1.preloadBundles)){g1.preloadBundles.forEach(function(v){l1.push(sap.ui.loader._.loadJSResourceAsync(d1(v,true),true));});}if(Array.isArray(g1.libs)){m1=g1.libs.map(d1).filter(k1);l1.push(sap.ui.getCore().loadLibraries(m1,{preloadOnly:true}));}l1=Promise.all(l1);if(m1&&!m.preloadOnly){l1=l1.then(function(){return sap.ui.getCore().loadLibraries(m1);});}j1(l1);if(g1.components){Object.keys(g1.components).forEach(function(e){j1(e1(d1(g1.components[e]),true));});}if(!T){j1(e1(N,true));}else{var n1=[];T=T.then(function(T){var e=T.getComponentName();if(typeof G==='string'){A(e,G);}T.defineResourceRoots();T._preprocess({resolveUI5Urls:true,i18nProperties:n1});return T;});if(m.createModels){j1(T.then(function(T){var e=T.getComponentName();X=y(T);if(Object.keys(X.afterManifest).length>0){t._loadManifestModelClasses(X.afterManifest,e);var v=b({},T.getEntry("/sap.app/dataSources"));var $=t._createManifestModelConfigurations({models:X.afterManifest,dataSources:v,manifest:T,componentData:i.componentData,cacheTokens:g1.cacheTokens,activeTerminologies:k});W=t._createManifestModels($,e);}return T;}));}j1(T.then(function(T){var e=Promise.resolve();var v=T.getEntry("/sap.app/embeddedBy");var $=T.getComponentName();if(!v){e=e1($,true);}else if(!sap.ui.loader._.getModuleState(b1()+".js")){L.warning("Component '"+$+"' is defined to be embedded in a library or another component"+"The relatively given preload for the embedding resource was not loaded before hand. "+"Please make sure to load the embedding resource containing this Component before instantiating.",undefined,"sap.ui.core.Component#embeddedBy");}return e.then(function(){return T._processI18n(true,n1);}).then(function(){if(!m.createModels){return null;}var o1=Object.keys(X.afterPreload);if(o1.length===0){return null;}return new Promise(function(p1,q1){sap.ui.require(["sap/ui/model/resource/ResourceModel"],function(r1){p1(r1);},q1);}).then(function(p1){var q1=b({},T.getEntry("/sap.app/dataSources"));var r1=t._createManifestModelConfigurations({models:X.afterPreload,dataSources:q1,manifest:T,componentData:i.componentData,cacheTokens:g1.cacheTokens,activeTerminologies:k});function s1(t1){var u1=r1[t1];if(Array.isArray(u1.settings)&&u1.settings.length>0){var v1=u1.settings[0];v1.activeTerminologies=m.activeTerminologies;return p1.loadResourceBundle(v1,true).then(function(w1){v1.bundle=w1;delete v1.terminologies;delete v1.activeTerminologies;delete v1.enhanceWith;},function(w1){L.error("Component Manifest: Could not preload ResourceBundle for ResourceModel. "+"The model will be skipped here and tried to be created on Component initialization.","[\"sap.ui5\"][\"models\"][\""+t1+"\"]",T.getComponentName());L.error(w1);delete r1[t1];});}else{return Promise.resolve();}}return Promise.all(o1.map(s1)).then(function(){if(Object.keys(r1).length>0){var t1=t._createManifestModels(r1,T.getComponentName());if(!W){W={};}for(var u1 in t1){W[u1]=t1[u1];}}});});});}));Y=function(e){if(typeof t._fnLoadComponentCallback==="function"){var v=d({},i);try{return t._fnLoadComponentCallback(v,e);}catch($){L.error("Callback for loading the component \""+e.getComponentName()+"\" run into an error. The callback was skipped and the component loading resumed.",$,"sap.ui.core.Component");}}};}return Promise.all(h1).then(function(v){var e=[],$=false,o1;$=v.some(function(p1){if(p1&&p1.rejected){o1=p1.result;return true;}e.push(p1.result);});if($){return Promise.reject(o1);}return e;}).then(function(v){if(T&&Y){return T.then(Y).then(function(){return v;});}return v;}).then(function(v){L.debug("Component.load: all promises fulfilled, then "+v);if(T){return T.then(function(e){if(!e._bLoadManifestRequestFailed){T=e;N=T.getComponentName();return f1(N,T,true);}else{T=undefined;return T;}});}else{return v;}}).then(function(){if(m.preloadOnly){return true;}return new Promise(function(e,v){sap.ui.require([b1()],function($){e($);},v);}).then(function(e){var v=e.getMetadata();var N=v.getComponentName();var $=z(N);var o1;if(T&&typeof K!=="object"&&(typeof Q==="undefined"||Q===$)){v._applyManifest(JSON.parse(JSON.stringify(T.getRawJson())));}o1=B(v);return o1.then(function(){var p1=Promise.resolve();if(!T&&Array.isArray(m.activeTerminologies)&&m.activeTerminologies.length>0){T=new M(v.getManifestObject().getRawJson(),{process:false,activeTerminologies:k});p1=T._processI18n(true);}return p1.then(c1.bind(undefined,e));});});}).then(function(e){if(!T){return e;}var v=[];var $;var o1=T.getEntry("/sap.ui5/rootView");if(typeof o1==="string"){$="XML";}else if(o1&&typeof o1==="object"&&o1.type){$=o1.type;}if($&&n[$]){var p1="sap/ui/core/mvc/"+n[$]+"View";v.push(p1);}var q1=T.getEntry("/sap.ui5/routing");if(q1){if(q1.routes){var r1=T.getEntry("/sap.ui5/routing/config/routerClass")||"sap.ui.core.routing.Router";var s1=r1.replace(/\./g,"/");v.push(s1);}else if(q1.targets){var t1=T.getEntry("/sap.ui5/routing/config/targetsClass")||"sap.ui.core.routing.Targets";var u1=t1.replace(/\./g,"/");v.push(u1);v.push("sap/ui/core/routing/Views");}}var v1=b({},T.getEntry("/sap.ui5/models"));var w1=b({},T.getEntry("/sap.app/dataSources"));var x1=t._findManifestModelClasses({models:v1,dataSources:w1,componentName:T.getComponentName()});for(var y1 in x1){if(!x1.hasOwnProperty(y1)){continue;}var z1=x1[y1];if(!z1.type){continue;}var A1=z1.type.replace(/\./g,"/");if(v.indexOf(A1)===-1){v.push(A1);}}if(v.length>0){return Promise.all(v.map(function(A1){return new Promise(function(B1,C1){var D1=false;function E1(F1){if(D1){return;}L.warning("Can not preload module \""+A1+"\". "+"This will most probably cause an error once the module is used later on.",T.getComponentName(),"sap.ui.core.Component");L.warning(F1);D1=true;B1();}sap.ui.require([A1],B1,E1);});})).then(function(){return e;});}else{return e;}}).then(function(e){var v=m.waitFor;if(v){var $=Array.isArray(v)?v:[v];return Promise.all($).then(function(){return e;});}return e;}).catch(function(e){if(W){for(var N in W){var v=W[N];if(v&&typeof v.destroy==="function"){v.destroy();}}}throw e;});}if(T){T.defineResourceRoots();T._preprocess({resolveUI5Urls:true});f1(N,T);}e1(N);return c1(sap.ui.requireSync(b1()));}if(Math.sqrt(2)<1){sap.ui.require(["sap/ui/core/Core"],function(){});}t.prototype.getCommand=function(e){if(!this._mComputedCommands){var i=t.getCustomizing(this,{type:"sap.ui.commands"})||{},k=this._getManifestEntry("/sap.ui5/commands",true)||{},m=this.getMetadata().getComponentName(),v="",G=this.getExtensionComponent&&this.getExtensionComponent();if(G&&G.getLocalId){v="#"+(G.getLocalId(this.getId())||this.getId());}this._mComputedCommands=b({},k,i[m],i[m+v]);}return e?this._mComputedCommands[e]:this._mComputedCommands;};t.prototype.deactivate=function(){var e=t.getOwnerComponentFor(this);if(e&&e.isActive()){throw new Error("Component.deactivate must not be called on nested components.");}if(!this.isKeepAliveSupported()){L.warning("Deactivation of component failed. Component '"+this.getId()+"' does not support 'keepAlive'.");return;}if(!this.isActive()){L.warning("Deactivation of component failed. Component '"+this.getId()+"' is already inactive.");return;}this.onOwnerDeactivation();this._bIsActive=false;u(function(i){R.suspend(i.getDomRef());i.onOwnerDeactivation();},this.getId());t.registry.filter(function(i){var k=t.getOwnerIdFor(i);if(k===this.getId()){i.deactivate();}},this);if(this._oEventBus){this._oEventBus.suspend();}if(this.getRouter()){this.getRouter().stop();}if(typeof this.onDeactivate==="function"){this.onDeactivate();}};t.prototype.activate=function(){if(!this.isKeepAliveSupported()){L.warning("Activation of component failed. Component '"+this.getId()+"' does not support 'keepAlive'.");return;}if(this.isActive()){L.warning("Activation of component failed. Component '"+this.getId()+"' is already active.");return;}this.onOwnerActivation();this._bIsActive=true;u(function(e){R.resume(e.getDomRef());e.onOwnerActivation();},this.getId());t.registry.forEach(function(e){var i=t.getOwnerIdFor(e);if(i===this.getId()){e.activate();}},this);if(this._oEventBus){this._oEventBus.resume();}if(this.getRouter()){this.getRouter().initialize();}if(typeof this.onActivate==="function"){this.onActivate();}};t.prototype.isKeepAliveSupported=function(){var i=this._oKeepAliveConfig&&this._oKeepAliveConfig.supported;if(i){i=t.registry.filter(function(e){var k=t.getOwnerIdFor(e);if(k===this.getId()){return true;}},this).every(function(e){return e.isKeepAliveSupported();},this);}return!!i;};t.prototype.registerForDestroy=function(e){var i=this._getDestroyables();e=e.then(function(k){i.splice(i.indexOf(e),1);return k;});i.push(e);};return t;});

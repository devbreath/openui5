/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(['sap/ui/base/Object','sap/ui/core/LocaleData','./_Calendars'],function(B,L,_){"use strict";var U=B.extend("sap.ui.core.date.UniversalDate",{constructor:function(){var d=U.getClass();return this.createDate(d,arguments);}});U.UTC=function(){var d=U.getClass();return d.UTC.apply(d,arguments);};U.now=function(){return Date.now();};U.prototype.createDate=function(d,A){switch(A.length){case 0:return new d();case 1:return new d(A[0]instanceof Date?A[0].getTime():A[0]);case 2:return new d(A[0],A[1]);case 3:return new d(A[0],A[1],A[2]);case 4:return new d(A[0],A[1],A[2],A[3]);case 5:return new d(A[0],A[1],A[2],A[3],A[4]);case 6:return new d(A[0],A[1],A[2],A[3],A[4],A[5]);case 7:return new d(A[0],A[1],A[2],A[3],A[4],A[5],A[6]);}};U.getInstance=function(d,C){var f,i;if(d instanceof U){d=d.getJSDate();}else if(!d){d=new Date();}if(isNaN(d.getTime())){throw new Error("The given date object is invalid");}if(!C){C=sap.ui.getCore().getConfiguration().getCalendarType();}f=U.getClass(C);i=Object.create(f.prototype);i.oDate=d;i.sCalendarType=C;return i;};U.getClass=function(C){if(!C){C=sap.ui.getCore().getConfiguration().getCalendarType();}return _.get(C);};["getDate","getMonth","getFullYear","getYear","getDay","getHours","getMinutes","getSeconds","getMilliseconds","getUTCDate","getUTCMonth","getUTCFullYear","getUTCDay","getUTCHours","getUTCMinutes","getUTCSeconds","getUTCMilliseconds","getTime","valueOf","getTimezoneOffset","toString","toDateString","setDate","setFullYear","setYear","setMonth","setHours","setMinutes","setSeconds","setMilliseconds","setUTCDate","setUTCFullYear","setUTCMonth","setUTCHours","setUTCMinutes","setUTCSeconds","setUTCMilliseconds"].forEach(function(n){U.prototype[n]=function(){return this.oDate[n].apply(this.oDate,arguments);};});U.prototype.getJSDate=function(){return this.oDate;};U.prototype.getCalendarType=function(){return this.sCalendarType;};U.prototype.getEra=function(){return U.getEraByDate(this.sCalendarType,this.oDate.getFullYear(),this.oDate.getMonth(),this.oDate.getDate());};U.prototype.setEra=function(E){};U.prototype.getUTCEra=function(){return U.getEraByDate(this.sCalendarType,this.oDate.getUTCFullYear(),this.oDate.getUTCMonth(),this.oDate.getUTCDate());};U.prototype.setUTCEra=function(E){};U.prototype.getWeek=function(l,w){c(w);return U.getWeekByDate(this.sCalendarType,this.getFullYear(),this.getMonth(),this.getDate(),l,w);};U.prototype.setWeek=function(w,l,W){c(W);var d=U.getFirstDateOfWeek(this.sCalendarType,w.year||this.getFullYear(),w.week,l,W);this.setFullYear(d.year,d.month,d.day);};U.prototype.getUTCWeek=function(l,w){c(w);return U.getWeekByDate(this.sCalendarType,this.getUTCFullYear(),this.getUTCMonth(),this.getUTCDate(),l,w);};U.prototype.setUTCWeek=function(w,l,W){c(W);var d=U.getFirstDateOfWeek(this.sCalendarType,w.year||this.getFullYear(),w.week,l,W);this.setUTCFullYear(d.year,d.month,d.day);};U.prototype.getQuarter=function(){return Math.floor((this.getMonth()/3));};U.prototype.getUTCQuarter=function(){return Math.floor((this.getUTCMonth()/3));};U.prototype.getDayPeriod=function(){if(this.getHours()<12){return 0;}else{return 1;}};U.prototype.getUTCDayPeriod=function(){if(this.getUTCHours()<12){return 0;}else{return 1;}};U.prototype.getTimezoneShort=function(){if(this.oDate.getTimezoneShort){return this.oDate.getTimezoneShort();}};U.prototype.getTimezoneLong=function(){if(this.oDate.getTimezoneLong){return this.oDate.getTimezoneLong();}};var m=7*24*60*60*1000;U.getWeekByDate=function(C,y,M,d,l,w){l=l||sap.ui.getCore().getConfiguration().getFormatSettings().getFormatLocale();var o=L.getInstance(l);var f=this.getClass(C);var F=g(f,y,l,w);var D=new f(f.UTC(y,M,d));var W,i,n,h,N;var s=(!w||w.minimalDaysInFirstWeek===undefined||w.firstDayOfWeek===undefined)&&o.firstDayStartsFirstWeek();if(s){W=a(F,D);}else{i=y-1;n=y+1;h=g(f,i,l,w);N=g(f,n,l,w);if(D>=N){y=n;W=0;}else if(D<F){y=i;W=a(h,D);}else{W=a(F,D);}}return{year:y,week:W};};U.getFirstDateOfWeek=function(C,y,w,l,W){l=l||sap.ui.getCore().getConfiguration().getFormatSettings().getFormatLocale();var o=L.getInstance(l);var d=this.getClass(C);var f=g(d,y,l,W);var D=new d(f.valueOf()+w*m);var s=(!W||W.minimalDaysInFirstWeek===undefined||W.firstDayOfWeek===undefined)&&o.firstDayStartsFirstWeek();if(s&&w===0&&f.getUTCFullYear()<y){return{year:y,month:0,day:1};}return{year:D.getUTCFullYear(),month:D.getUTCMonth(),day:D.getUTCDate()};};function c(w){if(w){if(w.firstDayOfWeek===undefined&&w.minimalDaysInFirstWeek!==undefined||w.firstDayOfWeek!==undefined&&w.minimalDaysInFirstWeek===undefined){throw new Error("Week config requires both firstDayOfWeek and minimalDaysInFirstWeek to be set");}}}function g(d,y,l,w){l=l||sap.ui.getCore().getConfiguration().getFormatSettings().getFormatLocale();var o=L.getInstance(l);var M;var f;if(w&&w.minimalDaysInFirstWeek!==undefined&&w.firstDayOfWeek!==undefined){M=w.minimalDaysInFirstWeek;f=w.firstDayOfWeek;}else{M=o.getMinimalDaysInFirstWeek();f=o.getFirstDayOfWeek();}var F=new d(d.UTC(y,0,1));var D=7;if(isNaN(F.getTime())){throw new Error("Could not determine the first day of the week, because the date "+"object is invalid");}while(F.getUTCDay()!==f){F.setUTCDate(F.getUTCDate()-1);D--;}if(D<M){F.setUTCDate(F.getUTCDate()+7);}return F;}function a(f,t){return Math.floor((t.valueOf()-f.valueOf())/m);}var e={};U.getEraByDate=function(C,y,M,d){var E=b(C),t=new Date(0).setUTCFullYear(y,M,d),o;for(var i=E.length-1;i>=0;i--){o=E[i];if(!o){continue;}if(o._start&&t>=o._startInfo.timestamp){return i;}if(o._end&&t<o._endInfo.timestamp){return i;}}};U.getCurrentEra=function(C){var n=new Date();return this.getEraByDate(C,n.getFullYear(),n.getMonth(),n.getDate());};U.getEraStartDate=function(C,E){var d=b(C),o=d[E]||d[0];if(o._start){return o._startInfo;}};function b(C){var l=sap.ui.getCore().getConfiguration().getFormatSettings().getFormatLocale(),o=L.getInstance(l),E=e[C];if(!E){var E=o.getEraDates(C);if(!E[0]){E[0]={_start:"1-1-1"};}for(var i=0;i<E.length;i++){var d=E[i];if(!d){continue;}if(d._start){d._startInfo=p(d._start);}if(d._end){d._endInfo=p(d._end);}}e[C]=E;}return E;}function p(d){var P=d.split("-"),y,M,D;if(P[0]==""){y=-parseInt(P[1]);M=parseInt(P[2])-1;D=parseInt(P[3]);}else{y=parseInt(P[0]);M=parseInt(P[1])-1;D=parseInt(P[2]);}return{timestamp:new Date(0).setUTCFullYear(y,M,D),year:y,month:M,day:D};}return U;});

/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/integration/editor/fields/viz/VizBase","sap/m/ColorPalettePopover","sap/m/Button","sap/ui/core/Core","sap/base/util/merge","sap/ui/core/theming/Parameters"],function(V,C,B,a,m,P){"use strict";var b=V.extend("sap.ui.integration.editor.fields.viz.ColorSelect",{metadata:{library:"sap.ui.integration",properties:{enumValue:{type:"string",defaultValue:""},colorValue:{type:"string",defaultValue:""},colorEnum:{type:"string",defaultValue:"sap.m.AvatarColor"},background:{type:"boolean",defaultValue:true},allowCustomColors:{type:"boolean",defaultValue:false}},aggregations:{_colorpalette:{type:"sap.m.ColorPalettePopover",multiple:false,visibility:"hidden"}}},renderer:V.getMetadata().getRenderer()});var e={};function s(){var v=["sapUiAccent1","sapUiAccent2","sapUiAccent3","sapUiAccent4","sapUiAccent5","sapUiAccent6","sapUiAccent7","sapUiAccent8","sapUiAccent9","sapUiAccent10","sapUiTileIconColor","sapUiContentImagePlaceholderBackground"];var p=P.get({name:v,callback:function(_){}});if(p){e={"sap.m.AvatarColor":{"Accent1":p["sapUiAccent1"],"Accent2":p["sapUiAccent2"],"Accent3":p["sapUiAccent3"],"Accent4":p["sapUiAccent4"],"Accent5":p["sapUiAccent5"],"Accent6":p["sapUiAccent6"],"Accent7":p["sapUiAccent7"],"Accent8":p["sapUiAccent8"],"Accent9":p["sapUiAccent9"],"Accent10":p["sapUiAccent10"],"TileIcon":p["sapUiTileIconColor"],"Transparent":"transparent","Placeholder":p["sapUiContentImagePlaceholderBackground"]}};}}s();a.attachThemeChanged(s);var c,o=new C("oColorPalettePopoverFull",{colorSelect:function(E){var d=E.getParameter("value"),f=e[c.getColorEnum()],i=Object.values(f).indexOf(d);c.setEnumValue(Object.keys(f)[i]);c.setColorValue(d);c._colorValue=d;}});b.prototype.onInit=function(){this._oControl=new B({icon:"sap-icon://color-fill",press:function(){this._openPalette();}.bind(this)});this._colorValue="transparent";};b.prototype.applyStyle=function(r){r.addClass("sapUiIntegrationColorSelect");if(!this._colorValue||this._colorValue==="transparent"){r.addClass("noColorValueOrTransparentValue");}else{r.addClass("hasColorValue");}if(this._colorValue){r.addStyle("--colorValue",this._colorValue);}};b.prototype._openPalette=function(){c=this;o.setShowDefaultColorButton(true);o.setShowMoreColorsButton(false);o.setDefaultColor("");var E=e[this.getColorEnum()];if(E){var d=[];for(var n in E){d.push(E[n]);}o.setColors(d);}o.openBy(this._oControl);};b.prototype.setEnumValue=function(v){this.setProperty("enumValue",v,true);this._colorValue=e[this.getColorEnum()][v];this.rerender();};b.prototype.bindPropertyToControl=function(p,d){if(p==="editable"){var f=m({},d);this._oControl.bindProperty("enabled",f);}};return b;});

sap.ui.define(["../FeaturesRegistry","../Keys","../util/FocusableElements"],function(e,t,s){"use strict";class i{init(){this.keydownHandler=this._keydownHandler.bind(this);this.attachEventListeners();this.selectedGroup=null;this.groups=[]}attachEventListeners(){document.addEventListener("keydown",this.keydownHandler)}async _keydownHandler(e){if(t.isF6Next(e)){this.updateGroups();if(this.groups.length<1){return}e.preventDefault();const t=this.groups.indexOf(this.selectedGroup);let i=null;if(t>-1){if(t+1>=this.groups.length){i=this.groups[0]}else{i=this.groups[t+1]}}else{i=this.groups[0]}const r=await s.getFirstFocusableElement(i.isUI5Element?i.getDomRef():i,true);r.focus()}if(t.isF6Previous(e)){this.updateGroups();if(this.groups.length<1){return}e.preventDefault();const t=this.groups.indexOf(this.selectedGroup);let i=null;if(t>-1){if(t-1<0){i=this.groups[this.groups.length-1]}else{const e=await s.getFirstFocusableElement(this.groups[t-1],true);const r=e===await s.getFirstFocusableElement(this.groups[t],true);i=this.groups[r?t-2:t-1]}}else{i=this.groups[this.groups.length-1]}const r=await s.getFirstFocusableElement(i.isUI5Element?i.getDomRef():i,true);r.focus()}}removeEventListeners(){document.removeEventListener("keydown",this.keydownHandler)}updateGroups(){this.setSelectedGroup(document.activeElement);this.setGroups()}setGroups(){this.groups=Array.from(document.querySelectorAll("[data-sap-ui-fastnavgroup='true']")).filter(e=>e.clientWidth&&window.getComputedStyle(e).visibility!=="hidden")}setSelectedGroup(e){while(e&&e.getAttribute("data-sap-ui-fastnavgroup")!=="true"&&e!==document.querySelector("html")){e=e.parentElement?e.parentNode:e.parentNode.host}this.selectedGroup=e}destroy(){this.removeEventListeners()}}const r=new i;e.registerFeature("F6Navigation",r);return i});
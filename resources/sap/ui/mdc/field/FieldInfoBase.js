/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(['sap/ui/Device','sap/ui/mdc/Element','sap/m/library','sap/m/ResponsivePopover'],function(D,E,m,R){"use strict";var P=m.PlacementType;var F=E.extend("sap.ui.mdc.field.FieldInfoBase",{metadata:{library:"sap.ui.mdc",events:{dataUpdate:{},popoverAfterOpen:{}}}});F.prototype.isTriggerable=function(){throw new Error("sap.ui.mdc.field.FieldInfoBase: method isTriggerable must be redefined");};F.prototype.getTriggerHref=function(){throw new Error("sap.ui.mdc.field.FieldInfoBase: method getTriggerHref must be redefined");};F.prototype.getDirectLinkHrefAndTarget=function(){throw new Error("sap.ui.mdc.field.FieldInfoBase: method getDirectLinkHrefAndTarget must be redefined");};F.prototype.open=function(c){c=c?c:this.getParent();if(!c){throw new Error("sap.ui.mdc.field.FieldInfoBase: popover can not be open because the control is undefined");}var p=this.getDependents().find(function(d){return d.isA("sap.m.ResponsivePopover");});if(p&&p.isOpen()){return Promise.resolve();}return this.checkDirectNavigation().then(function(n){return n?Promise.resolve():this.createPopover().then(function(p){if(p){p.openBy(c);p.attachAfterOpen(function(){this.firePopoverAfterOpen();}.bind(this));}}.bind(this));}.bind(this));};F.prototype.getContent=function(g){throw new Error("sap.ui.mdc.field.FieldInfoBase: method getContent must be redefined");};F.prototype.checkDirectNavigation=function(){throw new Error("sap.ui.mdc.field.FieldInfoBase: method checkDirectNavigation must be redefined");};F.prototype.getSourceControl=function(){return this.getParent();};F.prototype.createPopover=function(){var p;return this.getContent(function(){return p;}).then(function(o){p=new R(this.getId()+"-popover",{contentWidth:"380px",horizontalScrolling:false,showHeader:D.system.phone,placement:P.Auto,content:[o],afterClose:function(e){if(e.getSource()){e.getSource().destroy();}}});this.addDependent(p);return new Promise(function(r,a){sap.ui.require(['sap/ui/fl/apply/api/FlexRuntimeInfoAPI'],function(b){if(b.isFlexSupported({element:o})){b.waitForChanges({element:o}).then(function(){p.addAriaLabelledBy(o.getContentTitle?o.getContentTitle():"");r(p);});}else if(o){p.addAriaLabelledBy(o.getContentTitle?o.getContentTitle():"");r(p);}});});}.bind(this));};return F;});

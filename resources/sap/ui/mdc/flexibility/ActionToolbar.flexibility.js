/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["./ItemBaseFlex","./Util"],function(I,U){"use strict";var a=Object.assign({},I);a.findItem=function(m,A,n){return sap.ui.getCore().byId(n);};a.determineAggregation=function(m,c){return Promise.resolve().then(function(){return{name:"actions",items:c.getActions()};});};a._applyMove=function(c,C,p,s){var i=s===U.REVERT?true:false;if(C.getParent()){if(C.getParent().isA("sap.ui.mdc.Chart")){C=C.getParent();}else if(C.getParent().getParent().isA("sap.ui.mdc.Table")){C=C.getParent().getParent();}}this.beforeApply(c.getChangeType(),C,i);if(this._bSupressFlickering){this._delayInvalidate(C);}var m=p.modifier;var o=i?c.getRevertData():c.getContent();var b;var A;var O;var d=this.determineAggregation(m,C).then(function(r){A=r;return this._getExistingAggregationItem(o,p,C);}.bind(this)).then(function(r){b=r;}).then(function(){if(!b){throw new Error("No corresponding item in "+A.name+" found. Change to move item cannot be "+this._getOperationText(i)+"at this moment");}return m.findIndexInParentAggregation(b);}.bind(this)).then(function(r){O=r;return m.removeAggregation(C,A.name,b).then(function(){return m.insertAggregation(C,A.name,b,o.index);});}).then(function(){if(i){c.resetRevertData();}else{c.setRevertData({name:o.name,index:O});}this.afterApply(c.getChangeType(),C,i);}.bind(this));return d;};return{moveAction:a.createMoveChangeHandler()};});

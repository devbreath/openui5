/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(['sap/ui/fl/Utils','sap/ui/fl/apply/api/FlexRuntimeInfoAPI','sap/ui/mdc/p13n/Engine','sap/ui/core/Core'],function(U,F,E,c){"use strict";var r=c.getLibraryResourceBundle("sap.ui.mdc");return{properties:{value:{ignore:true},additionalValue:{ignore:true}},getStableElements:function(f){if(!f.getFieldInfo()){return[];}var o=f.getFieldInfo();var C=typeof o.getSourceControl()==="string"?c.byId(o.getSourceControl()):o.getSourceControl();if(!C){C=f;}var a=U.getAppComponentForControl(C)||U.getAppComponentForControl(f);var s=o._createPanelId(U,F);return[{id:s,appComponent:a}];},actions:{settings:function(f){if(!f.getFieldInfo()){return{};}return{name:r.getText("info.POPOVER_DEFINE_LINKS"),handler:function(C,p){var o=C.getFieldInfo();return o.getContent().then(function(P){o.addDependent(P);return F.waitForChanges({element:P}).then(function(){var e=E.getInstance();p.fnAfterClose=function(){P.destroy();};var g=function(){return e.getRTASettingsActionHandler(P,p,"LinkItems").then(function(b){b.forEach(function(d){var s=d.selectorElement;delete d.selectorElement;var A=U.getAppComponentForControl(C)||U.getAppComponentForControl(f);d.selectorControl={id:s.getId(),controlType:s===P?"sap.ui.mdc.link.Panel":"sap.ui.mdc.link.PanelItem",appComponent:A};});return b;});};var a=P.getItems();if(a.length>0){return F.waitForChanges({selectors:a}).then(function(){return g();});}else{return g();}});});},CAUTION_variantIndependent:true};}}};});

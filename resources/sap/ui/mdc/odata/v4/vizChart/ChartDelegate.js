/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["../ChartDelegate","../../../util/loadModules","sap/ui/core/Core","sap/m/library","sap/m/Text","sap/ui/mdc/library","sap/base/Log",'sap/ui/mdc/util/FilterUtil','sap/ui/mdc/odata/v4/util/DelegateUtil',"sap/ui/mdc/chart/ChartTypeButton","sap/ui/mdc/chart/Item","sap/ui/model/Sorter","sap/ui/mdc/chart/ChartImplementationContainer","sap/ui/base/ManagedObjectObserver","sap/ui/core/ResizeHandler","sap/ui/mdc/p13n/panels/ChartItemPanel","sap/m/MessageStrip","../TypeUtil","sap/ui/mdc/FilterBarDelegate","sap/ui/model/Filter","sap/ui/mdc/odata/v4/ChartPropertyHelper","sap/ui/thirdparty/jquery"],function(V,l,C,m,T,M,L,F,D,c,d,S,f,g,R,h,j,n,o,p,P,q){"use strict";var r=Object.assign({},V);var s=new window.WeakMap();var t;var u;var v;var w;r._getState=function(a){if(s.has(a)){return s.get(a);}if(a){L.info("Couldn't get state for "+a.getId());}};r._setState=function(a,b){s.set(a,b);};r.getTypeUtil=function(){return n;};r.getFilterDelegate=function(){return o;};r.addCondition=function(a,b,e){return Promise.resolve();};r.removeCondition=function(a,b,e){return Promise.resolve();};r._deleteState=function(a){if(this._getState(a)){if(this._getState(a).vizTooltip){this._getState(a).vizTooltip.destroy();}if(this._getState(a).observer){this._getState(a).observer.disconnect();this._getState(a).observer=null;}}return s.delete(a);};r._getChart=function(a){if(s.has(a)){return s.get(a).innerChart;}if(a){L.info("Couldn't get state for "+a.getId());}return undefined;};r._setChart=function(a,i){if(s.has(a)){s.get(a).innerChart=i;}else{s.set(a,{innerChart:i});}};r._getInnerStructure=function(a){if(s.has(a)){return s.get(a).innerStructure;}if(a){L.info("Couldn't get state for "+a.getId());}return undefined;};r._setInnerStructure=function(a,i){if(s.has(a)){s.get(a).innerStructure=i;}else{s.set(a,{innerStructure:i});}};r._getBindingInfoFromState=function(a){if(s.has(a)){return s.get(a).bindingInfo;}if(a){L.info("Couldn't get state for "+a.getId());}return undefined;};r._setBindingInfoForState=function(a,b){if(s.has(a)){s.get(a).bindingInfo=b;}else{s.set(a,{bindingInfo:b});}};r._setUpChartObserver=function(a){var b=this._getState(a);if(!b.observer){b.observer=new g(function(e){if(e.type==="destroy"){this.exit(e.object);}}.bind(this));}b.observer.observe(a,{destroy:true});};r.exit=function(a){if(this._getInnerStructure(a)){this._getInnerStructure(a).destroy();}this._deleteState(a);};r.zoomIn=function(a,i){var I=this._getChart(a);if(I){I.zoom({direction:"in"});}};r.zoomOut=function(a,i){var I=this._getChart(a);if(I){I.zoom({direction:"out"});}};r.getZoomState=function(a){if(this._getChart(a)){return this._getChart(a).getZoomInfo(this);}};r.getInnerChartSelectionHandler=function(a){return{eventId:"_selectionDetails",listener:this._getChart(a)};};r.getChartTypeLayoutConfig=function(){if(this._aChartTypeLayout){return this._aChartTypeLayout;}var a=[M.ChartItemRoleType.axis1,M.ChartItemRoleType.category,M.ChartItemRoleType.series];var A=[M.ChartItemRoleType.axis1,M.ChartItemRoleType.axis2,M.ChartItemRoleType.category,M.ChartItemRoleType.series];var b=[M.ChartItemRoleType.axis1,M.ChartItemRoleType.category,M.ChartItemRoleType.category2];var e=[M.ChartItemRoleType.axis1,M.ChartItemRoleType.axis2,M.ChartItemRoleType.axis3,M.ChartItemRoleType.category,M.ChartItemRoleType.series];this._aChartTypeLayout=[{key:"column",allowedLayoutOptions:a},{key:"bar",allowedLayoutOptions:a},{key:"line",allowedLayoutOptions:a},{key:"combination",allowedLayoutOptions:a},{key:"pie",allowedLayoutOptions:a},{key:"donut",allowedLayoutOptions:a},{key:"dual_column",allowedLayoutOptions:A},{key:"dual_bar",allowedLayoutOptions:A},{key:"dual_line",allowedLayoutOptions:A},{key:"stacked_bar",allowedLayoutOptions:a},{key:"scatter",allowedLayoutOptions:A},{key:"bubble",allowedLayoutOptions:e},{key:"heatmap",allowedLayoutOptions:b},{key:"bullet",allowedLayoutOptions:a},{key:"vertical_bullet",allowedLayoutOptions:a},{key:"dual_stacked_bar",allowedLayoutOptions:A},{key:"100_stacked_bar",allowedLayoutOptions:a},{key:"stacked_column",allowedLayoutOptions:a},{key:"dual_stacked_column",allowedLayoutOptions:A},{key:"100_stacked_column",allowedLayoutOptions:a},{key:"dual_combination",allowedLayoutOptions:A},{key:"dual_horizontal_combination",allowedLayoutOptions:A},{key:"dual_horizontal_combination",allowedLayoutOptions:A},{key:"dual_stacked_combination",allowedLayoutOptions:A},{key:"dual_horizontal_stacked_combination",allowedLayoutOptions:A},{key:"stacked_combination",allowedLayoutOptions:a},{key:"100_dual_stacked_bar",allowedLayoutOptions:a},{key:"100_dual_stacked_column",allowedLayoutOptions:a},{key:"horizontal_stacked_combination",allowedLayoutOptions:a},{key:"waterfall",allowedLayoutOptions:b},{key:"horizontal_waterfall",allowedLayoutOptions:b}];return this._aChartTypeLayout;};r.getAdaptionUI=function(a){return Promise.resolve(this._setupAdaptionUI(a));};r._setupAdaptionUI=function(a){var b=this.getChartTypeLayoutConfig().find(function(E){return E.key===a.getChartType();});if(!b){var e=[M.ChartItemRoleType.axis1,M.ChartItemRoleType.axis2,M.ChartItemRoleType.axis3,M.ChartItemRoleType.category,M.ChartItemRoleType.category2,M.ChartItemRoleType.series];b={key:a.getChartType(),allowedLayoutOptions:e};}var i=[{kind:"Groupable"},{kind:"Aggregatable"}];b.templateConfig=i;var A={panelConfig:b};var k=new h(A);if(a.getChartType()==="heatmap"){var B=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc");k.setMessageStrip(new j({text:B.getText("chart.PERSONALIZATION_DIALOG_MEASURE_WARNING"),type:"Warning"}));}return k;};r.setLegendVisible=function(a,b){if(this._getChart(a)){this._getChart(a).setVizProperties({'legend':{'visible':b},'sizeLegend':{'visible':b}});}else{L.error("Could not set legend visibility since inner chart is not yet initialized!");}};r.getSorterForItem=function(a,b){if(a.getType()==="aggregatable"){return new S(this._getAggregatedMeasureNameForMDCItem(a),b.descending);}else if(a.getType()==="groupable"){return new S(this.getInternalChartNameFromPropertyNameAndKind(b.name,"groupable",a.getParent()),b.descending);}};r.insertItemToInnerChart=function(a,b,i){if(b.getType()==="groupable"){var I=this.getInternalChartNameFromPropertyNameAndKind(b.getName(),"groupable",a);var e=this._getChart(a).getDimensionByName(I);if(!e){this.createInnerDimension(a,b);}else{e.setLabel(b.getLabel());e.setRole(b.getRole()?b.getRole():"category");}var k=this._getChart(a).getVisibleDimensions();k.splice(i,0,I);this._getChart(a).setVisibleDimensions(k);}else if(b.getType()==="aggregatable"){this.createInnerMeasure(a,b);var A=this._getChart(a).getVisibleMeasures();A.splice(i,0,this._getAggregatedMeasureNameForMDCItem(b));this._getChart(a).setVisibleMeasures(A);}this._prepareColoringForItem(b).then(function(){this._updateColoring(a,this._getChart(a).getVisibleDimensions(),this._getChart(a).getVisibleMeasures());}.bind(this));this._updateSemanticalPattern(a);};r.removeItemFromInnerChart=function(a,b){if(b.getType()==="groupable"&&this._getChart(a).getVisibleDimensions().includes(this.getInternalChartNameFromPropertyNameAndKind(b.getName(),"groupable",a))){var i=this.getInternalChartNameFromPropertyNameAndKind(b.getName(),"groupable",a);var N=this._getChart(a).getVisibleDimensions().filter(function(e){return e!==i;});if(this._getState(a).inResultDimensions.length>0){this._getChart(a).setInResultDimensions(this._getState(a).inResultDimensions);}this._getChart(a).setVisibleDimensions(N);}else if(b.getType()==="aggregatable"&&this._getChart(a).getVisibleMeasures().includes(this._getAggregatedMeasureNameForMDCItem(b))){var k=[];a.getItems().filter(function(I){return I.getType()==="aggregatable";}).filter(function(I){return I!==b;}).forEach(function(I){k.push(this._getAggregatedMeasureNameForMDCItem(I));}.bind(this));this._getChart(a).setVisibleMeasures(k);this._getChart(a).removeMeasure(this._getChart(a).getMeasureByName(this._getAggregatedMeasureNameForMDCItem(b)));}this._updateColoring(a,this._getChart(a).getVisibleDimensions(),this._getChart(a).getVisibleMeasures());this._updateSemanticalPattern(a);};r.addItem=function(a,b,e,i){if(b.getModel){return Promise.resolve(this._createMDCChartItem(a,b,i));}};r.removeItem=function(a,b){return Promise.resolve(true);};r.checkAndUpdateMDCItems=function(a){return new Promise(function(b,e){var i=[];a.getItems().forEach(function(k){var I=k.getName()&&k.getLabel()&&k.getType()&&k.getRole();if(!I){i.push(this._getPropertyInfosByName(k.getName(),a).then(function(A){k.setLabel(A.label);if(A.groupable){k.setType("groupable");k.setRole(k.getRole()?k.getRole():"category");}else if(A.aggregatable){k.setType("aggregatable");k.setRole(k.getRole()?k.getRole():"axis1");}}));}}.bind(this));Promise.all(i).then(function(){b();});}.bind(this));};r._createMDCChartItem=function(a,b,e){return this._getPropertyInfosByName(a,b).then(function(i){if(!i){return null;}return this._createMDCItemFromProperty(i,b.getId(),e);}.bind(this));};r._createMDCItemFromProperty=function(a,i,b){if(a.groupable){return new d(i+"--GroupableItem--"+a.name,{name:a.name,label:a.label,type:"groupable",role:b?b:"category"});}if(a.aggregatable){return new d(i+"--AggregatableItem--"+a.name,{name:a.name,label:a.label,type:"aggregatable",role:b?b:"axis1"});}return null;};r.initializeInnerChart=function(a){return new Promise(function(b,e){this._loadChart().then(function(i){this._setInnerStructure(a,new f(a.getId()+"--implementationContainer",{}));var k=new T();k.setText(a.getNoDataText());a.addStyleClass("sapUiMDCChartTempTextOuter");this._getInnerStructure(a).addStyleClass("sapUiMDCChartTempText");this._getInnerStructure(a).setContent(k);this._setUpChartObserver(a);b(this._getInnerStructure(a));}.bind(this));}.bind(this));};r.createInitialChartContent=function(a){};r._createContentFromItems=function(a){return new Promise(function(b,e){var i=[];var k=[];var A=[];var B=[];a.getItems().forEach(function(I,E){k.push(this._getPropertyInfosByName(I.getName(),a).then(function(G){if(!G){L.error("sap.ui.mdc.Chart: Item "+I.getName()+" has no property info representing it in the metadata. Make sure the name is correct and the metadata is defined correctly. Skipping the item!");return;}switch(I.getType()){case"groupable":A.push(this.getInternalChartNameFromPropertyNameAndKind(I.getName(),"groupable",a));this._addInnerDimension(a,I,G);break;case"aggregatable":B.push(this._getAggregatedMeasureNameForMDCItem(I));this._addInnerMeasure(a,I,G);break;default:L.error("MDC Chart Item "+I.getId()+" with label "+I.getLabel()+" has no known type. Supported typed are: \"groupable\" & \"aggregatable\"");}i.push(this._prepareColoringForItem(I));}.bind(this)));}.bind(this));Promise.all(k).then(function(){this._getState(a).aColMeasures.forEach(function(K){if(this._getState(a).aInSettings.indexOf(K)==-1){i.push(new Promise(function(b,e){a._getPropertyByNameAsync(K).then(function(E){var G=E.aggregationMethod;var H=E.propertyPath;var N=this.getInternalChartNameFromPropertyNameAndKind(K,"aggregatable",a);var I={name:N,label:E.label,role:"axis1"};if(G&&H){I.analyticalInfo={propertyPath:H,"with":G};}var J=new v(I);B.push(J);this._getChart(a).addMeasure(J);b();});}));}}.bind(this));Promise.all(i).then(function(){this._getChart(a).setVisibleDimensions(A);this._getChart(a).setVisibleMeasures(B);var I=a.getDelegate().inResultDimensions;if(I&&I instanceof Array&&I.length!=0){var E=[];I.forEach(function(G){E.push(this._getPropertyInfosByName(G,a).then(function(H){var N=this.getInternalChartNameFromPropertyNameAndKind(H.name,"groupable",a);var J=new u({name:N,label:H.label});this._getState(a).inResultDimensions.push(N);this._getChart(a).addDimension(J);}.bind(this)));}.bind(this));Promise.all(E).then(function(){this._getChart(a).setInResultDimensions(this._getState(a).inResultDimensions);}.bind(this));}this._updateColoring(a,A,B);this._updateSemanticalPattern(a);b();}.bind(this));}.bind(this));}.bind(this));};r.getInnerChart=function(a){return this._getChart(a);};r._prepareColoringForItem=function(i){return this._addCriticality(i).then(function(){this._getState(i.getParent()).aInSettings.push(i.getName());if(i.getType()==="aggregatable"){this._getPropertyInfosByName(i.getName(),i.getParent()).then(function(a){this._getAdditionalColoringMeasuresForItem(a).forEach(function(b){if(this._getState(i.getParent()).aColMeasures&&this._getState(i.getParent()).aColMeasures.indexOf(b)==-1){this._getState(i.getParent()).aColMeasures.push(b);}}.bind(this));}.bind(this));}}.bind(this));};r._getAdditionalColoringMeasuresForItem=function(a){var A=[];var b=a.datapoint?a.datapoint.criticality:null;if(b&&b.DynamicThresholds){A=b.DynamicThresholds.usedMeasures;}return A;};r._addCriticality=function(i){return this._getPropertyInfosByName(i.getName(),i.getParent()).then(function(a){if(a.criticality||(a.datapoint&&a.datapoint.criticality)){var b=this._getState(i.getParent()).oColorings||{Criticality:{DimensionValues:{},MeasureValues:{}}};var e={};if(i.getType()=="groupable"){var k=a.criticality?a.criticality:[];for(var K in k){e[K]={Values:k[K]};}var A=this.getInternalChartNameFromPropertyNameAndKind(i.getName(),"groupable",i.getParent());b.Criticality.DimensionValues[A]=e;}else{var k=a.datapoint&&a.datapoint.criticality?a.datapoint.criticality:[];for(var K in k){e[K]=k[K];}var B=this.getInternalChartNameFromPropertyNameAndKind(i.getName(),"aggregatable",i.getParent());b.Criticality.MeasureValues[B]=e;}var E=this._getState(i.getParent());E.oColorings=b;this._setState(i.getParent(),E);}}.bind(this));};r._updateColoring=function(a,b,e){var i=q.extend(true,{},this._getState(a).oColorings),k;if(i&&i.Criticality){var A;for(k=0;k<b.length;k++){if(this._getState(a).oColorings.Criticality.DimensionValues[b[k]]){A={coloring:"Criticality",parameters:{dimension:b[k]}};delete i.Criticality.MeasureValues;break;}}if(!A){delete i.Criticality.DimensionValues;for(var B in i.Criticality.MeasureValues){if(e.indexOf(B)==-1){delete i.Criticality.MeasureValues[B];}}A={coloring:"Criticality",parameters:{measure:e}};}if(A){this._getChart(a).setColorings(i);this._getChart(a).setActiveColoring(A);}}};r._updateSemanticalPattern=function(a){var b=this._getChart(a).getVisibleMeasures();b.forEach(function(e){var i=this.getPropertyFromNameAndKind(e,"aggregatable",a);if(!i){return;}var k=i.datapoint;if(k){if(k.targetValue||k.foreCastValue){var A=this._getChart(a).getMeasureByName(e);A.setSemantics("actual");if(k.targetValue!=null){var B=this._getChart(a).getMeasureByName(k.targetValue);if(B){B.setSemantics("reference");}else{L.error("sap.ui.mdc.Chart: "+k.targetValue+" is not a valid measure");}}if(k.foreCastValue){var E=this._getChart(a).getMeasureByName(k.foreCastValue);if(E){E.setSemantics("projected");}else{L.error("sap.ui.comp.SmartChart: "+k.ForecastValue.Path+" is not a valid measure");}}A.setSemanticallyRelatedMeasures({referenceValueMeasure:k.targetValue,projectedValueMeasure:k.foreCastValue});}}}.bind(this));};r.getChartTypeInfo=function(a){if(!this._getChart(a)){throw'inner chart is not bound';}var b=a.getChartType(),e=C.getLibraryResourceBundle("sap.ui.mdc");var i={icon:c.mMatchingIcon[b],text:e.getText("chart.CHART_TYPE_TOOLTIP",[b])};return i;};r.getAvailableChartTypes=function(a){var b=[];if(this._getChart(a)){var A=this._getChart(a).getAvailableChartTypes().available;if(b){var e=C.getLibraryResourceBundle("sap.chart.messages");for(var i=0;i<A.length;i++){var k=A[i].chart;b.push({key:k,icon:c.mMatchingIcon[k],text:e.getText("info/"+k),selected:(k==a.getChartType())});}}}return b;};r.getDrillStack=function(a){var b=[];b=Object.assign(b,this._getChart(a).getDrillStack());b.forEach(function(e){e.dimension=e.dimension.map(function(i){var k=this.getPropertyFromNameAndKind(i,"groupable",a);if(k){return k.name;}else{L.error("MDC Chart Delegate: Couldn't map chart dimension to groupable property: "+i);return i;}}.bind(this));}.bind(this));return b;};r.getSortedDimensions=function(a){return new Promise(function(b,e){if(a.isPropertyHelperFinal()){b(this._sortPropertyDimensions(a.getPropertyHelper().getProperties()));}else{a.finalizePropertyHelper().then(function(){b(this._sortPropertyDimensions(a.getPropertyHelper().getProperties()));}.bind(this));}}.bind(this));};r._sortPropertyDimensions=function(e){var i=e.filter(function(I){return I.groupable;});if(i){i.sort(function(a,b){if(a.label&&b.label){return a.label.localeCompare(b.label);}});}return i;};r.getDrillableItems=function(a){var b=a.getItems().filter(function(i){return i.getType()==="groupable";});return b;};r.setChartType=function(a,b){this._getChart(a).setChartType(b);};r.createInnerChartContent=function(a,b){return new Promise(function(e,i){this._setChart(a,new t({id:a.getId()+"--innerChart",chartType:"column",height:"100%",width:"100%",isAnalytical:true}));this._getChart(a).setCustomMessages({'NO_DATA':a.getNoDataText()});this._getState(a).inResultDimensions=[];this._getInnerStructure(a).removeStyleClass("sapUiMDCChartTempText");a.removeStyleClass("sapUiMDCChartTempTextOuter");a.addStyleClass("sapUiMDCChartGrid");var k=this._getState(a);k.aColMeasures=[];k.aInSettings=[];this._setState(a,k);this._createContentFromItems(a).then(function(){this._getChart(a).attachRenderComplete(function(){if(this._getState(a).toolbarUpdateRequested){a._updateToolbar();this._getState(a).toolbarUpdateRequested=false;}}.bind(this));this._getInnerStructure(a).setContent(this._getChart(a));k.dataLoadedCallback=b;this._setState(a,k);var B=this._getBindingInfo(a);this.updateBindingInfo(a,B);this._performInitialBind(a,B);e();}.bind(this));}.bind(this));};r._performInitialBind=function(a,b){if(a&&b&&this._getChart(a)){this._addBindingListener(b,"dataReceived",this._getState(a).dataLoadedCallback.bind(a));this._getChart(a).bindData(b);this._setBindingInfoForState(a,b);var e=this._getState(a);e.innerChartBound=true;}};r.requestToolbarUpdate=function(a){if(a.getItems().length===0){a._updateToolbar();return;}this._getState(a).toolbarUpdateRequested=true;};r.createInnerDimension=function(a,b){this._getPropertyInfosByName(b.getName(),a).then(function(e){this._addInnerDimension(a,b,e);}.bind(this));};r.createInnerMeasure=function(a,b){this._getPropertyInfosByName(b.getName(),a).then(function(e){this._addInnerMeasure(a,b,e);}.bind(this));};r._addInnerDimension=function(a,b,e){var i=new u({name:this.getInternalChartNameFromPropertyNameAndKind(b.getName(),"groupable",a),role:b.getRole()?b.getRole():"category",label:b.getLabel()});if(e.textProperty){i.setTextProperty(e.textProperty);if(e.textFormatter){i.setTextFormatter(this._formatText.bind(e));}i.setDisplayText(true);}this._getChart(a).addDimension(i);};r._addInnerMeasure=function(a,b,e){var i=e.aggregationMethod;var k=e.propertyPath;var A={name:this._getAggregatedMeasureNameForMDCItem(b),label:b.getLabel(),role:b.getRole()?b.getRole():"axis1"};if(i&&k){A.analyticalInfo={propertyPath:k,"with":i};}var B=new v(A);this._getChart(a).addMeasure(B);};r._getAggregatedMeasureNameForProperty=function(a){return a.aggregationMethod+a.name;};r.rebindChart=function(a,b){this.rebind(a,b);};r.rebind=function(a,b){if(a&&b&&this._getChart(a)){this._addBindingListener(b,"dataReceived",this._getState(a).dataLoadedCallback.bind(a));if(b.binding){b.binding.bHasAnalyticalInfo=true;}this._getChart(a).bindData(b);this._setBindingInfoForState(a,b);var e=this._getState(a);e.innerChartBound=true;}};r._getBindingInfo=function(a){if(this._getBindingInfoFromState(a)){return this._getBindingInfoFromState(a);}var b=a.getDelegate().payload;var e="/"+b.collectionName;var B={path:e};return B;};r.getInnerChartBound=function(a){var b=this._getState(a);if(!b){return false;}return b.innerChartBound?true:false;};r.updateBindingInfo=function(a,b){var e=x.call(this,a).concat(y.call(this,a));z(a,b);b.filters=new p(e,true);b.sorter=this.getSorters(a);};function x(a){var b=a.getP13nMode().indexOf("Filter")>-1;var e=[];if(b){var i=a.getPropertyHelper().getProperties();var I=F.getFilterInfo(this.getTypeUtil(),a.getConditions(),i);if(I.filters){e.push(I.filters);}}return e;}function y(a){var b=C.byId(a.getFilter());var e=[];if(!b){return e;}var i=b.getConditions();if(i){var k=b.getPropertyInfoSet?b.getPropertyInfoSet():null;var A=D.getParameterNames(b);var O=F.getFilterInfo(this.getTypeUtil(),i,k,A);if(O.filters){e.push(O.filters);}}return e;}function z(a,b){var e=C.byId(a.getFilter());if(!e){return;}var i=e.getConditions();var k=e.getSearch instanceof Function?e.getSearch():"";if(i){var A=D.getParametersInfo(e,i);if(A){b.path=A;}}if(!b.parameters){b.parameters={};}b.parameters["$search"]=k||undefined;}r.getSorters=function(a){var b;var e=a.getSortConditions()?a.getSortConditions().sorters:[];e.forEach(function(i){var k=a.getItems().find(function(B){return B.getName()===i.name;});if(!k){return;}var A=this.getSorterForItem(k,i);if(b){b.push(A);}else{b=[A];}}.bind(this));return b;};r._getAggregatedMeasureNameForMDCItem=function(a){return this.getInternalChartNameFromPropertyNameAndKind(a.getName(),"aggregatable",a.getParent());};r.getInternalChartNameFromPropertyNameAndKind=function(N,k,a){return N;};r.getPropertyFromNameAndKind=function(N,k,a){return a.getPropertyHelper().getProperty(N);};r.setChartTooltipVisibility=function(a,b){if(this._getChart(a)){if(b){if(!this._getState(a).vizTooltip){var e=this._getState(a);e.vizTooltip=new w();this._setState(a,e);}this._getState(a).vizTooltip.connect(this._getChart(a).getVizUid());}else if(this._getState(a).vizTooltip){this._getState(a).vizTooltip.destroy();}}else{L.error("Trying to set chart tooltip while inner chart was not yet initialized");}};r._loadChart=function(){return new Promise(function(a){var N=['sap/chart/library','sap/chart/Chart','sap/chart/data/Dimension','sap/chart/data/HierarchyDimension','sap/chart/data/TimeDimension','sap/chart/data/Measure','sap/viz/ui5/controls/VizTooltip'];function b(e,i,k,H,A,B,E){t=i;u=k;v=B;w=E;a();}sap.ui.require(N,b);});};r.getPropertyHelperClass=function(){return P;};r._formatText=function(k,a){return k;};r.setNoDataText=function(a,b){this._getChart(a).setCustomMessages({'NO_DATA':b});};r._getPropertyInfosByName=function(N,a){return a._getPropertyByNameAsync(N);};r._getModel=function(a){var b=a.getDelegate().payload;return a.getModel(b.model);};r._addBindingListener=function(b,e,H){if(!b.events){b.events={};}if(!b.events[e]){b.events[e]=H;}else{var O=b.events[e];b.events[e]=function(){H.apply(this,arguments);O.apply(this,arguments);};}};return r;});

/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/m/Popover","sap/ui/core/Core",'sap/ui/core/Control','sap/ui/core/LocaleData','sap/ui/unified/calendar/CalendarUtils','./calendar/Header','./calendar/TimesRow','./calendar/DatesRow','./calendar/MonthPicker','./calendar/YearPicker','sap/ui/core/date/UniversalDate','./library','sap/ui/core/format/DateFormat','sap/ui/Device','sap/ui/core/Locale',"./CalendarTimeIntervalRenderer","sap/ui/dom/containsOrEquals","sap/base/util/deepEqual","sap/base/Log","sap/ui/unified/DateRange","sap/ui/unified/Calendar"],function(P,C,a,L,b,H,T,D,M,Y,U,l,c,d,e,f,g,h,i,j,k){"use strict";var m=a.extend("sap.ui.unified.CalendarTimeInterval",{metadata:{library:"sap.ui.unified",properties:{width:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:null},startDate:{type:"object",group:"Data"},intervalSelection:{type:"boolean",group:"Behavior",defaultValue:false},singleSelection:{type:"boolean",group:"Behavior",defaultValue:true},items:{type:"int",group:"Appearance",defaultValue:12},intervalMinutes:{type:"int",group:"Appearance",defaultValue:60},pickerPopup:{type:"boolean",group:"Appearance",defaultValue:false},minDate:{type:"object",group:"Misc",defaultValue:null},maxDate:{type:"object",group:"Misc",defaultValue:null},_currentPicker:{type:"string",group:"Appearance",defaultValue:"timesRow",visibility:"hidden"}},aggregations:{selectedDates:{type:"sap.ui.unified.DateRange",multiple:true,singularName:"selectedDate"},specialDates:{type:"sap.ui.unified.DateTypeRange",multiple:true,singularName:"specialDate"},header:{type:"sap.ui.unified.calendar.Header",multiple:false,visibility:"hidden"},timesRow:{type:"sap.ui.unified.calendar.TimesRow",multiple:false,visibility:"hidden"},datesRow:{type:"sap.ui.unified.calendar.Month",multiple:false,visibility:"hidden"},monthPicker:{type:"sap.ui.unified.calendar.MonthPicker",multiple:false,visibility:"hidden"},yearPicker:{type:"sap.ui.unified.calendar.YearPicker",multiple:false,visibility:"hidden"}},associations:{ariaLabelledBy:{type:"sap.ui.core.Control",multiple:true,singularName:"ariaLabelledBy"},legend:{type:"sap.ui.unified.CalendarLegend",multiple:false}},events:{select:{},cancel:{},startDateChange:{}}},renderer:f});var n={TIMES_ROW:"timesRow",DATES_ROW:"datesRow",MONTH_PICKER:"monthPicker",YEAR_PICKER:"yearPicker"};m.prototype.init=function(){this._iMode=0;this._oYearFormat=c.getDateInstance({format:"y"});this.data("sap-ui-fastnavgroup","true",true);this._oMinDate=new U(new Date(Date.UTC(1,0,1)));this._oMinDate.getJSDate().setUTCFullYear(1);this._oMaxDate=new U(new Date(Date.UTC(9999,11,31,23,59,59)));this._initializeHeader();this._initializeTimesRow();this._initializeMonthPicker();this._initializeYearPicker();this.setPickerPopup(false);this._iItemsHead=15;};m.prototype._initializeHeader=function(){var $=new H(this.getId()+"--Head");$.attachEvent("pressPrevious",this._handlePrevious,this);$.attachEvent("pressNext",this._handleNext,this);this.setAggregation("header",$);};m.prototype._initializeTimesRow=function(){var $=new T(this.getId()+"--TimesRow");$.attachEvent("focus",I,this);$.attachEvent("select",G,this);$._bNoThemeChange=true;this.setAggregation("timesRow",$);};m.prototype._initializeMonthPicker=function(){var $=this._createMonthPicker();this.setAggregation("monthPicker",$);$._setSelectedDatesControlOrigin(this);};m.prototype._initializeYearPicker=function(){var $=this._createYearPicker();this.setAggregation("yearPicker",$);$._setSelectedDatesControlOrigin(this);};m.prototype._createDatesRow=function(){var $=new D(this.getId()+"--DatesRow",{days:18,selectedDates:[new j(this.getId()+"--Range")]});$.attachEvent("focus",N,this);$.attachEvent("select",K,this);$._bNoThemeChange=true;$.getIntervalSelection=function(){return this.getProperty("intervalSelection");};$.getSingleSelection=function(){return this.getProperty("singleSelection");};$.getSelectedDates=function(){return this.getAggregation("selectedDates",[]);};$.getSpecialDates=function(){return this.getAggregation("specialDates",[]);};$.getAriaLabelledBy=function(){return this.getAssociation("ariaLabelledBy",[]);};return $;};m.prototype._createMonthPicker=function(){var $=new M(this.getId()+"--MP",{columns:0,months:6});$.attachEvent("select",O,this);$._bNoThemeChange=true;$.attachEvent("pageChange",X,this);return $;};m.prototype._createYearPicker=function(){var $=new Y(this.getId()+"--YP",{columns:0,years:6});$.attachEvent("select",Q,this);$.attachEvent("pageChange",Z,this);$._oMinDate.setYear(this._oMinDate.getUTCFullYear());$._oMaxDate.setYear(this._oMaxDate.getUTCFullYear());return $;};m.prototype.exit=function(){if(this._oPopup){this._oPopup.destroy();this._oPopup=null;}if(this._oCalendar){this._oCalendar.removeDelegate(this._oFocusCalendarDelegate);this._oCalendar.destroy();this._oCalendar=null;}if(this._sInvalidateContent){clearTimeout(this._sInvalidateContent);}};m.prototype.onBeforeRendering=function(){var $=this.getAggregation("timesRow");var a1=this._getFocusedDate();v.call(this);$.displayDate(b._createLocalDate(a1,true));};m.prototype._setAriaRole=function($){var a1=this.getAggregation("timesRow");a1._setAriaRole($);a1.invalidate();return this;};m.prototype._getCalendar=function(){var $;if(!this._oCalendar){$=new k(this.getId()+"--Cal",{});$.attachEvent("select",J,this);$.attachEvent("cancel",function(a1){this._oPopup.close();var b1=this.getAggregation("header").getDomRef("B1");if(b1){b1.focus();}},this);this._oFocusCalendarDelegate={onAfterRendering:function(){this.focus();}};$.addDelegate(this._oFocusCalendarDelegate,$);this._oCalendar=$;}return this._oCalendar;};m.prototype._getMonthPicker=function(){return this.getAggregation("monthPicker");};m.prototype._getYearPicker=function(){return this.getAggregation("yearPicker");};m.prototype.setStartDate=function($){b._checkJSDateObject($);if(h(this.getStartDate(),$)){return this;}var a1=$.getFullYear();b._checkYearInValidRange(a1);var b1=this.getMinDate();if(b1&&$.getTime()<b1.getTime()){i.warning("startDate < minDate -> minDate as startDate set",this);$=new Date(b1);}var c1=this.getMaxDate();if(c1&&$.getTime()>c1.getTime()){i.warning("startDate > maxDate -> maxDate as startDate set",this);$=new Date(c1);}this.setProperty("startDate",$);var d1=this.getAggregation("timesRow");d1.setStartDate($);this._oUTCStartDate=new U(d1._getStartDate().getTime());v.call(this);var e1=b._createLocalDate(this._getFocusedDate(),true);if(!d1.checkDateFocusable(e1)){this._setFocusedDate(this._oUTCStartDate);d1.displayDate($);}return this;};m.prototype.removeAllSelectedDates=function(){this._bDateRangeChanged=true;var $=this.removeAllAggregation("selectedDates");return $;};m.prototype.destroySelectedDates=function(){this._bDateRangeChanged=true;var $=this.destroyAggregation("selectedDates");return $;};m.prototype.removeAllSpecialDates=function(){this._bDateRangeChanged=true;var $=this.removeAllAggregation("specialDates");return $;};m.prototype.destroySpecialDates=function(){this._bDateRangeChanged=true;var $=this.destroyAggregation("specialDates");return $;};m.prototype.setIntervalMinutes=function($){if($>=720){throw new Error("Only intervals < 720 minutes are allowed; "+this);}if(1440%$>0){throw new Error("A day must be divisible by the interval size; "+this);}this.setProperty("intervalMinutes",$);var a1=this.getAggregation("timesRow");var b1=b._createLocalDate(this._getFocusedDate(),true);if(!a1.checkDateFocusable(b1)){var c1=o.call(this);this._setFocusedDate(c1);a1.setDate(b._createLocalDate(c1,true));}return this;};m.prototype.setLocale=function($){if(this._sLocale!=$){this._sLocale=$;this._oLocaleData=undefined;this.invalidate();}return this;};m.prototype.getLocale=function(){if(!this._sLocale){this._sLocale=C.getConfiguration().getFormatSettings().getFormatLocale().toString();}return this._sLocale;};m.prototype._getFocusedDate=function(){if(!this._oFocusedDate){q.call(this);}return this._oFocusedDate;};m.prototype._setFocusedDate=function($){if(!($ instanceof U)){throw new Error("Date must be a UniversalDate object "+this);}this._oFocusedDate=new U($.getTime());};m.prototype.focusDate=function($){var a1=false;var b1=this.getAggregation("timesRow");if(!b1.checkDateFocusable($)){var c1=b._createUniversalUTCDate($,undefined,true);R.call(this,c1);a1=true;}A.call(this,$,false);if(a1){this.fireStartDateChange();}return this;};m.prototype.displayDate=function($){A.call(this,$,true);return this;};m.prototype.setItems=function($){this.setProperty("items",$);$=this._getItems();var a1=this.getAggregation("timesRow");a1.setItems($);var b1=b._createLocalDate(this._getFocusedDate(),true);if(!a1.checkDateFocusable(b1)){var c1=o.call(this);this._setFocusedDate(c1);a1.setDate(b._createLocalDate(c1,true));}if(!this.getPickerPopup()){var d1=this.getAggregation("datesRow");var e1=Math.floor($*1.5);if(e1>31){e1=31;}d1.setDays(e1);var f1=this._getMonthPicker();var g1=Math.floor($/2);if(g1>12){g1=12;}f1.setMonths(g1);var h1=this._getYearPicker();var i1=Math.floor($/2);if(i1>20){i1=20;}h1.setYears(i1);}v.call(this);return this;};m.prototype._getItems=function(){var $=this.getItems();if(d.system.phone&&$>6){return 6;}else{return $;}};m.prototype._getLocaleData=function(){if(!this._oLocaleData){var $=this.getLocale();var a1=new e($);this._oLocaleData=L.getInstance(a1);}return this._oLocaleData;};m.prototype.setPickerPopup=function($){var a1=this.getAggregation("header"),b1,c1,d1;this.setProperty("pickerPopup",$);if(b1){b1.destroy();}if($){a1.setVisibleButton0(false);a1.setVisibleButton1(true);a1.setVisibleButton2(false);a1.detachEvent("pressButton1",E,this);a1.attachEvent("pressButton1",E,this);if(this.getAggregation("datesRow")){this.getAggregation("datesRow").destroy();}if(this._getMonthPicker()){this._getMonthPicker().destroy();}if(this._getYearPicker()){this._getYearPicker().destroy();}}else{a1.setVisibleButton0(true);a1.setVisibleButton1(true);a1.setVisibleButton2(true);a1.detachEvent("pressButton0",B,this);a1.attachEvent("pressButton0",B,this);a1.detachEvent("pressButton1",E,this);a1.attachEvent("pressButton1",E,this);a1.detachEvent("pressButton2",F,this);a1.attachEvent("pressButton2",F,this);if(!this.getAggregation("datesRow")){this.setAggregation("datesRow",this._createDatesRow());}if(!this._getYearPicker()){this.setAggregation("yearPicker",this._createYearPicker());}if(!this._getMonthPicker()){this.setAggregation("monthPicker",this._createMonthPicker());}c1=this._getMonthPicker();d1=this._getYearPicker();c1.setColumns(0);c1.setMonths(6);d1.setColumns(0);d1.setYears(6);}return this;};m.prototype.setMinDate=function($){var a1,b1,c1,d1;if(h($,this.getMinDate())){return this;}if(!$){b._updateUTCDate(this._oMinDate.getJSDate(),1,0,1,0,0,0,0);}else{b._checkJSDateObject($);this._oMinDate=b._createUniversalUTCDate($,undefined,true);a1=this.getAggregation("timesRow");this._oMinDate=a1._getIntervalStart(this._oMinDate);b1=this._oMinDate.getUTCFullYear();b._checkYearInValidRange(b1);if(this._oMaxDate.getTime()<this._oMinDate.getTime()){i.warning("minDate > maxDate -> maxDate set to end of the month",this);this._oMaxDate=b._createUniversalUTCDate($,undefined,true);b._updateUTCDate(this._oMaxDate,null,this._oMaxDate.getUTCMonth()+1,0,23,59,59,0);this.setProperty("maxDate",b._createLocalDate(this._oMaxDate,true));}if(this._oFocusedDate){if(this._oFocusedDate.getTime()<this._oMinDate.getTime()){i.warning("focused date < minDate -> minDate focused",this);this.focusDate($);}}if(this._oUTCStartDate&&this._oUTCStartDate.getTime()<this._oMinDate.getTime()){i.warning("start date < minDate -> minDate set as start date",this);_.call(this,new U(this._oMinDate.getTime()),true,true);}}this.setProperty("minDate",$);if(this.getPickerPopup()){d1=this._getCalendar();d1.setMinDate($);}else{c1=this._getYearPicker();c1._oMinDate.setYear(this._oMinDate.getUTCFullYear());}return this;};m.prototype.setMaxDate=function($){var a1,b1,c1,d1,e1,f1;if(h($,this.getMaxDate())){return this;}if(!$){b._updateUTCDate(this._oMaxDate.getJSDate(),9999,11,31,23,59,59,0);}else{b._checkJSDateObject($);this._oMaxDate=b._createUniversalUTCDate($,undefined,true);a1=this.getAggregation("timesRow");this._oMaxDate=a1._getIntervalStart(this._oMaxDate);this._oMaxDate.setUTCMinutes(this._oMaxDate.getUTCMinutes()+this.getIntervalMinutes());this._oMaxDate.setUTCMilliseconds(-1);b1=this._oMaxDate.getUTCFullYear();b._checkYearInValidRange(b1);if(this._oMinDate.getTime()>this._oMaxDate.getTime()){i.warning("maxDate < minDate -> minDate set to begin of the month",this);this._oMinDate=b._createUniversalUTCDate($,undefined,true);b._updateUTCDate(this._oMinDate,null,null,1,0,0,0,0);this.setProperty("minDate",b._createLocalDate(this._oMinDate,true));}if(this._oFocusedDate){if(this._oFocusedDate.getTime()>this._oMaxDate.getTime()){i.warning("focused date > maxDate -> maxDate focused",this);this.focusDate($);}}if(this._oUTCStartDate){c1=new U(this._oUTCStartDate.getTime());c1.setUTCMinutes(c1.getUTCMinutes()+this.getIntervalMinutes()*(this._getItems()-1));if(c1.getTime()>this._oMaxDate.getTime()){d1=new U(this._oMaxDate.getTime());d1.setUTCMinutes(d1.getUTCMinutes()-this.getIntervalMinutes()*(this._getItems()-1));if(d1.getTime()>=this._oMinDate.getTime()){i.warning("end date > maxDate -> maxDate set as end date",this);_.call(this,d1,true,true);}}}}this.setProperty("maxDate",$);if(this.getPickerPopup()){f1=this._getCalendar();f1.setMaxDate($);}else{e1=this._getYearPicker();e1._oMaxDate.setYear(this._oMaxDate.getUTCFullYear());}return this;};m.prototype.onclick=function($){if($.isMarked("delayedMouseEvent")){return;}if($.target.id==this.getId()+"-cancel"){this.onsapescape($);}};m.prototype.onmousedown=function($){$.preventDefault();$.setMark("cancelAutoClose");};m.prototype.onsapescape=function($){if(this.getPickerPopup()){r.call(this);this.fireCancel();}else{switch(this._iMode){case 0:this.fireCancel();break;case 1:case 2:case 3:this.setProperty("_currentPicker",n.TIMES_ROW);break;}}};m.prototype.setProperty=function(){var $=arguments[0],a1=arguments[1];a.prototype.setProperty.apply(this,arguments);if($==="_currentPicker"){switch(a1){case"timesRow":this._iMode=0;break;case"datesRow":this._iMode=1;break;case"monthPicker":this._iMode=2;break;case"yearPicker":this._iMode=3;break;default:return;}}return this;};m.prototype._handlePrevious=function($){var a1=this._getFocusedDate(),b1,c1,d1,e1,f1,g1,h1,i1;switch(this._iMode){case 0:b1=this._getItems();c1=new U(o.call(this).getTime());d1=this.getIntervalMinutes();c1.setUTCMinutes(c1.getUTCMinutes()-b1*d1);a1.setUTCMinutes(a1.getUTCMinutes()-b1*d1);this._setFocusedDate(a1);_.call(this,c1,true);break;case 1:if(!this.getPickerPopup()){e1=this.getAggregation("datesRow");f1=b._createUniversalUTCDate(e1.getDate());g1=e1.getDays();if(f1.getUTCDate()<=g1){f1.setUTCDate(1);}else{f1.setUTCDate(f1.getUTCDate()-g1);}S.call(this,f1);}break;case 2:if(!this.getPickerPopup()){h1=this._getMonthPicker();if(h1.getMonths()<12){h1.previousPage();w.call(this);}else{a1.setUTCFullYear(a1.getUTCFullYear()-1);R.call(this,a1);this._setFocusedDate(a1);v.call(this);W.call(this,a1.getUTCFullYear(),h1);this.fireStartDateChange();}}break;case 3:if(!this.getPickerPopup()){i1=this._getYearPicker();i1.previousPage();x.call(this);}break;}};m.prototype._handleNext=function($){var a1=this._getFocusedDate();switch(this._iMode){case 0:var b1=this._getItems();var c1=new U(o.call(this).getTime());var d1=this.getIntervalMinutes();c1.setUTCMinutes(c1.getUTCMinutes()+b1*d1);a1.setUTCMinutes(a1.getUTCMinutes()+b1*d1);this._setFocusedDate(a1);_.call(this,c1,true);break;case 1:if(!this.getPickerPopup()){var e1=this.getAggregation("datesRow");var f1=b._createUniversalUTCDate(e1.getDate());var g1=new U(f1.getTime());g1.setUTCDate(1);g1.setUTCMonth(g1.getUTCMonth()+1);g1.setUTCDate(0);var h1=e1.getDays();if(f1.getUTCDate()+h1>g1.getUTCDate()){f1.setUTCDate(g1.getUTCDate());}else{f1.setUTCDate(f1.getUTCDate()+h1);}S.call(this,f1);}break;case 2:if(!this.getPickerPopup()){var i1=this._getMonthPicker();if(i1.getMonths()<12){i1.nextPage();w.call(this);}else{a1.setUTCFullYear(a1.getUTCFullYear()+1);R.call(this,a1);this._setFocusedDate(a1);v.call(this);W.call(this,a1.getUTCFullYear(),i1);this.fireStartDateChange();}}break;case 3:if(!this.getPickerPopup()){var j1=this._getYearPicker();j1.nextPage();x.call(this);}break;}};m.prototype._getShowItemHeader=function(){var $=this.getItems();if($>this._iItemsHead){return true;}else{return false;}};function _($,a1,b1){var c1=new U(this._oMaxDate.getTime());c1.setUTCMinutes(c1.getUTCMinutes()-this.getIntervalMinutes()*(this._getItems()-1));if(c1.getTime()<this._oMinDate.getTime()){c1=new U(this._oMinDate.getTime());c1.setUTCMinutes(c1.getUTCMinutes()+this.getIntervalMinutes()*(this._getItems()-1));}if($.getTime()<this._oMinDate.getTime()){$=new U(this._oMinDate.getTime());}else if($.getTime()>c1.getTime()){$=c1;}var d1=this.getAggregation("timesRow");var e1=b._createLocalDate($,true);d1.setStartDate(e1);this._oUTCStartDate=new U(d1._getStartDate().getTime());e1=b._createLocalDate(this._oUTCStartDate,true);this.setProperty("startDate",e1);v.call(this);if(a1){var f1=b._createLocalDate(this._getFocusedDate(),true);if(!d1.checkDateFocusable(f1)){this._setFocusedDate($);d1.setDate(e1);}else{d1.setDate(f1);}}if(!b1){this.fireStartDateChange();}}function o(){if(!this._oUTCStartDate){var $=this.getAggregation("timesRow");$.setStartDate(b._createLocalDate(this._getFocusedDate(),true));this._oUTCStartDate=new U($._getStartDate().getTime());this._setFocusedDate(this._oUTCStartDate);}return this._oUTCStartDate;}function p($){var a1=this._getFocusedDate();var b1=this.getAggregation("timesRow");if(!$){b1.setDate(b._createLocalDate(a1,true));}else{b1.displayDate(b._createLocalDate(a1,true));}v.call(this);}function q(){var $=this.getSelectedDates();if($&&$[0]&&$[0].getStartDate()){this._oFocusedDate=b._createUniversalUTCDate($[0].getStartDate(),undefined,true);}else{var a1=new Date();this._oFocusedDate=b._createUniversalUTCDate(a1,undefined,true);}if(this._oFocusedDate.getTime()<this._oMinDate.getTime()){this._oFocusedDate=new U(this._oMinDate.getTime());}else if(this._oFocusedDate.getTime()>this._oMaxDate.getTime()){this._oFocusedDate=new U(this._oMaxDate.getTime());}}m.prototype._showCalendarPicker=function(){var $=b._createLocalDate(this._getFocusedDate(),true);var a1=this._getCalendar();var b1=new j({startDate:$});a1.displayDate($,false);a1.removeAllSelectedDates();a1.addSelectedDate(b1);a1.setMinDate(this.getMinDate());a1.setMaxDate(this.getMaxDate());V.call(this,a1);this._showOverlay();};m.prototype._showOverlay=function(){this.$("contentOver").css("display","");};m.prototype._hideOverlay=function(){this.$("contentOver").css("display","none");};function r($){if(this._oPopup&&this._oPopup.isOpen()){this._oPopup.close();}this._hideOverlay();if(!$){p.call(this);}this._getCalendar()._closePickers();}function s(){var $=this._getFocusedDate();var a1=this._getItems();var b1=this.getAggregation("datesRow");var c1=b1.getSelectedDates()[0];c1.setStartDate(b._createLocalDate($,true));var d1=new U($.getTime());d1.setUTCDate(1);d1.setUTCMonth(d1.getUTCMonth()+1);d1.setUTCDate(0);var e1=d1.getUTCDate();var f1=Math.floor(a1*1.5);if(f1>e1){f1=e1;}b1.setDays(f1);this.setProperty("_currentPicker",n.DATES_ROW);this._showOverlay();S.call(this,$);this._iMode=1;}function t(){var $=this._getFocusedDate();var a1=this._getMonthPicker();this.setProperty("_currentPicker",n.MONTH_PICKER);this._showOverlay();a1.setMonth($.getUTCMonth());W.call(this,$.getUTCFullYear(),a1);this._iMode=2;w.call(this);}function u(){var $=this._getFocusedDate();var a1=this._getYearPicker();this.setProperty("_currentPicker",n.YEAR_PICKER);this._showOverlay();a1.setDate($.getJSDate());x.call(this);this._iMode=3;}function v(){y.call(this);w.call(this);}function w($){var a1=new U(o.call(this).getTime());var b1=this._getItems();var c1=a1.getJSDate().getUTCFullYear();var d1=this._oMaxDate.getJSDate().getUTCFullYear();var e1=this._oMinDate.getJSDate().getUTCFullYear();var f1=a1.getJSDate().getUTCMonth();var g1=this._oMaxDate.getJSDate().getUTCMonth();var h1=this._oMinDate.getJSDate().getUTCMonth();var i1=a1.getJSDate().getUTCDate();var j1=this._oMaxDate.getJSDate().getUTCDate();var k1=this._oMinDate.getJSDate().getUTCDate();var l1=a1.getJSDate().getUTCHours();var m1=this._oMaxDate.getJSDate().getUTCHours();var n1=this._oMinDate.getJSDate().getUTCHours();var o1=a1.getJSDate().getUTCMinutes();var p1=this._oMaxDate.getJSDate().getUTCMinutes();var q1=this._oMinDate.getJSDate().getUTCMinutes();var r1=this.getAggregation("header");if(this._iMode==2&&!$){var s1=this._getMonthPicker();var t1=s1.getMonths();var u1=s1.getStartMonth();var v1=u1+t1-1;if(u1==0||(c1==e1&&u1<=h1)){r1.setEnabledPrevious(false);}else{r1.setEnabledPrevious(true);}if(v1>10||(c1==d1&&v1>=g1)){r1.setEnabledNext(false);}else{r1.setEnabledNext(true);}return;}if((c1<e1||(c1==e1&&($||(f1<h1||(f1==h1&&(i1<k1||(i1==k1&&(l1<n1||(l1==n1&&o1<=q1)))))))))||((this._iMode==1||this._iMode==2)&&this.getPickerPopup())){r1.setEnabledPrevious(false);}else{r1.setEnabledPrevious(true);}a1.setUTCMinutes(a1.getUTCMinutes()+(b1)*this.getIntervalMinutes()-1);c1=a1.getJSDate().getUTCFullYear();f1=a1.getJSDate().getUTCMonth();i1=a1.getJSDate().getUTCDate();l1=a1.getJSDate().getUTCHours();o1=a1.getJSDate().getUTCMinutes();if((c1>d1||(c1==d1&&(!$||(f1>g1||(f1==g1&&(i1>j1||(i1==j1&&(l1>m1||(l1==m1&&o1>=p1)))))))))||((this._iMode==1||this._iMode==2)&&this.getPickerPopup())){r1.setEnabledNext(false);}else{r1.setEnabledNext(true);}if(this._iMode===1){var w1=new U(a1.getTime());w1.setUTCDate(1);w1.setUTCMonth(w1.getUTCMonth()+1);w1.setUTCDate(0);var x1=this.getAggregation("datesRow").getDays();a1.setUTCDate(1+(Math.ceil(a1.getUTCDate()/x1)-1)*x1);if(w1.getUTCDate()-a1.getUTCDate()<x1){a1.setUTCDate(w1.getUTCDate()-x1+1);}i1=a1.getUTCDate();if(i1<=1||(c1==e1&&f1==h1&&i1<=k1)){r1.setEnabledPrevious(false);}else{r1.setEnabledPrevious(true);}if((i1+x1)>=w1.getUTCDate()||(c1==d1&&f1==g1&&i1>=j1)){r1.setEnabledNext(false);}else{r1.setEnabledNext(true);}}}function x(){var $=this._getYearPicker();var a1=$.getYears();var b1=b._createUniversalUTCDate($.getProperty("_middleDate").toLocalJSDate());b1.setUTCFullYear(b1.getUTCFullYear()+Math.floor(a1/2));var c1=this.getAggregation("header");var d1=new U(this._oMaxDate);d1.setUTCFullYear(d1.getUTCFullYear()-Math.ceil(a1/2));d1.setUTCMonth(11,31);var e1=new U(this._oMinDate);e1.setUTCFullYear(e1.getUTCFullYear()+Math.floor(a1/2)+1);e1.setUTCMonth(0,1);if(b1.getTime()>d1.getTime()){c1.setEnabledNext(false);}else{c1.setEnabledNext(true);}if(b1.getTime()<e1.getTime()){c1.setEnabledPrevious(false);}else{c1.setEnabledPrevious(true);}}function y(){var $=this.getAggregation("header");var a1;var b1=o.call(this);var c1;var d1=this._getLocaleData();var e1=[];var f1=[];var g1;var h1=false;var i1;var j1=false;if(d1.oLocale.sLanguage.toLowerCase()==="ja"||d1.oLocale.sLanguage.toLowerCase()==="zh"){i1=c.getDateInstance({format:"d"}).format(b1,true);}else{i1=(b1.getUTCDate()).toString();}if(this._bLongMonth||!this._bNamesLengthChecked){e1=d1.getMonthsStandAlone("wide");}else{h1=true;e1=d1.getMonthsStandAlone("abbreviated");f1=d1.getMonthsStandAlone("wide");}var k1=b1.getUTCMonth();a1=e1[k1];if(h1){g1=f1[e1[k1]];}if(!this.getPickerPopup()){$.setTextButton0(i1);$.setTextButton1(a1);$.setTextButton2(this._oYearFormat.format(b1,true));}else{c1=c.getInstance({style:"long",strictParsing:true,relative:j1},d1.oLocale);g1=i1=c1.format(b._createLocalDate(b1,true));$.setTextButton1(i1);}if(h1){$.setAriaLabelButton1(g1);}}function z($,a1){var b1;var c1=false;if($.getTime()<this._oMinDate.getTime()){b1=this._oMinDate;c1=true;}else if($.getTime()>this._oMaxDate.getTime()){b1=this._oMaxDate;c1=true;}else{b1=$;}this._setFocusedDate(b1);if(c1||a1){R.call(this,b1);p.call(this,false);this.fireStartDateChange();}}function A($,a1){if($&&(!this._oFocusedDate||this._oFocusedDate.getTime()!=$.getTime())){b._checkJSDateObject($);$=b._createUniversalUTCDate($,undefined,true);var b1=$.getUTCFullYear();b._checkYearInValidRange(b1);if($.getTime()<this._oMinDate.getTime()||$.getTime()>this._oMaxDate.getTime()){throw new Error("Date must not be in valid range (minDate and maxDate); "+this);}this._setFocusedDate($);if(this.getDomRef()&&this._iMode==0){p.call(this,a1);}}}function B($){if(this._iMode!=1){s.call(this);}else{this.setProperty("_currentPicker",n.TIMES_ROW);}}function E($){var a1;if(this.getPickerPopup()){this._showCalendarPicker();}else{if(this._iMode!=2){a1=function(){var b1=this._getMonthPicker();b1._oItemNavigation.focusItem(b1.getProperty("_focusedMonth"));b1.removeDelegate(a1);};t.call(this);this._getMonthPicker().addDelegate({onAfterRendering:a1},this);}else{this.setProperty("_currentPicker",n.TIMES_ROW);}}}function F($){var a1;if(this._iMode!=3){a1=function(){var b1=this._getYearPicker();b1.focus();b1.removeDelegate(a1);};u.call(this);this._getYearPicker().addDelegate({onAfterRendering:a1},this);}else{this.setProperty("_currentPicker",n.TIMES_ROW);}}function G($){this.fireSelect();}function I($){var a1=b._createUniversalUTCDate($.getParameter("date"),undefined,true);var b1=$.getParameter("notVisible");z.call(this,a1,b1);}function J($){var a1=$.getSource(),b1=a1.getSelectedDates()[0].getStartDate();var c1=new U(this._getFocusedDate().getTime());var d1=b._createUniversalUTCDate(b1);c1.setUTCFullYear(d1.getUTCFullYear());c1.setUTCMonth(d1.getUTCMonth(),d1.getUTCDate());z.call(this,c1,true);r.call(this);}function K($){var a1=new U(this._getFocusedDate().getTime());var b1=$.oSource;var c1=b1.getSelectedDates()[0];var d1=b._createUniversalUTCDate(c1.getStartDate());if(!this.getPickerPopup()||d1.getUTCMonth()==a1.getUTCMonth()){a1.setUTCDate(d1.getUTCDate());a1.setUTCMonth(d1.getUTCMonth());a1.setUTCFullYear(d1.getUTCFullYear());z.call(this,a1,true);this.setProperty("_currentPicker",n.TIMES_ROW);}this._addTimesRowFocusDelegate();}function N($){var a1=new U(this._getFocusedDate().getTime());var b1=b._createUniversalUTCDate($.getParameter("date"),undefined,true);var c1=$.getParameter("otherMonth");if(c1&&b1.getUTCMonth()==a1.getUTCMonth()&&b1.getUTCFullYear()==a1.getUTCFullYear()){S.call(this,b1);}}function O($){var a1=new U(this._getFocusedDate().getTime());var b1=this._getMonthPicker();var c1=b1.getMonth();a1.setUTCMonth(c1);if(c1!=a1.getUTCMonth()){a1.setUTCDate(0);}z.call(this,a1,true);this.setProperty("_currentPicker",n.TIMES_ROW);this._addTimesRowFocusDelegate();}function Q($){var a1=new U(this._getFocusedDate().getTime());var b1=this._getYearPicker();var c1=b._createUniversalUTCDate(b1.getDate());var d1=a1.getUTCMonth();c1.setUTCMonth(a1.getUTCMonth(),a1.getUTCDate());c1.setUTCHours(a1.getUTCHours());c1.setUTCMinutes(a1.getUTCMinutes());a1=c1;if(d1!=a1.getUTCMonth()){a1.setUTCDate(0);}z.call(this,a1,true);this.setProperty("_currentPicker",n.TIMES_ROW);this._addTimesRowFocusDelegate();}m.prototype._addTimesRowFocusDelegate=function(){var $={onAfterRendering:function(){this._oItemNavigation.focusItem(this._oItemNavigation.getFocusedIndex());this.removeDelegate($);}},a1=this.getAggregation("timesRow");a1.addDelegate($,a1);};function R($){var a1=this.getAggregation("timesRow");var b1=o.call(this);var c1=a1._oItemNavigation.getFocusedIndex();b1=new U($.getTime());b1.setUTCMinutes(b1.getUTCMinutes()-c1*this.getIntervalMinutes());_.call(this,b1,false,true);}function S($){var a1=this.getAggregation("datesRow");var b1=this.getAggregation("header");if(!this.getPickerPopup()){var c1=new U($.getTime());c1.setUTCDate(1);c1.setUTCMonth(c1.getUTCMonth()+1);c1.setUTCDate(0);var d1=a1.getDays();var e1=new U($.getTime());e1.setUTCDate(1+(Math.ceil($.getUTCDate()/d1)-1)*d1);if(c1.getUTCDate()-e1.getUTCDate()<d1){e1.setUTCDate(c1.getUTCDate()-d1+1);}a1.setStartDate(b._createLocalDate(e1,true));var f1=e1.getJSDate().getUTCFullYear();var g1=this._oMaxDate.getJSDate().getUTCFullYear();var h1=this._oMinDate.getJSDate().getUTCFullYear();var i1=e1.getJSDate().getUTCMonth();var j1=this._oMaxDate.getJSDate().getUTCMonth();var k1=this._oMinDate.getJSDate().getUTCMonth();var l1=e1.getJSDate().getUTCDate();var m1=this._oMaxDate.getJSDate().getUTCDate();var n1=this._oMinDate.getJSDate().getUTCDate();if(l1<=1||(f1==h1&&i1==k1&&l1<=n1)){b1.setEnabledPrevious(false);}else{b1.setEnabledPrevious(true);}if((l1+d1)>=c1.getUTCDate()||(f1==g1&&i1==j1&&l1>=m1)){b1.setEnabledNext(false);}else{b1.setEnabledNext(true);}if(!this._oFocusDatesRowDelegate){this._oFocusDatesRowDelegate={onAfterRendering:function(){this.focus();}};a1.addDelegate(this._oFocusDatesRowDelegate,a1);}}else{b1.setEnabledPrevious(false);b1.setEnabledNext(false);}a1.setDate(b._createLocalDate($,true));}function V($){if(!this._oPopup){var a1=new P({placement:"VerticalPreferredBottom",showHeader:false,showArrow:false,verticalScrolling:false});a1.oPopup.setDurations(0,0);a1.addEventDelegate({onsapescape:this._oCalendar.onsapescape},this._oCalendar);this._oPopup=a1;}this._oPopup.addContent($);this._oPopup.attachAfterClose(function(){this._hideOverlay();this._addTimesRowFocusDelegate();},this);this._oPopup.attachAfterOpen(function(){var c1=b1.$("B1");var d1=this._oPopup.$();var e1=Math.floor((d1.width()-c1.width())/2);this._oPopup.setOffsetX(C.getConfiguration().getRTL()?e1:-e1);var f1=c1.height();this._oPopup.setOffsetY(this._oPopup._getCalculatedPlacement()==="Top"?f1:-f1);},this);var b1=this.getAggregation("header");this._oPopup.openBy(b1.getDomRef("B1"));}function W($,a1){var b1=0;var c1=11;if($==this._oMinDate.getUTCFullYear()){b1=this._oMinDate.getUTCMonth();}if($==this._oMaxDate.getUTCFullYear()){c1=this._oMaxDate.getUTCMonth();}a1.setMinMax(b1,c1);}function X($){w.call(this);}function Z($){x.call(this);}return m;});

/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/model/json/JSONModel","sap/ui/model/base/ManagedObjectModel","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/Device","sap/ui/core/InvisibleText","sap/ui/core/Control","sap/ui/core/Icon","sap/ui/core/Item","sap/ui/layout/HorizontalLayout","sap/ui/layout/Grid","sap/m/SearchField","sap/m/RadioButton","sap/m/ColumnListItem","sap/m/Column","sap/m/Text","sap/m/Bar","sap/m/Table","sap/m/Page","sap/m/Toolbar","sap/m/ToolbarSpacer","sap/m/Button","sap/m/ToggleButton","sap/m/CheckBox","sap/m/Dialog","sap/m/Input","sap/m/Label","sap/m/Title","sap/m/ResponsivePopover","sap/m/SelectList","sap/m/ObjectIdentifier","sap/m/OverflowToolbar","sap/m/OverflowToolbarLayoutData","sap/m/VBox",'sap/m/HBox',"sap/ui/events/KeyCodes",'sap/base/Log',"sap/ui/core/library","sap/m/library"],function(J,M,F,a,D,I,C,b,c,H,G,S,R,d,f,T,B,g,P,h,j,k,l,m,n,o,L,p,q,r,O,s,t,V,u,K,v,w,x){"use strict";var y=x.OverflowToolbarPriority;var z=x.ButtonType;var A=x.FlexAlignItems;var E=x.PlacementType;var N=x.PopinDisplay;var Q=x.ScreenSize;var U=x.ListKeyboardMode;var W=w.ValueState;var X=w.TextAlign;var Y=w.TitleLevel;var Z=C.extend("sap.m.VariantManagement",{metadata:{interfaces:["sap.m.IOverflowToolbarContent"],library:"sap.m",designtime:"sap/m/designtime/VariantManagement.designtime",properties:{supportDefault:{type:"boolean",group:"Misc",defaultValue:true},supportFavorites:{type:"boolean",group:"Misc",defaultValue:true},supportApplyAutomatically:{type:"boolean",group:"Misc",defaultValue:true},supportPublic:{type:"boolean",group:"Misc",defaultValue:true},supportContexts:{type:"boolean",group:"Misc",defaultValue:false},selectedKey:{type:"string",group:"Misc",defaultValue:""},defaultKey:{type:"string",group:"Misc",defaultValue:""},showSaveAs:{type:"boolean",group:"Misc",defaultValue:true},creationAllowed:{type:"boolean",group:"Misc",defaultValue:true},showFooter:{type:"boolean",group:"Misc",defaultValue:true},modified:{type:"boolean",group:"Misc",defaultValue:false},popoverTitle:{type:"string",group:"Misc",defaultValue:""},inErrorState:{type:"boolean",group:"Misc",defaultValue:false},executeOnSelectionForStandardDefault:{type:"boolean",group:"Misc",defaultValue:false},displayTextForExecuteOnSelectionForStandardVariant:{type:"string",group:"Misc",defaultValue:""},level:{type:"sap.ui.core.TitleLevel",group:"Appearance",defaultValue:Y.Auto}},defaultAggregation:"items",aggregations:{items:{type:"sap.m.VariantItem",multiple:true,singularName:"item"}},events:{save:{parameters:{name:{type:"string"},overwrite:{type:"boolean"},key:{type:"string"},execute:{type:"boolean"},def:{type:"boolean"},'public':{type:"boolean"},tile:{type:"boolean"}}},cancel:{},manageCancel:{},manage:{parameters:{renamed:{type:"object[]"},deleted:{type:"string[]"},exe:{type:"object[]"},fav:{type:"object[]"},def:{type:"string"}}},select:{parameters:{key:{type:"string"}}}}},renderer:{apiVersion:2,render:function(e,i){e.openStart("div",i).class("sapMVarMngmt").openEnd();e.renderControl(i.oVariantLayout);e.close("div");}}});Z.INNER_MODEL_NAME="$sapMInnerVariants";Z.MAX_NAME_LEN=100;Z.COLUMN_FAV_IDX=0;Z.COLUMN_NAME_IDX=1;Z.prototype.init=function(){this._oRb=sap.ui.getCore().getLibraryResourceBundle("sap.m");this._oManagedObjectModel=new M(this);this.setModel(this._oManagedObjectModel,"$mVariants");};Z.prototype.applySettings=function(e,i){C.prototype.applySettings.apply(this,arguments);this._createInnerModel();this._initializeControl();};Z.prototype.setShowFooter=function(e){this.setProperty("showFooter",e);return this;};Z.prototype.setDefaultKey=function(e){this.setProperty("defaultKey",e);return this;};Z.prototype.setPopoverTitle=function(e){this.setProperty("popoverTitle",e);return this;};Z.prototype._initializeControl=function(){if(this.oVariantInvisibleText){return;}this.oVariantInvisibleText=new I();this.oVariantText=new p(this.getId()+"-text",{text:{path:'/selectedKey',model:"$mVariants",formatter:function(i){var $="";if(i){$=this.getSelectedVariantText(i);this._setInvisibleText($,this.getModified());}return $;}.bind(this)},level:{path:'/level',model:"$mVariants"}});this.oVariantText.addStyleClass("sapMVarMngmtClickable");this.oVariantText.addStyleClass("sapMVarMngmtTitle");this.oVariantText.addStyleClass("sapMTitleStyleH4");if(D.system.phone){this.oVariantText.addStyleClass("sapMVarMngmtTextPhoneMaxWidth");}else{this.oVariantText.addStyleClass("sapMVarMngmtTextMaxWidth");}var e=new T(this.getId()+"-modified",{text:"*",visible:{path:"/modified",model:"$mVariants",formatter:function(i){var $=this.getSelectedKey();if($){this._setInvisibleText(this.getSelectedVariantText($),i);}return((i===null)||(i===undefined))?false:i;}.bind(this)}});e.setVisible(false);e.addStyleClass("sapMVarMngmtModified");e.addStyleClass("sapMVarMngmtClickable");this.oVariantPopoverTrigger=new l(this.getId()+"-trigger",{icon:"sap-icon://slim-arrow-down",type:z.Transparent,tooltip:this._oRb.getText("VARIANT_MANAGEMENT_TRIGGER_TT")});this.oVariantPopoverTrigger.addAriaLabelledBy(this.oVariantInvisibleText);this.oVariantPopoverTrigger.addStyleClass("sapMVarMngmtClickable");this.oVariantLayout=new H({content:[this.oVariantText,e,this.oVariantPopoverTrigger]});this.oVariantLayout.addStyleClass("sapMVarMngmtLayout");e.setVisible(false);this.oVariantModifiedText=e;this.oVariantInvisibleText.toStatic();this.addDependent(this.oVariantLayout);};Z.prototype.getOverflowToolbarConfig=function(){return{canOverflow:false,invalidationEvents:["save","manage","select"]};};Z.prototype.getTitle=function(){return this.oVariantText;};Z.prototype._setInvisibleText=function(e,i){var $;if(e){if(i){$="VARIANT_MANAGEMENT_SEL_VARIANT_MOD";}else{$="VARIANT_MANAGEMENT_SEL_VARIANT";}this.oVariantInvisibleText.setText(this._oRb.getText($,[e]));}};Z.prototype._createInnerModel=function(){var e=new J({showManualVariantKey:false,showCreateTile:false});this.setModel(e,Z.INNER_MODEL_NAME);};Z.prototype._getShowCreateTile=function(){return this._getInnerModelProperty("/showCreateTile");};Z.prototype._setShowCreateTile=function(e){this._setInnerModelProperty("/showCreateTile",e);};Z.prototype._getShowManualVariantKey=function(){return this._getInnerModelProperty("/showManualVariantKey");};Z.prototype._setShowManualVariantKey=function(e){this._setInnerModelProperty("/showManualVariantKey",e);};Z.prototype._setInnerModelProperty=function(e,i){var $=this.getModel(Z.INNER_MODEL_NAME);if($){$.setProperty(e,i);}};Z.prototype._getInnerModelProperty=function(e){var i=this.getModel(Z.INNER_MODEL_NAME);if(i){return i.getProperty(e);}return null;};Z.prototype._getItems=function(){return this.getItems();};Z.prototype.getSelectedVariantText=function(e){var i=this._getItemByKey(e);if(i){return i.getTitle();}return"";};Z.prototype.getStandardVariantKey=function(){var i=this._getItems();if(i&&i[0]){return i[0].getKey();}return null;};Z.prototype._clearDeletedItems=function(){this._aDeletedItems=[];};Z.prototype._addDeletedItem=function(i){var e=i.getKey();if(this._aDeletedItems.indexOf(e)<0){this._aDeletedItems.push(e);}};Z.prototype._getDeletedItems=function(){return this._aDeletedItems;};Z.prototype._clearRenamedItems=function(){this._aRenamedItems=[];};Z.prototype._addRenamedItem=function(i){var e=i.getKey();if(this._aRenamedItems.indexOf(e)<0){this._aRenamedItems.push(e);}};Z.prototype._removeRenamedItem=function(i){var e=i.getKey();var $=this._aRenamedItems.indexOf(e);if($>=0){this._aRenamedItems.splice($,1);}};Z.prototype._getRenamedItems=function(){return this._aRenamedItems;};Z.prototype._getItemByKey=function(e){var i=null;var $=this._getItems();if($){$.some(function(_){if(_.getKey()===e){i=_;}return(i!==null);});}return i;};Z.prototype._obtainControl=function(e){if(e&&e.target&&e.target.id){var i=e.target.id;var $=i.indexOf("-inner");if($>0){i=i.substring(0,$);}return sap.ui.getCore().byId(i);}return null;};Z.prototype.handleOpenCloseVariantPopover=function(e){if(!this.bPopoverOpen){this._oCtrlRef=this._obtainControl(e);this._openVariantList();}else if(this.oVariantPopOver&&this.oVariantPopOver.isOpen()){this.oVariantPopOver.close();}else if(this.getInErrorState()&&this.oErrorVariantPopOver&&this.oErrorVariantPopOver.isOpen()){this.oErrorVariantPopOver.close();}};Z.prototype.getFocusDomRef=function(){return this.oVariantPopoverTrigger.getFocusDomRef();};Z.prototype.onclick=function(e){if(this.oVariantPopoverTrigger&&!this.bPopoverOpen){this.oVariantPopoverTrigger.focus();}this.handleOpenCloseVariantPopover(e);};Z.prototype.onkeyup=function(e){if(e.which===K.F4||e.which===K.SPACE||e.altKey===true&&e.which===K.ARROW_UP||e.altKey===true&&e.which===K.ARROW_DOWN){this._oCtrlRef=this._obtainControl(e);this._openVariantList();}};Z.prototype.onAfterRendering=function(){if(this.oVariantText){this.oVariantText.$().off("mouseover").on("mouseover",function(){this.oVariantPopoverTrigger.addStyleClass("sapMVarMngmtTriggerBtnHover");}.bind(this));this.oVariantText.$().off("mouseout").on("mouseout",function(){this.oVariantPopoverTrigger.removeStyleClass("sapMVarMngmtTriggerBtnHover");}.bind(this));}};Z.prototype._openInErrorState=function(){var i;if(!this.oErrorVariantPopOver){i=new V({fitContainer:true,alignItems:A.Center,items:[new b({size:"4rem",color:"lightgray",src:"sap-icon://message-error"}),new p({titleStyle:Y.H2,text:this._oRb.getText("VARIANT_MANAGEMENT_ERROR_TEXT1")}),new T({textAlign:X.Center,text:this._oRb.getText("VARIANT_MANAGEMENT_ERROR_TEXT2")})]});i.addStyleClass("sapMVarMngmtErrorPopover");this.oErrorVariantPopOver=new q(this.getId()+"-errorpopover",{title:{path:"/popoverTitle",model:"$mVariants"},contentWidth:"400px",placement:E.VerticalPreferredBottom,content:[new P(this.getId()+"-errorselpage",{showSubHeader:false,showNavButton:false,showHeader:false,content:[i]})],afterOpen:function(){this.bPopoverOpen=true;}.bind(this),afterClose:function(){if(this.bPopoverOpen){setTimeout(function(){this.bPopoverOpen=false;}.bind(this),200);}}.bind(this),contentHeight:"300px"});this.oErrorVariantPopOver.attachBrowserEvent("keyup",function(e){if(e.which===32){this.oErrorVariantPopOver.close();}}.bind(this));}if(this.bPopoverOpen){return;}this.oErrorVariantPopOver.openBy(this.oVariantLayout);};Z.prototype._createVariantList=function(){if(this.oVariantPopOver){return;}this.oVariantManageBtn=new k(this.getId()+"-manage",{text:this._oRb.getText("VARIANT_MANAGEMENT_MANAGE"),enabled:true,press:function(){this._openManagementDialog();}.bind(this),layoutData:new t({priority:y.Low})});this.oVariantSaveBtn=new k(this.getId()+"-mainsave",{text:this._oRb.getText("VARIANT_MANAGEMENT_SAVE"),press:function(){this._handleVariantSave();}.bind(this),visible:{parts:[{path:'$mVariants>/creationAllowed'},{path:'$mVariants>/modified'},{path:'$mVariants>/selectedKey'}],formatter:function(e,$,_){var a1=false;var b1=this._getItemByKey(_);if(b1){a1=b1.getChangeable();}return e&&$&&a1;}.bind(this)},type:z.Emphasized,layoutData:new t({priority:y.Low})});this.oVariantSaveAsBtn=new k(this.getId()+"-saveas",{text:this._oRb.getText("VARIANT_MANAGEMENT_SAVEAS"),press:function(){this._openSaveAsDialog();}.bind(this),layoutData:new t({priority:y.Low}),visible:{parts:[{path:'$mVariants>/creationAllowed'},{path:'$mVariants>/showSaveAs'}],formatter:function(e,$){return e&&$;}}});this.oVariantList=new r(this.getId()+"-list",{selectedKey:{path:"/selectedKey",model:"$mVariants"},itemPress:function(e){var $=null;if(e&&e.getParameters()){var _=e.getParameters().item;if(_){$=_.getKey();}}if($){this.setSelectedKey($);this.fireSelect({key:$});this.oVariantPopOver.close();}}.bind(this)});this.oVariantList.setNoDataText(this._oRb.getText("VARIANT_MANAGEMENT_NODATA"));var i=new c({key:"{$mVariants>key}",text:"{$mVariants>title}"});this.oVariantList.bindAggregation("items",{path:"/items",model:"$mVariants",template:i});this._oSearchField=new S(this.getId()+"-search");this._oSearchField.attachLiveChange(function(e){this._triggerSearch(e,this.oVariantList);}.bind(this));this.oVariantSelectionPage=new P(this.getId()+"-selpage",{subHeader:new h({content:[this._oSearchField]}),content:[this.oVariantList],footer:new s({content:[new j(this.getId()+"-spacer"),this.oVariantSaveBtn,this.oVariantSaveAsBtn,this.oVariantManageBtn]}),showNavButton:false,showHeader:false});this.oVariantSelectionPage.bindProperty("showFooter",{path:"/showFooter",model:"$mVariants"});this.oVariantPopOver=new q(this.getId()+"-popover",{title:{path:"/popoverTitle",model:"$mVariants"},titleAlignment:"Auto",contentWidth:"400px",placement:E.VerticalPreferredBottom,content:[this.oVariantSelectionPage],afterOpen:function(){this.bPopoverOpen=true;this.oVariantPopoverTrigger.setPressed(true);}.bind(this),afterClose:function(){this.oVariantPopoverTrigger.setPressed(false);if(this.bPopoverOpen){setTimeout(function(){this.bPopoverOpen=false;}.bind(this),200);}}.bind(this),contentHeight:"300px"});this.oVariantPopOver.addStyleClass("sapMVarMngmtPopover");if(this.oVariantLayout.$().closest(".sapUiSizeCompact").length>0){this.oVariantPopOver.addStyleClass("sapUiSizeCompact");}this.addDependent(this.oVariantPopOver);};Z.prototype._determineEmphasizedFooterButton=function(){if(this.oVariantSaveBtn.getVisible()){this.oVariantSaveBtn.setType(z.Emphasized);this.oVariantSaveAsBtn.setType(z.Default);}else{this.oVariantSaveAsBtn.setType(z.Emphasized);}};Z.prototype.setModified=function(e){this.setProperty("modified",e);return this;};Z.prototype._openVariantList=function(){if(this.getInErrorState()){this._openInErrorState();return;}if(this.bPopoverOpen){return;}this._createVariantList();this._oSearchField.setValue("");this.oVariantList.getBinding("items").filter(this._getFilters());this.oVariantSelectionPage.setShowSubHeader(this.oVariantList.getItems().length>9);this._determineEmphasizedFooterButton();var e=this.oVariantList.getSelectedItem();if(e){this.oVariantPopOver.setInitialFocus(e.getId());}var i=this._oCtrlRef?this._oCtrlRef:this.oVariantLayout;this._oCtrlRef=null;this.oVariantPopOver.openBy(i);};Z.prototype._triggerSearch=function(e,i){if(!e){return;}var $=e.getParameters();if(!$){return;}var _=$.newValue?$.newValue:"";var a1=new F({path:"title",operator:a.Contains,value1:_});i.getBinding("items").filter(this._getFilters(a1));};Z.prototype._createSaveAsDialog=function(){if(!this.oSaveAsDialog){this.oInputName=new o(this.getId()+"-name",{liveChange:function(){this._checkVariantNameConstraints(this.oInputName);}.bind(this)});var e=new L(this.getId()+"-namelabel",{text:this._oRb.getText("VARIANT_MANAGEMENT_NAME")});e.setLabelFor(this.oInputName);e.addStyleClass("sapMVarMngmtSaveDialogLabel");this.oDefault=new m(this.getId()+"-default",{text:this._oRb.getText("VARIANT_MANAGEMENT_SETASDEFAULT"),visible:{path:"/supportDefault",model:"$mVariants"},width:"100%"});this.oPublic=new m(this.getId()+"-public",{text:this._oRb.getText("VARIANT_MANAGEMENT_SETASPUBLIC"),visible:{path:"/supportPublic",model:"$mVariants"},width:"100%"});this.oExecuteOnSelect=new m(this.getId()+"-execute",{text:this._oRb.getText("VARIANT_MANAGEMENT_EXECUTEONSELECT"),visible:{path:"/supportApplyAutomatically",model:"$mVariants"},width:"100%"});this.oCreateTile=new m(this.getId()+"-tile",{text:this._oRb.getText("VARIANT_MANAGEMENT_CREATETILE"),enabled:true,visible:{path:"/showCreateTile",model:Z.INNER_MODEL_NAME},width:"100%"});this.oInputManualKey=new o(this.getId()+"-key",{visible:{path:"/showManualVariantKey",model:Z.INNER_MODEL_NAME},liveChange:function(){this._checkVariantNameConstraints(this.oInputManualKey);}.bind(this)});this.oLabelKey=new L(this.getId()+"-keylabel",{text:this._oRb.getText("VARIANT_MANAGEMENT_KEY"),required:true,visible:{path:"/showManualVariantKey",model:Z.INNER_MODEL_NAME}});this.oLabelKey.setLabelFor(this.oInputManualKey);this.oSaveSave=new k(this.getId()+"-variantsave",{text:this._oRb.getText("VARIANT_MANAGEMENT_SAVE"),type:z.Emphasized,press:function(){if(!this._bSaveOngoing){this._checkVariantNameConstraints(this.oInputName);if(this.oInputName.getValueState()==="Error"){this.oInputName.focus();return;}this._bSaveOngoing=true;this._bSaveCanceled=false;var $=this._handleVariantSaveAs(this.oInputName.getValue());if(!$){this._bSaveOngoing=false;}}}.bind(this),enabled:true});var i=new G({defaultSpan:"L12 M12 S12"});i.addContent(this.oDefault);i.addContent(this.oPublic);i.addContent(this.oExecuteOnSelect);i.addContent(this.oCreateTile);this.oSaveAsDialog=new n(this.getId()+"-savedialog",{title:this._oRb.getText("VARIANT_MANAGEMENT_SAVEDIALOG"),afterClose:function(){this._bSaveOngoing=false;if(this._sStyleClass){this.setSupportPublic(this._bShowPublic);this.oSaveAsDialog.removeStyleClass(this._sStyleClass);if(this._oRolesComponentContainer){this.oSaveAsDialog.removeContent(this._oRolesComponentContainer);}this._sStyleClass=undefined;this._oRolesComponentContainer=null;}}.bind(this),beginButton:this.oSaveSave,endButton:new k(this.getId()+"-variantcancel",{text:this._oRb.getText("VARIANT_MANAGEMENT_CANCEL"),press:this._cancelPressed.bind(this)}),content:[e,this.oInputName,this.oLabelKey,this.oInputManualKey,i],stretch:D.system.phone});this.oSaveAsDialog.isPopupAdaptationAllowed=function(){return false;};this.oSaveAsDialog.addStyleClass("sapUiContentPadding");this.oSaveAsDialog.addStyleClass("sapMVarMngmtSaveDialog");if(this.oVariantLayout.$().closest(".sapUiSizeCompact").length>0){this.oSaveAsDialog.addStyleClass("sapUiSizeCompact");}this.addDependent(this.oSaveAsDialog);}};Z.prototype._cancelPressed=function(){this._bSaveCanceled=true;this.fireCancel();this.oSaveAsDialog.close();};Z.prototype._getSelectedContexts=function(){return this._oRolesComponentContainer.getComponentInstance().getSelectedContexts();};Z.prototype._setSelectedContexts=function(e){if(!e||(Object.keys(e).length===0)){e={role:[]};}this._oRolesComponentContainer.getComponentInstance().setSelectedContexts(e);};Z.prototype._isInErrorContexts=function(){return this._oRolesComponentContainer.getComponentInstance().hasErrorsAndShowErrorMessage();};Z.prototype._determineRolesSpecificText=function(e,i){if(!e){e={role:[]};}if(e&&i){i.setText(this._oRb.getText((e.role&&e.role.length>0)?"VARIANT_MANAGEMENT_VISIBILITY_RESTRICTED":"VARIANT_MANAGEMENT_VISIBILITY_NON_RESTRICTED"));}};Z.prototype._checkAndAddRolesContainerToManageDialog=function(){if(this._oRolesComponentContainer&&this._oRolesDialog){var e=null;this._oRolesDialog.getContent().some(function(i){if(i===this._oRolesComponentContainer){e=i;return true;}return false;}.bind(this));if(!e){this._oRolesDialog.addContent(this._oRolesComponentContainer);}}};Z.prototype._createRolesDialog=function(){if(!this._oRolesDialog){this._oRolesDialog=new n(this.getId()+"-roledialog",{draggable:true,resizable:true,contentWidth:"40%",title:this._oRb.getText("VARIANT_MANAGEMENT_SELECTROLES_DIALOG"),beginButton:new k(this.getId()+"-rolesave",{text:this._oRb.getText("VARIANT_MANAGEMENT_SAVE"),type:z.Emphasized,press:function(){if(!this._checkAndCreateContextInfoChanges(this._oCurrentContextsKey,this._oTextControl)){return;}this._oRolesDialog.close();}.bind(this)}),endButton:new k(this.getId()+"-rolecancel",{text:this._oRb.getText("VARIANT_MANAGEMENT_CANCEL"),press:function(){this._oRolesDialog.close();}.bind(this)}),content:[this._oRolesComponentContainer],stretch:D.system.phone});this._oRolesDialog.setParent(this);this._oRolesDialog.addStyleClass("sapUiContentPadding");this._oRolesDialog.addStyleClass(this._sStyleClass);this._oRolesDialog.isPopupAdaptationAllowed=function(){return false;};}this._checkAndAddRolesContainerToManageDialog();};Z.prototype._openRolesDialog=function(i,e){this._createRolesDialog();this._oCurrentContextsKey=i.getKey();this._oTextControl=e;this._setSelectedContexts(i.getContexts());this._oRolesDialog.open();};Z.prototype._checkAndCreateContextInfoChanges=function(e,i){if(e){if(this._oRolesComponentContainer){try{if(!this._isInErrorContexts()){var $=this._getSelectedContexts();var _=this._getItemByKey(e);if(_){_.setContexts($);this._determineRolesSpecificText($,i);}}else{return false;}}catch(ex){return false;}}return true;}return false;};Z.prototype._checkAndAddRolesContainerToSaveAsDialog=function(){if(this._oRolesComponentContainer&&this.oSaveAsDialog){var e=null;this.oSaveAsDialog.getContent().some(function(i){if(i===this._oRolesComponentContainer){e=i;return true;}return false;}.bind(this));this._setSelectedContexts({role:[]});if(!e){this.oSaveAsDialog.addContent(this._oRolesComponentContainer);}}};Z.prototype.openSaveAsDialog=function(e,i){this._openSaveAsDialog(true);this.oSaveAsDialog.addStyleClass(e);this._sStyleClass=e;this._bShowPublic=this.getSupportPublic();this.setSupportPublic(false);if(i){Promise.all([i]).then(function($){this._oRolesComponentContainer=$[0];this.setSupportContexts(!!this._oRolesComponentContainer);this._checkAndAddRolesContainerToSaveAsDialog();this.oSaveAsDialog.open();}.bind(this));}else{this.oSaveAsDialog.open();}};Z.prototype._openSaveAsDialog=function(e){this._createSaveAsDialog();this.setSupportContexts(false);this.oInputName.setValue(this.getSelectedVariantText(this.getSelectedKey()));this.oInputName.setEnabled(true);this.oInputName.setValueState(W.None);this.oInputName.setValueStateText(null);this.oDefault.setSelected(false);this.oPublic.setSelected(false);this.oExecuteOnSelect.setSelected(false);this.oCreateTile.setSelected(false);if(this.oVariantPopOver){this.oVariantPopOver.close();}if(!e){this.oSaveAsDialog.open();}};Z.prototype._handleVariantSaveAs=function(e){var i=null;var $=e.trim();var _=this.oInputManualKey.getValue().trim();if($===""){this.oInputName.setValueState(W.Error);this.oInputName.setValueStateText(this._oRb.getText("VARIANT_MANAGEMENT_ERROR_EMPTY"));return false;}if(this._getShowManualVariantKey()){if(_===""){this.oInputManualKey.setValueState(W.Error);this.oInputManualKey.setValueStateText(this._oRb.getText("VARIANT_MANAGEMENT_ERROR_EMPTY"));return false;}i=_;}if(this.oSaveAsDialog){this.oSaveAsDialog.close();}if(this.oDefault.getSelected()){this.setDefaultKey(this.oDefault.getSelected());}var a1={key:i,name:$,overwrite:false,def:this.oDefault.getSelected(),execute:this.oExecuteOnSelect.getSelected(),"public":this.getSupportPublic()?this.oPublic.getSelected():undefined,contexts:this._getContextInfoChanges()};if(this._getShowCreateTile()&&this.oCreateTile){a1.tile=this.oCreateTile.getSelected();}this.fireSave(a1);return true;};Z.prototype._getContextInfoChanges=function(){if(this._oRolesComponentContainer){try{if(!this._isInErrorContexts()){return this._getSelectedContexts();}}catch(e){return undefined;}}return undefined;};Z.prototype._handleVariantSave=function(){var i=this._getItemByKey(this.getSelectedKey());var e=false;if(this.getDefaultKey()===i.getKey()){e=true;}if(this.oVariantPopOver){this.oVariantPopOver.close();}this.fireSave({name:i.getTitle(),overwrite:true,key:i.getKey(),def:e});};Z.prototype.destroyManageDialog=function(){if(this.oManagementDialog){this.oManagementDialog.destroy();this.oManagementDialog=undefined;}};Z.prototype.openManagementDialog=function(e,i,$){if(e&&this.oManagementDialog){this.oManagementDialog.destroy();this.oManagementDialog=undefined;}if(i){this._sStyleClass=i;this._bShowPublic=this.getSupportPublic();this.setSupportPublic(false);this.setSupportContexts(false);}if($){Promise.all([$]).then(function(_){this._oRolesComponentContainer=_[0];this.setSupportContexts(!!this._oRolesComponentContainer);this._openManagementDialog();if(this._sStyleClass){this.oManagementDialog.addStyleClass(this._sStyleClass);}}.bind(this));}else{this._openManagementDialog();if(this._sStyleClass){this.oManagementDialog.addStyleClass(this._sStyleClass);}}};Z.prototype._triggerSearchInManageDialog=function(e,i){if(!e){return;}var $=e.getParameters();if(!$){return;}var _;if($.query){_=$.query;}else{_=$.newValue?$.newValue:"";}this._triggerSearchInManageDialogByValue(_,i);};Z.prototype._triggerSearchInManageDialogByValue=function(e,i){var $=[this._getVisibleFilter(),new F({filters:[new F({path:"title",operator:a.Contains,value1:e}),new F({path:"author",operator:a.Contains,value1:e})],and:false})];i.getBinding("items").filter($);this._bDeleteOccured=true;};Z.prototype.getManageDialog=function(){return this.oManagementDialog;};Z.prototype._createManagementDialog=function(){if(!this.oManagementDialog||this.oManagementDialog.bIsDestroyed){this.oManagementTable=new g(this.getId()+"-managementTable",{contextualWidth:"Auto",fixedLayout:false,growing:true,keyboardMode:U.Edit,columns:[new f({width:"3rem",visible:{path:"/supportFavorites",model:"$mVariants"}}),new f({header:new T({text:this._oRb.getText("VARIANT_MANAGEMENT_NAME")}),width:"16rem"}),new f({header:new T({text:this._oRb.getText("VARIANT_MANAGEMENT_VARIANTTYPE"),wrappingType:"Hyphenated"}),visible:{path:"/supportPublic",model:"$mVariants"},demandPopin:true,popinDisplay:N.Inline,minScreenWidth:Q.Tablet}),new f({header:new T({text:this._oRb.getText("VARIANT_MANAGEMENT_DEFAULT"),wrappingType:"Hyphenated"}),hAlign:X.Center,demandPopin:true,popinDisplay:N.Block,minScreenWidth:Q.Tablet,visible:{path:"/supportDefault",model:"$mVariants"}}),new f({header:new T({text:this._oRb.getText("VARIANT_MANAGEMENT_EXECUTEONSELECT"),wrappingType:"Hyphenated"}),hAlign:this.getDisplayTextForExecuteOnSelectionForStandardVariant()?X.Begin:X.Center,demandPopin:true,popinDisplay:N.Block,minScreenWidth:Q.Tablet,visible:{path:"/supportApplyAutomatically",model:"$mVariants"}}),new f({header:new T({text:this._oRb.getText("VARIANT_MANAGEMENT_VISIBILITY"),wrappingType:"Hyphenated"}),width:"8rem",demandPopin:true,popinDisplay:N.Inline,minScreenWidth:Q.Tablet,visible:{path:"/supportContexts",model:"$mVariants"}}),new f({header:new T({text:this._oRb.getText("VARIANT_MANAGEMENT_AUTHOR")}),demandPopin:true,popinDisplay:N.Block,minScreenWidth:Q.Tablet}),new f({hAlign:X.Center}),new f({visible:false})]});this.oManagementSave=new k(this.getId()+"-managementsave",{text:this._oRb.getText("VARIANT_MANAGEMENT_SAVE"),enabled:true,type:z.Emphasized,press:function(){this._handleManageSavePressed();}.bind(this)});this.oManagementCancel=new k(this.getId()+"-managementcancel",{text:this._oRb.getText("VARIANT_MANAGEMENT_CANCEL"),press:function(){this._resumeManagementTableBinding();this._handleManageCancelPressed();if(this.oManagementDialog){this.oManagementDialog.close();}}.bind(this)});this.oManagementDialog=new n(this.getId()+"-managementdialog",{contentWidth:"64%",resizable:true,draggable:true,title:this._oRb.getText("VARIANT_MANAGEMENT_MANAGEDIALOG"),beginButton:this.oManagementSave,endButton:this.oManagementCancel,afterClose:function(){if(this._sStyleClass){this.setSupportPublic(this._bShowPublic,true);this.oManagementDialog.removeStyleClass(this._sStyleClass);this._sStyleClass=undefined;this._oRolesComponentContainer=null;}}.bind(this),content:[this.oManagementTable],stretch:D.system.phone});this.oManagementDialog.isPopupAdaptationAllowed=function(){return false;};this._oSearchFieldOnMgmtDialog=new S();this._oSearchFieldOnMgmtDialog.attachLiveChange(function(i){this._triggerSearchInManageDialog(i,this.oManagementTable);}.bind(this));this._oSearchFieldOnMgmtDialog.attachSearch(function(i){this._triggerSearchInManageDialog(i,this.oManagementTable);}.bind(this));var e=new B(this.getId()+"-mgmHeaderSearch",{contentMiddle:[this._oSearchFieldOnMgmtDialog]});this.oManagementDialog.setSubHeader(e);this.oManagementDialog.setInitialFocus(this._oSearchFieldOnMgmtDialog);if(this.oVariantLayout.$().closest(".sapUiSizeCompact").length>0){this.oManagementDialog.addStyleClass("sapUiSizeCompact");}this.addDependent(this.oManagementDialog);this.oManagementTable.bindAggregation("items",{path:"/items",model:"$mVariants",factory:this._templateFactoryManagementDialog.bind(this),filters:this._getVisibleFilter()});this._bDeleteOccured=false;}};Z.prototype._setFavoriteIcon=function(i,e){if(i){i.setSrc(e?"sap-icon://favorite":"sap-icon://unfavorite");i.setTooltip(this._oRb.getText(e?"VARIANT_MANAGEMENT_FAV_DEL_TOOLTIP":"VARIANT_MANAGEMENT_FAV_ADD_TOOLTIP"));i.setAlt(this._oRb.getText(e?"VARIANT_MANAGEMENT_FAV_DEL_ACC":"VARIANT_MANAGEMENT_FAV_ADD_ACC"));}};Z.prototype._templateFactoryManagementDialog=function(i,e){var $=null;var _;var a1;var b1;var c1;var d1=e.getObject();if(!d1){v.error("couldn't obtain the item for '"+e.getPath()+"'");return undefined;}var e1=this._determineIndex(e.getPath());if(e1<0){v.error("couldn't obtain item position for '"+e.getPath()+"'");return undefined;}var f1=this.getId()+"-manage";var g1="$mVariants";var h1=function(q1){var d1=q1.oSource.getBindingContext(g1).getObject();this._handleManageTitleChange(q1.oSource,d1);}.bind(this);var i1=function(q1){var d1=q1.oSource.getBindingContext(g1).getObject();this._handleManageTitleChange(q1.oSource,d1);}.bind(this);var j1=function(q1){this._handleManageDefaultVariantChange(q1.oSource,q1.oSource.getBindingContext(g1).getObject(),q1.getParameters().selected);}.bind(this);var k1=function(q1){this._handleManageDeletePressed(q1.oSource.getBindingContext(g1).getObject());var r1=q1.oSource.getParent();if(r1){r1.setVisible(false);}this._reCheckVariantNameConstraints();}.bind(this);var l1=function(q1){this._handleManageFavoriteChanged(q1.oSource,q1.oSource.getBindingContext(g1).getObject());}.bind(this);var m1=function(q1){var d1=q1.oSource.getBindingContext(g1).getObject();this._openRolesDialog(d1,q1.oSource.getParent().getItems()[0]);}.bind(this);if(d1.getRename()){a1=new o(f1+"-input-"+e1,{liveChange:h1,change:i1,value:'{'+g1+">title}"});if(d1.getTitle()!==d1.getOriginalTitle()){this._verifyVariantNameConstraints(a1,d1.getKey(),d1.getTitle());}}else{a1=new O(f1+"-text-"+e1,{title:'{'+g1+">title}"});if($){a1.setTooltip($);}}_=new k(f1+"-del-"+e1,{icon:"sap-icon://decline",enabled:true,type:z.Transparent,press:k1,tooltip:this._oRb.getText("VARIANT_MANAGEMENT_DELETE"),visible:d1.getRemove()});var n1=new b(f1+"-fav-"+e1,{src:{path:"favorite",model:g1,formatter:function(q1){return q1?"sap-icon://favorite":"sap-icon://unfavorite";}},tooltip:{path:'favorite',model:g1,formatter:function(q1){return this._oRb.getText(q1?"VARIANT_MANAGEMENT_FAV_DEL_TOOLTIP":"VARIANT_MANAGEMENT_FAV_ADD_TOOLTIP");}.bind(this)},press:l1,decorative:false});if((this.getStandardVariantKey()===d1.getKey())||(this.getDefaultKey()===d1.getKey())){n1.addStyleClass("sapMVarMngmtFavNonInteractiveColor");}else{n1.addStyleClass("sapMVarMngmtFavColor");}if(this.getDisplayTextForExecuteOnSelectionForStandardVariant()&&(this.getStandardVariantKey()===d1.getKey())){b1=new m(f1+"-exe-"+e1,{wrapping:true,text:'{'+g1+">/displayTextForExecuteOnSelectionForStandardVariant}",selected:'{'+g1+">executeOnSelect}"});}else{b1=new m(f1+"-exe-"+e1,{text:"",selected:'{'+g1+">executeOnSelect}"});}if(this._sStyleClass&&(d1.getKey()!==this.getStandardVariantKey())){var o1=new T({wrapping:false});this._determineRolesSpecificText(d1.getContexts(),o1);var p1=new b({src:"sap-icon://edit",press:m1});p1.addStyleClass("sapMVarMngmtRolesEdit");p1.setTooltip(this._oRb.getText("VARIANT_MANAGEMENT_VISIBILITY_ICON_TT"));c1=new u(f1+"-role-"+e1,{items:[o1,p1]});}else{c1=new T();}return new d({cells:[n1,a1,new T(f1+"-type-"+e1,{text:{path:"sharing",model:g1,formatter:function(q1){return this._oRb.getText(q1==="private"?"VARIANT_MANAGEMENT_PRIVATE":"VARIANT_MANAGEMENT_PUBLIC");}.bind(this)},textAlign:"Center"}),new R(f1+"-def-"+e1,{groupName:this.getId(),select:j1,selected:{path:"/defaultKey",model:g1,formatter:function(q1){return d1.getKey()===q1;}}}),b1,c1,new T(f1+"-author-"+e1,{text:'{'+g1+">author}",textAlign:"Begin"}),_,new T({text:'{'+g1+">key}"})]});};Z.prototype._openManagementDialog=function(){this._createManagementDialog();if(this.oVariantPopOver){this.oVariantPopOver.close();}this._suspendManagementTableBinding();this._clearDeletedItems();this._clearRenamedItems();this._sDefaultKey=this.getDefaultKey();this._sOriginalDefaultKey=this._sDefaultKey;this._oSearchFieldOnMgmtDialog.setValue("");if(this._bDeleteOccured){this._bDeleteOccured=false;this.oManagementTable.getBinding("items").filter(this._getVisibleFilter());}this.oManagementDialog.open();};Z.prototype._toggleIconActivityState=function(i,e,$){if(!i){return;}if(e.getKey()===this.getStandardVariantKey()){return;}if($&&i.hasStyleClass("sapMVarMngmtFavColor")){i.removeStyleClass("sapMVarMngmtFavColor");i.addStyleClass("sapMVarMngmtFavNonInteractiveColor");}else if(i.hasStyleClass("sapMVarMngmtFavNonInteractiveColor")){i.removeStyleClass("sapMVarMngmtFavNonInteractiveColor");i.addStyleClass("sapMVarMngmtFavColor");}};Z.prototype._handleManageTitleChange=function(i,e){this._checkVariantNameConstraints(i,e.getKey());this._addRenamedItem(e);};Z.prototype._handleManageDefaultVariantChange=function(e,i,$){var _=i.getKey();if(e){var a1=e.getParent().getCells()[Z.COLUMN_FAV_IDX];if($){if(this.getSupportFavorites()&&!i.getFavorite()){i.setFavorite(true);var b1=this._getRowForKey(i.getKey());if(b1){var c1=b1.getCells();if(c1){a1=c1[Z.COLUMN_FAV_IDX];this._setFavoriteIcon(a1,true);c1[Z.COLUMN_FAV_IDX+3].focus();}}}this.setDefaultKey(_);}this._toggleIconActivityState(a1,i,$);}};Z.prototype._handleManageCancelPressed=function(){if(this._getDeletedItems().length>0){this._bDeleteOccured=true;this._getDeletedItems().forEach(function(e){var i=this._getItemByKey(e);if(i){i.setVisible(true);}}.bind(this));}this.getItems().forEach(function(i){if(i.getVisible()){i.setTitle(i.getOriginalTitle());i.setFavorite(i.getOriginalFavorite());i.setExecuteOnSelect(i.getOriginalExecuteOnSelect());i.setContexts(i.getOriginalContexts());}});if(this._sOriginalDefaultKey!==this.getDefaultKey()){this.setDefaultKey(this._sOriginalDefaultKey);}this._clearRenamedItems();this._clearDeletedItems();if(this._oManagedObjectModel){this._oManagedObjectModel.checkUpdate();}this.fireManageCancel();};Z.prototype._handleManageFavoriteChanged=function(i,e){if(this.getStandardVariantKey()===e.getKey()){return;}if((this.getDefaultKey()===e.getKey())&&e.getFavorite()){return;}e.setFavorite(!e.getFavorite());var $=this._getRowForKey(e.getKey());if($){$.getCells()[Z.COLUMN_FAV_IDX].focus();}};Z.prototype._getRowForKey=function(e){var i=null;if(this.oManagementTable){this.oManagementTable.getItems().some(function($){var _=$.getCells()[0].getParent();var a1=this.getModel("$mVariants").getObject(_.getBindingContextPath());if(e===a1.getKey()){i=$;}return i!==null;}.bind(this));}return i;};Z.prototype._determineIndex=function(e){var i=-1;var $=e.indexOf('/',1);if($>0){i=parseInt(e.substring($+1));}return i;};Z.prototype._handleManageDeletePressed=function(i){var e=i.getKey();if(this.getStandardVariantKey()===e){return;}i.setVisible(false);this._addDeletedItem(i);if(e===this.getDefaultKey()){this.setDefaultKey(this.getStandardVariantKey());if(this.getSupportFavorites()){var $=this._getItemByKey(this.getStandardVariantKey());if($&&!$.getFavorite()){var _=this._getRowForKey(this.getStandardVariantKey());if(_){$.setFavorite(true);this._setFavoriteIcon(_.getCells()[Z.COLUMN_FAV_IDX],true);}}}}this.oManagementTable.getBinding("items").filter(this._getVisibleFilter());this.oManagementCancel.focus();};Z.prototype._collectManageData=function(){var e={};var i=this.getDefaultKey();if(i!==this._sOriginalDefaultKey){e.def=i;}this.getItems().forEach(function($){if(!$.getVisible()){if(!e.deleted){e.deleted=[];}e.deleted.push($.getKey());}if($.getVisible()&&($.getFavorite()!==$.getOriginalFavorite())){if(!e.fav){e.fav=[];}e.fav.push({key:$.getKey(),visible:$.getFavorite()});}if($.getVisible()&&($.getTitle()!==$.getOriginalTitle())){if(!e.renamed){e.renamed=[];}e.renamed.push({key:$.getKey(),name:$.getTitle()});}if($.getVisible()&&($.getExecuteOnSelect()!==$.getOriginalExecuteOnSelect())){if(!e.exe){e.exe=[];}e.exe.push({key:$.getKey(),exe:$.getExecuteOnSelect()});}if($.getVisible()&&this._hasContextsChanged($)){if(!e.contexts){e.contexts=[];}e.contexts.push({key:$.getKey(),contexts:$.getContexts()});}}.bind(this));return e;};Z.prototype._hasContextsChanged=function(i){return(JSON.stringify(i.getContexts())!==JSON.stringify(i.getOriginalContexts()));};Z.prototype._handleManageSavePressed=function(){if(this._anyInErrorState(this.oManagementTable)){return;}this.oManagementDialog.close();this._getDeletedItems().some(function(i){if(i===this.getSelectedKey()){var $=this.getStandardVariantKey();this.setModified(false);this.setSelectedKey($);this.fireSelect({key:$});return true;}return false;}.bind(this));if(this._getRenamedItems().indexOf(this.getSelectedKey())>=0){var e=this.oVariantText.getBinding("text");if(e){e.checkUpdate(true);}}this.fireManage(this._collectManageData());if(this.oManagementDialog){this._resumeManagementTableBinding();}};Z.prototype._resumeManagementTableBinding=function(){if(this.oManagementTable){var e=this.oManagementTable.getBinding("items");if(e){e.resume();}}};Z.prototype._suspendManagementTableBinding=function(){if(this.oManagementTable){var e=this.oManagementTable.getBinding("items");if(e){e.suspend();}}};Z.prototype._focusOnFirstInputInErrorState=function(e){if(e){e.getItems().some(function(i){var $=i.getCells()[Z.COLUMN_NAME_IDX];if($&&$.getValueState&&($.getValueState()===W.Error)){$.getDomRef().scrollIntoView();$.focus();return true;}return false;});}};Z.prototype._anyInErrorStateManageTable=function(e){var i;var $=false;if(e){e.getItems().some(function(_){i=_.getCells()[Z.COLUMN_NAME_IDX];if(i&&i.getValueState&&(i.getValueState()===W.Error)){$=true;}return $;});}return $;};Z.prototype._anyInErrorState=function(e){if(this._anyInErrorStateManageTable(e)){return true;}var $=this._getRenamedItems();for(var i=$.length-1;i>=0;i--){var _=this._getItemByKey($[i]);if(_){if(_.getTitle()===_.getOriginalTitle()){this._removeRenamedItem(_);}}}var a1=false;this._getRenamedItems().some(function(b1,c1){var _=this._getItemByKey(b1);if(_){a1=this._checkIsDuplicateInModel(_.getTitle(),b1);}return a1;}.bind(this));if(a1){this._oSearchFieldOnMgmtDialog.setValue("");this._triggerSearchInManageDialogByValue("",e);this._focusOnFirstInputInErrorState(e);}return a1;};Z.prototype._getFilters=function(e){var i=[];if(e){i.push(e);}i.push(this._getVisibleFilter());if(this.getSupportFavorites()){i.push(this._getFilterFavorites());}return i;};Z.prototype._getVisibleFilter=function(){return new F({path:"visible",operator:a.EQ,value1:true});};Z.prototype._getFilterFavorites=function(){return new F({path:"favorite",operator:a.EQ,value1:true});};Z.prototype._verifyVariantNameConstraints=function(i,e,$){if(!i){return;}var _=$||i.getValue();_=_.trim();if(!this._checkIsDuplicate(_,e)){if(_===""){i.setValueState(W.Error);i.setValueStateText(this._oRb.getText("VARIANT_MANAGEMENT_ERROR_EMPTY"));}else if(_.indexOf('{')>-1){i.setValueState(W.Error);i.setValueStateText(this._oRb.getText("VARIANT_MANAGEMENT_NOT_ALLOWED_CHAR",["{"]));}else if(_.length>Z.MAX_NAME_LEN){i.setValueState(W.Error);i.setValueStateText(this._oRb.getText("VARIANT_MANAGEMENT_MAX_LEN",[Z.MAX_NAME_LEN]));}else{i.setValueState(W.None);i.setValueStateText(null);}}else{i.setValueState(W.Error);if(this._oSearchFieldOnMgmtDialog&&this._oSearchFieldOnMgmtDialog.getValue()){i.setValueStateText(this._oRb.getText("VARIANT_MANAGEMENT_ERROR_DUPLICATE_SAVE"));}else{i.setValueStateText(this._oRb.getText("VARIANT_MANAGEMENT_ERROR_DUPLICATE"));}}};Z.prototype._checkVariantNameConstraints=function(i,e){this._verifyVariantNameConstraints(i,e);if(this.oManagementDialog&&this.oManagementDialog.isOpen()){this._reCheckVariantNameConstraints();}};Z.prototype._reCheckVariantNameConstraints=function(){var i;var e=false;if(this.oManagementTable){i=this.oManagementTable.getItems();i.some(function($){var _=$.getBindingContext("$mVariants").getObject();if(_&&_.getVisible()){var a1=$.getCells()[Z.COLUMN_NAME_IDX];if(a1&&a1.getValueState&&(a1.getValueState()===W.Error)){this._verifyVariantNameConstraints(a1,_.getKey());if(a1.getValueState()===W.Error){e=true;}}}return e;}.bind(this));}return e;};Z.prototype._checkIsDuplicate=function(e,i){if(this.oManagementDialog&&this.oManagementDialog.isOpen()){var $=this._checkIsDuplicateInManageTable(e,i);if(this._oSearchFieldOnMgmtDialog&&this._oSearchFieldOnMgmtDialog.getValue()&&$){return $;}}return this._checkIsDuplicateInModel(e,i);};Z.prototype._checkIsDuplicateInModel=function(e,i){var $=false;var _=this._getItems();var a1=e.toLowerCase();_.some(function(b1){if(b1.getTitle().toLowerCase()===a1){if(i&&(i===b1.getKey())){return false;}$=true;}return $;});return $;};Z.prototype._checkIsDuplicateInManageTable=function(e,i){var $;var _=false;var a1=e.toLowerCase();if(this.oManagementTable){$=this.oManagementTable.getItems();$.some(function(b1){var c1;var d1=b1.getBindingContext("$mVariants").getObject();if(d1&&d1.getVisible()){var e1=b1.getCells()[Z.COLUMN_NAME_IDX];if(e1&&(d1.getKey()!==i)){if(e1.isA("sap.m.Input")){c1=e1.getValue().toLowerCase();}else{c1=e1.getTitle().toLowerCase();}if(c1===a1){_=true;}}}return _;});}return _;};Z.prototype.exit=function(){var e;C.prototype.exit.apply(this,arguments);this._clearDeletedItems();this._clearRenamedItems();if(this.oVariantInvisibleText&&!this.oVariantInvisibleText._bIsBeingDestroyed){this.oVariantInvisibleText.destroy(true);this.oVariantInvisibleText=undefined;}if(this.oDefault&&!this.oDefault._bIsBeingDestroyed){this.oDefault.destroy();}this.oDefault=undefined;if(this.oPublic&&!this.oPublic._bIsBeingDestroyed){this.oPublic.destroy();}this.oPublic=undefined;if(this.oExecuteOnSelect&&!this.oExecuteOnSelect._bIsBeingDestroyed){this.oExecuteOnSelect.destroy();}this.oExecuteOnSelect=undefined;if(this.oCreateTile&&!this.oCreateTile._bIsBeingDestroyed){this.oCreateTile.destroy();}this.oCreateTile=undefined;this._oRb=undefined;this.oVariantList=undefined;this.oVariantSelectionPage=undefined;this.oVariantLayout=undefined;this.oVariantText=undefined;this.oVariantModifiedText=undefined;this.oVariantPopoverTrigger=undefined;this._oSearchField=undefined;this._oSearchFieldOnMgmtDialog=undefined;this._sDefaultKey=undefined;e=this.getModel(Z.INNER_MODEL_NAME);if(e){e.destroy();}if(this._oManagedObjectModel){this._oManagedObjectModel.destroy();this._oManagedObjectModel=undefined;}this._oRolesComponentContainer=null;if(this._oRolesDialog&&!this._oRolesDialog._bIsBeingDestroyed){this._oRolesDialog.destroy();this._oRolesDialog=null;}};return Z;});

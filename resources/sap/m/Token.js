/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(['./library','sap/ui/core/Control','sap/ui/core/library','sap/ui/core/Icon','./TokenRenderer','sap/ui/events/KeyCodes','sap/ui/core/Core'],function(l,C,c,I,T,K,a){"use strict";var b=c.TextDirection;var d=C.extend("sap.m.Token",{metadata:{library:"sap.m",properties:{selected:{type:"boolean",group:"Misc",defaultValue:false},key:{type:"string",group:"Misc",defaultValue:""},text:{type:"string",group:"Misc",defaultValue:""},editable:{type:"boolean",group:"Misc",defaultValue:true},textDirection:{type:"sap.ui.core.TextDirection",group:"Appearance",defaultValue:b.Inherit},editableParent:{type:"boolean",group:"Behavior",defaultValue:true,visibility:"hidden"},truncated:{type:"boolean",group:"Appearance",defaultValue:false,visibility:"hidden"},posinset:{type:"int",visibility:"hidden"},setsize:{type:"int",visibility:"hidden"}},aggregations:{deleteIcon:{type:"sap.ui.core.Icon",multiple:false,visibility:"hidden"}},associations:{ariaDescribedBy:{type:"sap.ui.core.Control",multiple:true,singularName:"ariaDescribedBy"},ariaLabelledBy:{type:"sap.ui.core.Control",multiple:true,singularName:"ariaLabelledBy"}},events:{"delete":{enableEventBubbling:true},press:{},select:{},deselect:{}}}});d.prototype.init=function(){var D=new I({id:this.getId()+"-icon",src:"sap-icon://decline",noTabStop:true,press:this._fireDeleteToken.bind(this)});D.addStyleClass("sapMTokenIcon");D.setUseIconTooltip(false);this.setAggregation("deleteIcon",D);};d.prototype.ontouchstart=function(e){if(e.target.id===this.getId()+"-icon"){e.preventDefault();}};d.prototype._getTooltip=function(o,e){var t=o.getTooltip_AsString(),D=a.getLibraryResourceBundle("sap.m").getText("TOKEN_ARIA_DELETABLE");if(e&&!t){return D;}return t;};d.prototype._onTokenPress=function(e){var s=this.getSelected(),f=e.ctrlKey||e.metaKey,n=true;if(f||(e.which===K.SPACE)){n=!s;}this.setSelected(n);this.firePress();if(s!==n){if(n){this.fireSelect();}else{this.fireDeselect();}}if(this.getSelected()){this.focus();}};d.prototype.ontap=function(e){var D=this.getAggregation("deleteIcon");if(D&&e.target.id===D.getId()){e.setMark("tokenDeletePress",true);return;}e.setMark("tokenTap",this);this._onTokenPress(e);};d.prototype._fireDeleteToken=function(e,k,B){if(this.getEditable()&&this.getProperty("editableParent")){this.fireDelete({token:this,byKeyboard:k,backspace:B});}e.preventDefault();};d.prototype.onsapspace=function(e){this._onTokenPress(e);if(e){e.preventDefault();e.stopPropagation();}};d.prototype.onkeydown=function(e){if((e.ctrlKey||e.metaKey)&&e.which===K.SPACE){this.onsapspace(e);e.preventDefault();}};d.prototype.getTruncated=function(){return this.getProperty("truncated");};d.prototype.setTruncated=function(v){return this.setProperty("truncated",v);};return d;});

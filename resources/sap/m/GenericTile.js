/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(['./library','sap/ui/core/Control','sap/m/Text','sap/ui/core/HTML','sap/ui/core/Icon','sap/ui/core/IconPool','sap/m/Button','sap/m/GenericTileRenderer','sap/m/GenericTileLineModeRenderer','sap/m/Image','sap/ui/Device','sap/ui/core/ResizeHandler',"sap/base/strings/camelize","sap/base/util/deepEqual","sap/ui/events/PseudoEvents","sap/ui/core/theming/Parameters","sap/ui/thirdparty/jquery"],function(l,C,T,H,I,a,B,G,L,b,D,R,c,d,P,e,q){"use strict";var f=l.GenericTileScope,g=l.LoadState,F=l.FrameType,S=l.Size,h=l.GenericTileMode,j=l.TileSizeBehavior,W=l.WrappingType,U=l.URLHelper;var m="GenericTileDeviceSet";var n={};var o=C.extend("sap.m.GenericTile",{metadata:{library:"sap.m",properties:{mode:{type:"sap.m.GenericTileMode",group:"Appearance",defaultValue:h.ContentMode},header:{type:"string",group:"Appearance",defaultValue:null},subheader:{type:"string",group:"Appearance",defaultValue:null},failedText:{type:"string",group:"Appearance",defaultValue:null},size:{type:"sap.m.Size",group:"Misc",defaultValue:S.Auto,deprecated:true},frameType:{type:"sap.m.FrameType",group:"Misc",defaultValue:F.OneByOne},systemInfo:{type:"string",group:"Misc",defaultValue:null},appShortcut:{type:"string",group:"Misc",defaultValue:null},backgroundImage:{type:"sap.ui.core.URI",group:"Misc",defaultValue:null},headerImage:{type:"sap.ui.core.URI",group:"Misc",defaultValue:null},state:{type:"sap.m.LoadState",group:"Misc",defaultValue:g.Loaded},imageDescription:{type:"string",group:"Accessibility",defaultValue:null},scope:{type:"sap.m.GenericTileScope",group:"Misc",defaultValue:f.Display},sizeBehavior:{type:"sap.m.TileSizeBehavior",defaultValue:j.Responsive},ariaLabel:{type:"string",group:"Accessibility",defaultValue:null},ariaRole:{type:"string",group:"Accessibility",defaultValue:null},ariaRoleDescription:{type:"string",group:"Accessibility",defaultValue:null},url:{type:"sap.ui.core.URI",group:"Misc",defaultValue:null},enableNavigationButton:{type:"boolean",group:"Misc",defaultValue:false},pressEnabled:{type:"boolean",group:"Misc",defaultValue:true},navigationButtonText:{type:"string",group:"Misc",defaultValue:null},wrappingType:{type:"sap.m.WrappingType",group:"Appearance",defaultValue:W.Normal},width:{type:"sap.ui.core.CSSSize",group:"Appearance"},additionalTooltip:{type:"string",group:"Accessibility",defaultValue:null},tileIcon:{type:"sap.ui.core.URI",multiple:false},backgroundColor:{type:"sap.ui.core.CSSColor",group:"Appearance"},valueColor:{type:"sap.m.ValueColor",group:"Appearance",defaultValue:"None"},iconLoaded:{type:"boolean",group:"Misc",defaultValue:true}},defaultAggregation:"tileContent",aggregations:{tileContent:{type:"sap.m.TileContent",multiple:true,bindable:"bindable"},icon:{type:"sap.ui.core.Control",multiple:false,deprecated:true},actionButtons:{type:"sap.m.Button",multiple:true,bindable:"bindable"},_titleText:{type:"sap.m.Text",multiple:false,visibility:"hidden"},_failedMessageText:{type:"sap.m.Text",multiple:false,visibility:"hidden"},_tileIcon:{type:"sap.ui.core.Icon",multiple:false,visibility:"hidden"},_tileIconImage:{type:"sap.m.Image",multiple:false,visibility:"hidden"}},events:{press:{parameters:{scope:{type:"sap.m.GenericTileScope"},action:{type:"string"},domRef:{type:"any"}}}}},renderer:{apiVersion:2,render:function(r,i){if(i.getMode()===h.LineMode){L.render(r,i);}else{G.render(r,i);}}}});o._Action={Press:"Press",Remove:"Remove",More:"More"};o.LINEMODE_SIBLING_PROPERTIES=["state","subheader","header","scope"];o.prototype.init=function(){this._oRb=sap.ui.getCore().getLibraryResourceBundle("sap.m");if(!D.media.hasRangeSet(m)){D.media.initRangeSet(m,[450],"px",["small","large"]);}this._oTitle=new T(this.getId()+"-title");this._oTitle.addStyleClass("sapMGTTitle");this._oTitle.cacheLineHeight=false;this.setAggregation("_titleText",this._oTitle,true);this._oAppShortcut=new T(this.getId()+"-appShortcut");this._oAppShortcut.cacheLineHeight=false;this.addDependent(this._oAppShortcut);this._oSystemInfo=new T(this.getId()+"-systemInfo");this._oSystemInfo.cacheLineHeight=false;this.addDependent(this._oSystemInfo);this._oSubTitle=new T(this.getId()+"-subTitle");this._oSubTitle.cacheLineHeight=false;this.addDependent(this._oSubTitle);this._sFailedToLoad=this._oRb.getText("INFOTILE_CANNOT_LOAD_TILE");this._sLoading=this._oRb.getText("INFOTILE_LOADING");this._oFailedText=new T(this.getId()+"-failed-txt",{maxLines:2});this._oFailedText.cacheLineHeight=false;this._oFailedText.addStyleClass("sapMGTFailed");this.setAggregation("_failedMessageText",this._oFailedText,true);this._oWarningIcon=new I(this.getId()+"-warn-icon",{src:"sap-icon://notification",size:"1.375rem"});this._oWarningIcon.addStyleClass("sapMGTFtrFldIcnMrk");this._oBusy=new H(this.getId()+"-overlay");this._oBusy.setBusyIndicatorDelay(0);this._bTilePress=true;this._bThemeApplied=true;if(!sap.ui.getCore().isInitialized()){this._bThemeApplied=false;sap.ui.getCore().attachInit(this._handleCoreInitialized.bind(this));}else{this._handleCoreInitialized();}this._oNavigateAction=new B(this.getId()+"-navigateAction");this._oNavigateAction._bExcludeFromTabChain=true;this.addDependent(this._oNavigateAction);};o.prototype.setWrappingType=function(w){this.setProperty("wrappingType",w,true);this._oTitle.setWrappingType(w);this._oFailedText.setWrappingType(w);this._oSubTitle.setWrappingType(w);this._oAppShortcut.setWrappingType(w);this._oSystemInfo.setWrappingType(w);return this;};o.prototype.setSubheader=function(s){this.setProperty("subheader",s);this._oSubTitle.setText(s);return this;};o.prototype.setAppShortcut=function(A){this.setProperty("appShortcut",A);this._oAppShortcut.setText(A);return this;};o.prototype.setSystemInfo=function(s){this.setProperty("systemInfo",s);this._oSystemInfo.setText(s);return this;};o.prototype._handleCoreInitialized=function(){this._bThemeApplied=sap.ui.getCore().isThemeApplied();if(!this._bThemeApplied){sap.ui.getCore().attachThemeChanged(this._handleThemeApplied,this);}};o.prototype._handleThemeApplied=function(){this._bThemeApplied=true;this._oTitle.clampHeight();sap.ui.getCore().detachThemeChanged(this._handleThemeApplied,this);};o.prototype._initScopeContent=function(t){if(!this.getState||this.getState()!==g.Disabled){if(this._oMoreIcon){this._oMoreIcon.destroy();this._oMoreIcon=null;}if(this.isA("sap.m.GenericTile")&&this._isIconMode()&&this.getFrameType()===F.TwoByHalf){this._oMoreIcon=this._oMoreIcon||new B({id:this.getId()+"-action-more",icon:"sap-icon://overflow",type:"Transparent",tooltip:this._oRb.getText("GENERICTILE_MORE_ACTIONBUTTON_TEXT")}).addStyleClass("sapMPointer").addStyleClass(t+"MoreIcon").addStyleClass(t+"ActionMoreButton");this._oMoreIcon.ontouchstart=function(){this.removeFocus();}.bind(this);}else{this._oMoreIcon=this._oMoreIcon||new B({id:this.getId()+"-action-more",icon:"sap-icon://overflow",type:"Unstyled"}).addStyleClass("sapMPointer").addStyleClass(t+"MoreIcon");this._oMoreIcon._bExcludeFromTabChain=true;}this._oRemoveButton=this._oRemoveButton||new B({id:this.getId()+"-action-remove",icon:"sap-icon://decline",tooltip:this._oRb.getText("GENERICTILE_REMOVEBUTTON_TEXT")}).addStyleClass("sapUiSizeCompact").addStyleClass(t+"RemoveButton");this._oRemoveButton._bExcludeFromTabChain=true;switch(this.getScope()){case f.Actions:this._oMoreIcon.setVisible(true);this._oRemoveButton.setVisible(true);break;case f.ActionMore:this._oMoreIcon.setVisible(true);this._oRemoveButton.setVisible(false);break;case f.ActionRemove:this._oRemoveButton.setVisible(true);this._oMoreIcon.setVisible(false);break;default:}}};o.prototype._addClassesForButton=function(){this._oMoreIcon.getDomRef().classList.add("sapMBtn");this._oMoreIcon.getDomRef("inner").classList.add("sapMBtnInner");this._oMoreIcon.getDomRef("inner").classList.add("sapMBtnTransparent");};o.prototype.removeFocus=function(){this.getDomRef().classList.add("sapMGTActionButtonPress");this._oMoreIcon._activeButton();};o.prototype._isSmall=function(){return this.getSizeBehavior()===j.Small||window.matchMedia("(max-width: 374px)").matches;};o.prototype.exit=function(){if(this._sParentResizeListenerId){R.deregister(this._sResizeListenerId);this._sParentResizeListenerId=null;}D.media.detachHandler(this._handleMediaChange,this,m);if(this._$RootNode){this._$RootNode.off(this._getAnimationEvents());this._$RootNode=null;}this._clearAnimationUpdateQueue();this._oWarningIcon.destroy();if(this._oImage){this._oImage.destroy();}this._oBusy.destroy();if(this._oMoreIcon){this._oMoreIcon.destroy();}if(this._oRemoveButton){this._oRemoveButton.destroy();}if(this._oNavigateAction){this._oNavigateAction.destroy();}};o.prototype.onBeforeRendering=function(){var s=!!this.getSubheader();if(this.getMode()===h.HeaderMode||this.getMode()===h.IconMode){this._applyHeaderMode(s);}else{this._applyContentMode(s);}var t=this.getTileContent().length;for(var i=0;i<t;i++){this.getTileContent()[i].setProperty("disabled",this.getState()===g.Disabled,true);}this._initScopeContent("sapMGT");this._generateFailedText();this.$().off("mouseenter");this.$().off("mouseleave");if(this._sParentResizeListenerId){R.deregister(this._sResizeListenerId);this._sParentResizeListenerId=null;}var k=this.getParent();if(k&&k.isA("sap.f.GridContainer")){this._applyExtraWidth();}if(k&&k.getParent()&&k.getParent().isA("sap.f.GridContainer")&&k.isA("sap.m.SlideTile")){this._applyExtraWidth(k.getParent(),true);}D.media.detachHandler(this._handleMediaChange,this,m);if(this._$RootNode){this._$RootNode.off(this._getAnimationEvents());}if(this.getFrameType()===F.Auto){this.setProperty("frameType",F.OneByOne,true);}if(this.getMode()!==h.LineMode&&(this.getAppShortcut()||this.getSystemInfo())){this._setMaxLines();}if(this._isNavigateActionEnabled()){var r=this.getNavigationButtonText()?this.getNavigationButtonText():this._oRb.getText("ACTION_READ_MORE");this._oNavigateAction.setText(r);this._oNavigateAction.detachPress(this._navigateEventHandler,this);}};o.prototype.onAfterRendering=function(){this._setupResizeClassHandler();this.$().on("mouseenter",this._updateAriaAndTitle.bind(this));this.$().on("mouseleave",this._removeTooltipFromControl.bind(this));var M=this.getMode();var s=this._isScreenLarge();if(M===h.LineMode){var $=this.$().parent();if(s){this._updateHoverStyle(true);if(this.getParent()instanceof C){this._sParentResizeListenerId=R.register(this.getParent(),this._handleResize.bind(this));}else{this._sParentResizeListenerId=R.register($,this._handleResize.bind(this));}}}if(M===h.LineMode&&this._bUpdateLineTileSiblings){this._updateLineTileSiblings();this._bUpdateLineTileSiblings=false;}if(M===h.LineMode){D.media.attachHandler(this._handleMediaChange,this,m);}if(this._isNavigateActionEnabled()){this._oNavigateAction.attachPress(this._navigateEventHandler,this);}if(this._oMoreIcon&&this._oMoreIcon.getDomRef()&&!this._isIconMode()){this._oMoreIcon.getDomRef().firstChild.classList.remove("sapMBtnHoverable");this._oMoreIcon.getDomRef().firstChild.classList.remove("sapMFocusable");}if(this._isIconMode()&&this.getFrameType()===F.TwoByHalf&&this._oMoreIcon.getDomRef()){this._addClassesForButton();}if(this.getFrameType()===F.TwoByOne&&this.getMode()===h.ActionMode&&this.getState()===g.Loaded){this._applyExtraHeight();}this.onDragComplete();};o.prototype._applyExtraHeight=function(){var i=this.getDomRef("hdr-text").offsetHeight,k=parseInt(getComputedStyle(this.getDomRef("title")).lineHeight.slice(0,2)),r=Math.ceil(i/k);if(r===1&&!this.getHeaderImage()){this.getDomRef("content").classList.add("sapMGTFtrMarginTop");}else{this.getDomRef("content").classList.remove("sapMGTFtrMarginTop");}};o.prototype._setMaxLines=function(){var s=this.getFrameType(),i=s===F.OneByOne||s===F.TwoByHalf?1:2;this._oAppShortcut.setProperty("maxLines",i,true);this._oSystemInfo.setProperty("maxLines",i,true);if(this.getFrameType()===F.TwoByHalf){var A=this.getAppShortcut().length>11,k=this.getSystemInfo().length>11;if((A&&k)||A){this._oAppShortcut.setProperty("maxLines",2,true);}else if(k){this._oSystemInfo.setProperty("maxLines",2,true);}}};o.prototype.onDragComplete=function(){if(this.hasStyleClass("sapMGTPressActive")){this.removeStyleClass("sapMGTPressActive");if(this.$("hover-overlay").length>0){this.$("hover-overlay").removeClass("sapMGTPressActive");}if(this.getMode()===h.LineMode){this.removeStyleClass("sapMGTLineModePress");}}};o.prototype._handleResize=function(){if(this.getMode()===h.LineMode&&this._isScreenLarge()&&this.getParent()){this._queueAnimationEnd();}};o.prototype._setupResizeClassHandler=function(){var i=function(){if(this.getSizeBehavior()===j.Small||window.matchMedia("(max-width: 374px)").matches||this._isSmallStretchTile()){this.$().addClass("sapMTileSmallPhone");if(this._isSmallStretchTile()){this.addStyleClass("sapMGTStretch");}}else{this.$().removeClass("sapMTileSmallPhone");this.removeStyleClass("sapMGTStretch");}}.bind(this);q(window).on("resize",i);i();};o.prototype._isSmallStretchTile=function(){return this.getFrameType()===F.Stretch&&window.matchMedia("(max-width: 600px)").matches;};o.prototype._isCompact=function(){return q("body").hasClass("sapUiSizeCompact")||this.$().is(".sapUiSizeCompact")||this.$().closest(".sapUiSizeCompact").length>0;};o.prototype._calculateStyleData=function(){this.$("lineBreak").remove();if(!this._isScreenLarge()||!this.getDomRef()||this.$().is(":hidden")){return null;}var $=this.$(),E=this.$("endMarker"),s=this.$("startMarker");if(E.length===0||s.length===0){return null;}var k=this._getLineCount(),r,t,u=Math.ceil(L._getCSSPixelValue(this,"margin-top")),v,A=this.$().parent().innerWidth(),w=Math.ceil(L._getCSSPixelValue(this,"min-height")),x=L._getCSSPixelValue(this,"line-height"),y=this.$().is(":not(:first-child)")&&k>1,z=q("<span><br></span>"),i=0,J=sap.ui.getCore().getConfiguration().getRTL(),K=E.position();if(y){z.attr("id",this.getId()+"-lineBreak");$.prepend(z);k=this._getLineCount();K=E.position();}var M={rtl:J,lineBreak:y,startOffset:s.offset(),endOffset:E.offset(),availableWidth:A,lines:[]};var N;if(D.browser.msie||D.browser.edge){N=z.find("br").position();}else{N=z.position();}var O=N;if(!(D.browser.mozilla||D.browser.msie||D.browser.edge)&&N.left<K.left){O=K;}M.positionLeft=y?N.left:$.position().left;M.positionRight=y?$.width()-O.left:M.availableWidth-$.position().left;if(!y&&k>1){M.positionRight=s.parent().innerWidth()-(s.position().left+s.width());}for(i;i<k;i++){if(y&&i===0){continue;}if(k===1){r=J?M.availableWidth-M.positionLeft:M.positionLeft;v=$.width();}else if(i===k-1){r=0;v=J?$.width()-K.left:K.left;}else if(y&&i===1){r=0;v=A;}else{r=0;v=A;}t=i*x+u;M.lines.push({offset:{x:r,y:t},width:v,height:w});}return M;};o.prototype._getStyleData=function(){var s=this._calculateStyleData();if(!d(this._oStyleData,s)){delete this._oStyleData;this._oStyleData=s;return true;}return false;};o.prototype._getAnimationEvents=function(){return"transitionend.sapMGT$id animationend.sapMGT$id".replace(/\$id/g,c(this.getId()));};o.prototype._updateHoverStyle=function(i){if(!this._getStyleData()&&!i){return;}this._clearAnimationUpdateQueue();this._cHoverStyleUpdates=-1;this._oAnimationEndCallIds={};if(this._oStyleData&&this._oStyleData.lineBreak&&this.getUIArea()){this._$RootNode=q(this.getUIArea().getRootNode());this._$RootNode.on(this._getAnimationEvents(),this._queueAnimationEnd.bind(this));}this._queueAnimationEnd();};o.prototype._queueAnimationEnd=function(E){if(E){var t=q(E.target);if(t.is(".sapMGT, .sapMGT *")){return false;}}if(typeof this._cHoverStyleUpdates!=="number"){this._cHoverStyleUpdates=-1;}if(!this._oAnimationEndCallIds){this._oAnimationEndCallIds={};}this._cHoverStyleUpdates++;this._oAnimationEndCallIds[this._cHoverStyleUpdates]=setTimeout(this._handleAnimationEnd.bind(this,this._cHoverStyleUpdates),10);};o.prototype._handleAnimationEnd=function(i){delete this._oAnimationEndCallIds[i];if(this._cHoverStyleUpdates===i){this._getStyleData();L._updateHoverStyle.call(this);}};o.prototype._clearAnimationUpdateQueue=function(){for(var k in this._oAnimationEndCallIds){clearTimeout(this._oAnimationEndCallIds[k]);delete this._oAnimationEndCallIds[k];}};o.prototype._getLineCount=function(){var i=this.getDomRef().getBoundingClientRect(),k=L._getCSSPixelValue(this,"line-height");return Math.round(i.height/k);};o.prototype.getBoundingRects=function(){var i=this.$().offset();return[{offset:{x:i.left,y:i.top},width:this.$().outerWidth(),height:this.$().height()}];};o.prototype._updateLineTileSiblings=function(){var k=this.getParent();if(this.getMode()===h.LineMode&&this._isScreenLarge()&&k){var i=k.indexOfAggregation(this.sParentAggregationName,this);var s=k.getAggregation(this.sParentAggregationName).splice(i+1);for(i=0;i<s.length;i++){var r=s[i];if(r instanceof o&&r.getMode()===h.LineMode){r._updateHoverStyle();}}}};o.prototype.ontouchstart=function(i){if(i&&i.target.id.indexOf("-action-more")===-1&&this.getDomRef()){this.getDomRef().classList.remove("sapMGTActionButtonPress");}this.addStyleClass("sapMGTPressActive");if(this.$("hover-overlay").length>0){this.$("hover-overlay").addClass("sapMGTPressActive");}if(this.getMode()===h.LineMode){this.addStyleClass("sapMGTLineModePress");}};o.prototype.ontouchcancel=function(){this.removeStyleClass("sapMGTPressActive");if(this.$("hover-overlay").length>0){this.$("hover-overlay").removeClass("sapMGTPressActive");}};o.prototype.ontouchend=function(){this.removeStyleClass("sapMGTPressActive");if(this.$("hover-overlay").length>0){this.$("hover-overlay").removeClass("sapMGTPressActive");}if(this.getMode()===h.LineMode){this.removeStyleClass("sapMGTLineModePress");}};o.prototype.ontap=function(i){if(!_(i,this)){var k;if(this._bTilePress&&this.getState()!==g.Disabled){this.$().trigger("focus");k=this._getEventParams(i);if(!(this.isInActionRemoveScope()&&k.action===o._Action.Press)){this.firePress(k);}i.preventDefault();}}};var p=false;o.prototype.onkeydown=function(i){if(!_(i,this)){p=(i.keyCode===16||i.keyCode===27)?true:false;var k=n[i.keyCode];if(!k){n[i.keyCode]=true;if(n[32]||n[13]){i.preventDefault();}}if(P.events.sapselect.fnCheck(i)&&this.getState()!==g.Disabled){this.addStyleClass("sapMGTPressActive");if(this.$("hover-overlay").length>0){this.$("hover-overlay").addClass("sapMGTPressActive");}i.preventDefault();}}};o.prototype._updateAriaLabel=function(){var A=this._getAriaText(),t=this.$(),i=false;if(t.attr("aria-label")!==A){t.attr("aria-label",A);i=true;}return i;};o.prototype.onsaptabnext=function(E){if(this._isIconMode()&&this.getFrameType()===F.TwoByHalf&&E&&E.keyCode){if(E.keyCode===9&&E.srcControl.getId()==this._oMoreIcon.getId()){this._oMoreIcon.removeStyleClass("sapMGTVisible");}else if(E.keyCode===9){this._oMoreIcon.addStyleClass("sapMGTVisible");}}};o.prototype.onkeyup=function(i){if(!_(i,this)){var k=n[i.keyCode];if(k){delete n[i.keyCode];}var r,s=false,t=this.getScope(),A=t===f.Actions||t===f.ActionRemove;if(A&&(P.events.sapdelete.fnCheck(i)||P.events.sapbackspace.fnCheck(i))){r={scope:t,action:o._Action.Remove,domRef:this._oRemoveButton.getPopupAnchorDomRef()};s=true;}if(n[16]&&i.keyCode!==16&&this.getState()!==g.Disabled){p===false;}if((P.events.sapselect.fnCheck(i)||p)&&this.getState()!==g.Disabled){this.removeStyleClass("sapMGTPressActive");if(this.$("hover-overlay").length>0){this.$("hover-overlay").removeClass("sapMGTPressActive");}r=this._getEventParams(i);s=true;}if(!p&&s){this.firePress(r);i.preventDefault();}this._updateAriaLabel();}};o.prototype.setProperty=function(s){C.prototype.setProperty.apply(this,arguments);if(this.getMode()===h.LineMode&&o.LINEMODE_SIBLING_PROPERTIES.indexOf(s)!==-1){this._bUpdateLineTileSiblings=true;}return this;};o.prototype.getHeader=function(){return this._oTitle.getText();};o.prototype.setHeader=function(t){this.setProperty("header",t);this._oTitle.setText(t);return this;};o.prototype.setHeaderImage=function(u){var v=!d(this.getHeaderImage(),u);if(v){if(this._oImage){this._oImage.destroy();this._oImage=undefined;}if(u){this._oImage=a.createControlByURI({id:this.getId()+"-icon-image",src:u},b);this._oImage.addStyleClass("sapMGTHdrIconImage");}}return this.setProperty("headerImage",u);};o.prototype._applyHeaderMode=function(s){var i=this.getFrameType();if(this._isIconMode()){if(s){this._oTitle.setProperty("maxLines",1,true);}else{this._oTitle.setProperty("maxLines",2,true);}}else if(i===F.TwoByOne&&this.getMode()===h.ActionMode){this._oTitle.setProperty("maxLines",2,true);}else if(i===F.OneByHalf||i===F.TwoByHalf){this._oTitle.setProperty("maxLines",2,true);}else{if(s){this._oTitle.setProperty("maxLines",4,true);}else{this._oTitle.setProperty("maxLines",5,true);}}this._changeTileContentContentVisibility(false);};o.prototype._applyContentMode=function(s){var k=this.getFrameType();var t=this.getTileContent();var r=false;if(k===F.TwoByHalf||k===F.OneByHalf){if(t.length){for(var i=0;i<t.length;i++){var u=t[i].getAggregation('content');if(u!==null){if((k===F.OneByHalf&&u.getMetadata().getName()==="sap.m.ImageContent")){r=true;this._oTitle.setProperty("maxLines",2,true);break;}else{this._oTitle.setProperty("maxLines",1,true);break;}}this._oTitle.setProperty("maxLines",2,true);}}else{this._oTitle.setProperty("maxLines",2,true);}}else if(k===F.TwoByOne&&this.getMode()===h.ActionMode){if(s){this._oTitle.setProperty("maxLines",1,true);}else{this._oTitle.setProperty("maxLines",2,true);}}else if(s){this._oTitle.setProperty("maxLines",2,true);}else{this._oTitle.setProperty("maxLines",3,true);}this._changeTileContentContentVisibility(true,k,r);};o.prototype._changeTileContentContentVisibility=function(v,k,r){var t;t=this.getTileContent();for(var i=0;i<t.length;i++){if(k==F.OneByHalf&&r){t[i].setRenderContent(false);}else{t[i].setRenderContent(v);}}};o.prototype._getHeaderAriaAndTooltipText=function(){var t="";var i=true;if(this.getHeader()){t+=this.getHeader();i=false;}if(this.getSubheader()){t+=(i?"":"\n")+this.getSubheader();i=false;}if(this.getImageDescription()){t+=(i?"":"\n")+this.getImageDescription();}return t;};o.prototype._getContentAriaAndTooltipText=function(){var t="";var k=true;var r=this.getTileContent();var A=this.getAdditionalTooltip();if(!this._isInActionScope()&&(this.getMode()===h.ContentMode||this.getMode()===h.ArticleMode||this.getMode()===h.ActionMode)){for(var i=0;i<r.length;i++){if(r[i].getVisible()){if(typeof r[i]._getAriaAndTooltipText==="function"){t+=(k?"":"\n")+r[i]._getAriaAndTooltipText();}else if(r[i].getTooltip_AsString()){t+=(k?"":"\n")+r[i].getTooltip_AsString();}k=false;}}}if(A){t+=(k?"":"\n")+A;}return t;};o.prototype._getAriaAndTooltipText=function(){var A=(this.getTooltip_AsString()&&!this._isTooltipSuppressed())?this.getTooltip_AsString():(this._getHeaderAriaAndTooltipText()+"\n"+this._getContentAriaAndTooltipText());switch(this.getState()){case g.Disabled:return"";case g.Loading:return A+"\n"+this._sLoading;case g.Failed:return A+"\n"+this._oFailedText.getText();default:if(A.trim().length===0){return"";}else{return A;}}};o.prototype._getAriaText=function(){var A=this.getTooltip_Text();var s=this.getAriaLabel();if(!A||this._isTooltipSuppressed()){A=this._getAriaAndTooltipText();}if(this._isInActionScope()){A=this._oRb.getText("GENERICTILE_ACTIONS_ARIA_TEXT")+" "+A;}if(s){A=s+" "+A;}return A;};o.prototype._getTooltipText=function(){var t=this.getTooltip_Text();if(this._isTooltipSuppressed()===true){t=null;}return t;};o.prototype._checkFooter=function(t,i){var s=i.getState();var A=this._isInActionScope()||this._bShowActionsView===true;var k=this.getFrameType();var r=t.getAggregation('content');if(this._isIconMode()){t.setRenderFooter(false);}else if(s===g.Failed||A&&s!==g.Disabled){t.setRenderFooter(false);}else if(k===F.TwoByHalf&&(r!==null||this.getSubheader())){t.setRenderFooter(false);}else if(k===F.OneByHalf&&((r!==null&&r.getMetadata().getName()!=="sap.m.ImageContent")||this.getSubheader())){t.setRenderFooter(false);}else{t.setRenderFooter(true);return true;}};o.prototype._isInActionScope=function(){return this.getScope()===f.Actions||this.getScope()===f.ActionMore||this.getScope()===f.ActionRemove;};o.prototype.isInActionRemoveScope=function(){return this.getScope()===f.ActionRemove;};o.prototype._generateFailedText=function(){var s=this.getFailedText();var i=s?s:this._sFailedToLoad;this._oFailedText.setProperty("text",i,true);this._oFailedText.setAggregation("tooltip",i,true);};o.prototype._isTooltipSuppressed=function(){var t=this.getTooltip_Text();if(t&&t.length>0&&t.trim().length===0){return true;}else{return false;}};o.prototype._isHeaderTextTruncated=function(){var i,M,$,w;if(this.getMode()===h.LineMode){$=this.$("hdr-text");if($.length>0){w=Math.ceil($[0].getBoundingClientRect().width);return($[0]&&w<$[0].scrollWidth);}else{return false;}}else{i=this.getAggregation("_titleText").getDomRef("inner");M=this.getAggregation("_titleText").getClampHeight(i);return(M<i.scrollHeight);}};o.prototype._isSubheaderTextTruncated=function(){var s;if(this.getMode()===h.LineMode){s=this.$("subHdr-text");}else{s=this.$("subTitle");}if(s.length>0){var w=Math.ceil(s[0].getBoundingClientRect().width);return(s[0]&&w<s[0].scrollWidth);}else{return false;}};o.prototype._setTooltipFromControl=function(){var t=this._getAriaAndTooltipText();if(t&&!this._getTooltipText()&&!this._isTooltipSuppressed()){this.$().attr("title",t.trim());this._bTooltipFromControl=true;}};o.prototype._updateAriaAndTitle=function(){var A=this._getAriaAndTooltipText();var s=this._getAriaText();var t=this.$();if(t.attr("title")!==A){t.attr("aria-label",s);}if(this._isInActionScope()){t.find('*:not(.sapMGTRemoveButton,.sapMGTActionMoreButton)').removeAttr("aria-label").removeAttr("title").off("mouseenter");}else{t.find('*').removeAttr("aria-label").removeAttr("title").off("mouseenter");}this._setTooltipFromControl();};o.prototype._removeTooltipFromControl=function(){if(this._bTooltipFromControl){this.$().removeAttr("title");this._bTooltipFromControl=false;}};o.prototype._isScreenLarge=function(){return this._getCurrentMediaContainerRange(m).name==="large";};o.prototype._getEventParams=function(E){var i,A=o._Action.Press,s=this.getScope(),k=this.getDomRef();if((s===f.Actions||f.ActionRemove)&&E.target.id.indexOf("-action-remove")>-1){A=o._Action.Remove;k=this._oRemoveButton.getPopupAnchorDomRef();}else if((s===f.Actions||s===f.ActionMore)&&this._isIconMode&&this._isIconMode()&&E.target.id.indexOf("-action-more")>-1){A=o._Action.More;k=this._oMoreIcon.getDomRef();}else if(s===f.Actions||s===f.ActionMore){k=this._oMoreIcon.getDomRef();}i={scope:s,action:A,domRef:k};return i;};o.prototype._handleMediaChange=function(){this._bUpdateLineTileSiblings=true;this.invalidate();};o.prototype.setPressEnabled=function(v){this._bTilePress=v;this.setProperty("pressEnabled",v);return this;};o.prototype.showActionsView=function(v){if(this._bShowActionsView!==v){this._bShowActionsView=v;this.invalidate();}};o.prototype._generateIconAggregation=function(i){var A="";this._oIcon=a.createControlByURI({size:this.getFrameType()===F.OneByOne?"2rem":"1.25rem",useIconTooltip:false,src:i});if(!this._oIcon){this._oIcon=a.createControlByURI({height:this.getFrameType()===F.OneByOne?"2rem":"1.25rem",width:this.getFrameType()===F.OneByOne?"2rem":"1.25rem",useIconTooltip:false,src:i},b).addStyleClass("sapMPointer").addStyleClass("sapMGTTileIcon");}this._oIcon.addStyleClass("sapMPointer").addStyleClass("sapMGTTileIcon");if(this._oIcon instanceof b){A="_tileIconImage";}else if(this._oIcon instanceof I){A="_tileIcon";}if(A){this.setAggregation(A,this._oIcon);}return A;};o.prototype._isIconMode=function(){if(this.getMode()===h.IconMode&&(this.getFrameType()===F.OneByOne||this.getFrameType()===F.TwoByHalf)){if(!this.getBackgroundColor()&&this.getFrameType()===F.TwoByHalf){this._setDefaultBackgroundColor();}if(this.getTileIcon()&&this.getBackgroundColor()){return true;}else{if(!this.getIconLoaded()){return true;}else{return false;}}}else{return false;}};o.prototype._setDefaultBackgroundColor=function(){var s=e.get("sapUiContentPlaceholderloadingBackground");this.setProperty("backgroundColor",s,true);};o.prototype._isNavigateActionEnabled=function(){return this.getMode()===h.ArticleMode&&this.getUrl()&&this.getEnableNavigationButton();};o.prototype._applyExtraWidth=function(i,t){var s;if(t==true){s=i.getActiveLayoutSettings().getGap();}else{s=this.getParent().getActiveLayoutSettings().getGap();}var k=this.getFrameType()===F.TwoByHalf||this.getFrameType()===F.TwoByOne,r=s==="16px"||s==="1rem";if(r&&k){this.addStyleClass("sapMGTWidthForGridContainer");}else if(!r&&this.hasStyleClass("sapMGTWidthForGridContainer")){this.removeStyleClass("sapMGTWidthForGridContainer");}};o.prototype._isActionMode=function(){return this.getFrameType()===F.TwoByOne&&this.getMode()===h.ActionMode&&this.getActionButtons().length;};o.prototype._getNavigateAction=function(){return this._oNavigateAction;};o.prototype._navigateEventHandler=function(E){E.preventDefault();var u=E.getSource().getParent().getUrl();U.redirect(u,true);};function _(i,t){var k=false,r=false;if(t._isActionMode()){var A=document.querySelector("#"+t.getId()+"-actionButtons");k=A&&A!==i.target&&A.contains(i.target);}if(t._isNavigateActionEnabled()){var N=document.querySelector("#"+t.getId()+"-navigateActionContainer");r=N&&N!==i.target&&N.contains(i.target);}return k||r;}return o;});

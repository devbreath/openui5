/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(['./library','sap/ui/core/Control','./Button','./ButtonRenderer','sap/ui/core/EnabledPropagator','sap/ui/core/IconPool','sap/ui/core/library','./SplitButtonRenderer',"sap/ui/events/KeyCodes"],function(l,C,B,a,E,I,c,S,K){"use strict";var T=c.TextDirection;var b=l.ButtonType;var d=C.extend("sap.m.SplitButton",{metadata:{interfaces:["sap.m.IOverflowToolbarContent"],library:"sap.m",properties:{text:{type:"string",group:"Misc",defaultValue:null},type:{type:"sap.m.ButtonType",group:"Appearance",defaultValue:b.Default},width:{type:"sap.ui.core.CSSSize",group:"Misc",defaultValue:null},enabled:{type:"boolean",group:"Behavior",defaultValue:true},icon:{type:"sap.ui.core.URI",group:"Appearance",defaultValue:null},activeIcon:{type:"sap.ui.core.URI",group:"Misc",defaultValue:null},iconDensityAware:{type:"boolean",group:"Misc",defaultValue:true},textDirection:{type:"sap.ui.core.TextDirection",group:"Appearance",defaultValue:T.Inherit}},aggregations:{_textButton:{type:"sap.m.Button",multiple:false,visibility:"hidden"},_arrowButton:{type:"sap.m.Button",multiple:false,visibility:"hidden"}},associations:{ariaDescribedBy:{type:"sap.ui.core.Control",multiple:true,singularName:"ariaDescribedBy"},ariaLabelledBy:{type:"sap.ui.core.Control",multiple:true,singularName:"ariaLabelledBy"}},events:{press:{},arrowPress:{}}}});E.call(d.prototype);d.prototype.onAfterRendering=function(){var $=this._getTextButton().$(),e=this._getArrowButton().$();$.attr("tabindex","-1");e.attr("tabindex","-1");$.removeAttr("title");e.removeAttr("title");$.removeAttr("aria-describedby");e.removeAttr("aria-describedby");};d.prototype._handleAction=function(i){if(i){this.fireArrowPress();}else{this.firePress();}};d.prototype.setArrowState=function(i){var A=this.getAggregation("_arrowButton");if(!A){return;}if(i){A.$().addClass('sapMSBActive');}else{A.$().removeClass('sapMSBActive');}};d.prototype._getTextButton=function(){var o=this.getAggregation("_textButton");if(!o){o=new B({id:this.getId()+"-textButton",width:'100%',icon:this.getIcon(),text:this.getText(),press:this._handleAction.bind(this,false)}).addStyleClass('sapMSBText');this.setAggregation("_textButton",o);}return o;};d.prototype._getArrowButton=function(){var o=this.getAggregation("_arrowButton");if(!o){o=new B({id:this.getId()+"-arrowButton",icon:"sap-icon://slim-arrow-down",press:this._handleAction.bind(this,true),tooltip:sap.ui.getCore().getLibraryResourceBundle("sap.m").getText("SPLIT_BUTTON_ARROW_TOOLTIP"),ariaHasPopup:c.aria.HasPopup.Menu}).addStyleClass("sapMSBArrow");this.setAggregation("_arrowButton",o);}return o;};d.prototype.setProperty=function(p,v,s){if(p==="type"&&(v===b.Up||v===b.Back||v===b.Unstyled)){return this;}var r=C.prototype.setProperty.apply(this,arguments);if(p==="activeIcon"||p==="iconDensityAware"||p==="textDirection"){B.prototype.setProperty.apply(this._getTextButton(),arguments);}else if(p==="text"||p==="type"||p==="icon"){var e="set"+_(p);B.prototype[e].call(this._getTextButton(),v);if(p==="type"){B.prototype[e].call(this._getArrowButton(),v);}}return r;};function _(t){return t.charAt(0).toUpperCase()+t.slice(1);}d.prototype.onkeydown=function(e){if(e.which===K.SPACE){e.preventDefault();}this._getTextButton().onkeydown(e);};d.prototype.onkeyup=function(e){this._getTextButton().onkeyup(e);};d.prototype.onsapup=function(e){this._getArrowButton().firePress();};d.prototype.onsapdown=function(e){this._getArrowButton().firePress();};d.prototype.onsapupmodifiers=function(e){this._getArrowButton().firePress();};d.prototype.onsapdownmodifiers=function(e){this._getArrowButton().firePress();};d.prototype.onsapshow=function(e){this._getArrowButton().firePress();e.preventDefault();};d.prototype.getButtonTypeAriaLabelId=function(){var s=this._getTextButton().getType();return a.getButtonTypeAriaLabelId(s);};d.prototype.getTitleAttributeValue=function(){var t=this.getTooltip_AsString(),i=I.getIconInfo(this.getIcon()),r;if(t||(i&&i.text&&!this.getText())){r=t||i.text;}return r;};d.prototype.getOverflowToolbarConfig=function(){var o={canOverflow:true,propsUnrelatedToSize:["enabled","type","icon","activeIcon"],autoCloseEvents:["press"]};return o;};return d;});

/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["./Bar","./InstanceManager","./AssociativeOverflowToolbar","./ToolbarSpacer","./Title","./library","sap/m/Image","sap/ui/core/Control","sap/ui/core/IconPool","sap/ui/core/Popup","sap/ui/core/delegate/ScrollEnablement","sap/ui/core/RenderManager","sap/ui/core/InvisibleText","sap/ui/core/ResizeHandler","sap/ui/core/theming/Parameters","sap/ui/core/util/ResponsivePaddingsEnablement","sap/ui/Device","sap/ui/core/library","sap/ui/events/KeyCodes","./TitlePropagationSupport","./DialogRenderer","sap/base/Log","sap/ui/thirdparty/jquery","sap/ui/core/Core","sap/ui/core/Configuration","sap/ui/dom/units/Rem","sap/ui/dom/jquery/control","sap/ui/dom/jquery/Focusable"],function(B,I,A,T,a,l,b,C,c,P,S,R,d,f,g,h,D,j,K,k,m,L,q,n,o,p){"use strict";var O=j.OpenState;var r=l.ButtonType;var s=l.DialogType;var t=l.DialogRoleType;var V=j.ValueState;var u=j.TitleLevel;var v=l.TitleAlignment;var w=n.getConfiguration().getAnimationMode();var U=w!==o.AnimationMode.none&&w!==o.AnimationMode.minimal;var x=U?300:10;var y=17;var z=p.toPx(1);var H=5;var E=g.get({name:"_sap_m_Dialog_VerticalMargin",callback:function(e){E=parseFloat(e);}});if(E){E=parseFloat(E);}else{E=3;}var F=C.extend("sap.m.Dialog",{metadata:{interfaces:["sap.ui.core.PopupInterface"],library:"sap.m",properties:{icon:{type:"sap.ui.core.URI",group:"Appearance",defaultValue:null},title:{type:"string",group:"Appearance",defaultValue:null},showHeader:{type:"boolean",group:"Appearance",defaultValue:true},type:{type:"sap.m.DialogType",group:"Appearance",defaultValue:s.Standard},state:{type:"sap.ui.core.ValueState",group:"Appearance",defaultValue:V.None},stretchOnPhone:{type:"boolean",group:"Appearance",defaultValue:false,deprecated:true},stretch:{type:"boolean",group:"Appearance",defaultValue:false},contentWidth:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:null},contentHeight:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:null},horizontalScrolling:{type:"boolean",group:"Behavior",defaultValue:true},verticalScrolling:{type:"boolean",group:"Behavior",defaultValue:true},resizable:{type:"boolean",group:"Behavior",defaultValue:false},draggable:{type:"boolean",group:"Behavior",defaultValue:false},escapeHandler:{type:"function",group:"Behavior",defaultValue:null},role:{type:"sap.m.DialogRoleType",group:"Data",defaultValue:t.Dialog,visibility:"hidden"},closeOnNavigation:{type:"boolean",group:"Behavior",defaultValue:true},titleAlignment:{type:"sap.m.TitleAlignment",group:"Misc",defaultValue:v.Auto}},defaultAggregation:"content",aggregations:{content:{type:"sap.ui.core.Control",multiple:true,singularName:"content"},subHeader:{type:"sap.m.IBar",multiple:false},customHeader:{type:"sap.m.IBar",multiple:false},beginButton:{type:"sap.m.Button",multiple:false},endButton:{type:"sap.m.Button",multiple:false},buttons:{type:"sap.m.Button",multiple:true,singularName:"button"},_header:{type:"sap.ui.core.Control",multiple:false,visibility:"hidden"},_icon:{type:"sap.ui.core.Control",multiple:false,visibility:"hidden"},_toolbar:{type:"sap.m.OverflowToolbar",multiple:false,visibility:"hidden"},_valueState:{type:"sap.ui.core.InvisibleText",multiple:false,visibility:"hidden"}},associations:{leftButton:{type:"sap.m.Button",multiple:false,deprecated:true},rightButton:{type:"sap.m.Button",multiple:false,deprecated:true},initialFocus:{type:"sap.ui.core.Control",multiple:false},ariaDescribedBy:{type:"sap.ui.core.Control",multiple:true,singularName:"ariaDescribedBy"},ariaLabelledBy:{type:"sap.ui.core.Control",multiple:true,singularName:"ariaLabelledBy"}},events:{beforeOpen:{},afterOpen:{},beforeClose:{parameters:{origin:{type:"sap.m.Button"}}},afterClose:{parameters:{origin:{type:"sap.m.Button"}}}},designtime:"sap/m/designtime/Dialog.designtime"}});h.call(F.prototype,{header:{suffix:"header"},subHeader:{selector:".sapMDialogSubHeader .sapMIBar"},content:{selector:".sapMDialogScrollCont"},footer:{suffix:"footer"}});k.call(F.prototype,"content",function(){return this._headerTitle?this._headerTitle.getId():false;});F._bPaddingByDefault=(n.getConfiguration().getCompatibilityVersion("sapMDialogWithPadding").compareTo("1.16")<0);F._initIcons=function(){if(F._mIcons){return;}F._mIcons={};F._mIcons[V.Success]=c.getIconURI("sys-enter-2");F._mIcons[V.Warning]=c.getIconURI("alert");F._mIcons[V.Error]=c.getIconURI("error");F._mIcons[V.Information]=c.getIconURI("information");};F.prototype.init=function(){var e=this;this._oManuallySetSize=null;this._oManuallySetPosition=null;this._bRTL=n.getConfiguration().getRTL();this._scrollContentList=["sap.m.NavContainer","sap.m.Page","sap.m.ScrollContainer","sap.m.SplitContainer","sap.m.MultiInput","sap.m.SimpleFixFlex"];this.oPopup=new P();this.oPopup.setShadow(true);this.oPopup.setNavigationMode("SCOPE");this.oPopup.setModal(true);this.oPopup.setAnimations(q.proxy(this._openAnimation,this),q.proxy(this._closeAnimation,this));this.oPopup._applyPosition=function(i,J){e._setDimensions();e._adjustScrollingPane();if(e._oManuallySetPosition){i.at={left:e._oManuallySetPosition.x,top:e._oManuallySetPosition.y};}else{i.at=e._calcPosition();}e._deregisterContentResizeHandler();P.prototype._applyPosition.call(this,i);e._registerContentResizeHandler();};if(F._bPaddingByDefault){this.addStyleClass("sapUiPopupWithPadding");}this._initTitlePropagationSupport();this._initResponsivePaddingsEnablement();};F.prototype.onBeforeRendering=function(){var e=this._getAnyHeader();if(!F._bPaddingByDefault&&this.hasStyleClass("sapUiPopupWithPadding")){L.warning("Usage of CSS class 'sapUiPopupWithPadding' is deprecated. Use 'sapUiContentPadding' instead",null,"sap.m.Dialog");}if(this._hasSingleScrollableContent()){this.setVerticalScrolling(false);this.setHorizontalScrolling(false);L.info("VerticalScrolling and horizontalScrolling in sap.m.Dialog with ID "+this.getId()+" has been disabled because there's scrollable content inside");}else if(!this._oScroller){this._oScroller=new S(this,this.getId()+"-scroll",{horizontal:this.getHorizontalScrolling(),vertical:this.getVerticalScrolling()});}if(this._oScroller){this._oScroller.setVertical(this.getVerticalScrolling());this._oScroller.setHorizontal(this.getHorizontalScrolling());}this._createToolbarButtons();if(n.getConfiguration().getAccessibility()&&this.getState()!=V.None){if(!this._oValueState){this._oValueState=new d();this.setAggregation("_valueState",this._oValueState);this.addAriaLabelledBy(this._oValueState.getId());}this._oValueState.setText(this.getValueStateString(this.getState()));}if(e&&e.setTitleAlignment){e.setProperty("titleAlignment",this.getTitleAlignment(),true);}if(e&&this._getTitles(e).length===0){e._setRootAccessibilityRole("heading");e._setRootAriaLevel("2");}};F.prototype.onAfterRendering=function(){this._$scrollPane=this.$("scroll");this._$content=this.$("cont");this._$dialog=this.$();if(this.isOpen()){this._setInitialFocus();}};F.prototype.exit=function(){I.removeDialogInstance(this);this._deregisterContentResizeHandler();this._deregisterResizeHandler();if(this.oPopup){this.oPopup.detachOpened(this._handleOpened,this);this.oPopup.detachClosed(this._handleClosed,this);this.oPopup.destroy();this.oPopup=null;}if(this._oScroller){this._oScroller.destroy();this._oScroller=null;}if(this._header){this._header.destroy();this._header=null;}if(this._headerTitle){this._headerTitle.destroy();this._headerTitle=null;}if(this._iconImage){this._iconImage.destroy();this._iconImage=null;}if(this._toolbarSpacer){this._toolbarSpacer.destroy();this._toolbarSpacer=null;}};F.prototype.open=function(){var e=this.oPopup;e.setInitialFocusId(this.getId());var i=e.getOpenState();switch(i){case O.OPEN:case O.OPENING:return this;case O.CLOSING:this._bOpenAfterClose=true;break;default:}this._oCloseTrigger=null;this.fireBeforeOpen();e.attachOpened(this._handleOpened,this);this._iLastWidthAndHeightWithScroll=null;e.setContent(this);e.open();this._registerResizeHandler();I.addDialogInstance(this);return this;};F.prototype.close=function(){this._bOpenAfterClose=false;this.$().removeClass('sapDialogDisableTransition');this._deregisterResizeHandler();var e=this.oPopup;var i=this.oPopup.getOpenState();if(!(i===O.CLOSED||i===O.CLOSING)){l.closeKeyboard();this.fireBeforeClose({origin:this._oCloseTrigger});e.attachClosed(this._handleClosed,this);this._bDisableRepositioning=false;this._oManuallySetPosition=null;this._oManuallySetSize=null;e.close();this._deregisterContentResizeHandler();}return this;};F.prototype.isOpen=function(){return!!this.oPopup&&this.oPopup.isOpen();};F.prototype.setIcon=function(i){this._bHasCustomIcon=true;return this.setProperty("icon",i);};F.prototype.setState=function(e){var i;this.setProperty("state",e);if(this._bHasCustomIcon){return this;}if(e===V.None){i="";}else{F._initIcons();i=F._mIcons[e];}this.setProperty("icon",i);return this;};F.prototype._handleOpened=function(){this.oPopup.detachOpened(this._handleOpened,this);this._setInitialFocus();this.fireAfterOpen();};F.prototype._handleClosed=function(){if(!this.oPopup){return;}this.oPopup.detachClosed(this._handleClosed,this);if(this.getDomRef()){R.preserveContent(this.getDomRef());this.$().remove();}I.removeDialogInstance(this);this.fireAfterClose({origin:this._oCloseTrigger});if(this._bOpenAfterClose){this._bOpenAfterClose=false;this.open();}};F.prototype.onfocusin=function(e){var i=e.target;if(i.id===this.getId()+"-firstfe"){var J=this.$("footer").lastFocusableDomRef()||this.$("cont").lastFocusableDomRef()||(this.getSubHeader()&&this.getSubHeader().$().firstFocusableDomRef())||(this._getAnyHeader()&&this._getAnyHeader().$().lastFocusableDomRef());if(J){J.focus();}}else if(i.id===this.getId()+"-lastfe"){var M=this._getFocusableHeader()||(this._getAnyHeader()&&this._getAnyHeader().$().firstFocusableDomRef())||(this.getSubHeader()&&this.getSubHeader().$().firstFocusableDomRef())||this.$("cont").firstFocusableDomRef()||this.$("footer").firstFocusableDomRef();if(M){M.focus();}}};F.prototype._getPromiseWrapper=function(){var e=this;return{reject:function(){e.currentPromise.reject();},resolve:function(){e.currentPromise.resolve();}};};F.prototype.onsapescape=function(e){var i=this.getEscapeHandler(),J={},M=this;if(this._isSpaceOrEnterPressed){return;}if(e.originalEvent&&e.originalEvent._sapui_handledByControl){return;}this._oCloseTrigger=null;if(typeof i==='function'){new Promise(function(N,Q){J.resolve=N;J.reject=Q;M.currentPromise=J;i(M._getPromiseWrapper());}).then(function(N){M.close();}).catch(function(){L.info("Disallow dialog closing");});}else{this.close();}e.stopPropagation();};F.prototype.onkeyup=function(e){if(this._isSpaceOrEnter(e)){this._isSpaceOrEnterPressed=false;}};F.prototype.onkeydown=function(e){if(this._isSpaceOrEnter(e)){this._isSpaceOrEnterPressed=true;}var i=e.which||e.keyCode;if((e.ctrlKey||e.metaKey)&&i===K.ENTER){var J=this._findFirstPositiveButton();if(J){J.firePress();e.stopPropagation();e.preventDefault();return;}}this._handleKeyboardDragResize(e);};F.prototype._findFirstPositiveButton=function(){var e=this.getButtons();for(var i=0;i<e.length;i++){var J=e[i];if(J.getType()===r.Accept||J.getType()===r.Emphasized){return J;}}};F.prototype._handleKeyboardDragResize=function(e){if(e.target!==this._getFocusableHeader()||[K.ARROW_LEFT,K.ARROW_RIGHT,K.ARROW_UP,K.ARROW_DOWN].indexOf(e.keyCode)===-1){return;}if((!this.getResizable()&&e.shiftKey)||(!this.getDraggable()&&!e.shiftKey)){return;}var $=this._$dialog,i=this.getDomRef().getBoundingClientRect(),J={left:i.x,top:i.y},M=this._getAreaDimensions(),N=$.width(),Q=$.height(),W=$.outerHeight(true),X=e.shiftKey,Y,Z;this._bDisableRepositioning=true;$.addClass('sapDialogDisableTransition');if(X){this._oManuallySetSize=true;this.$('cont').height('').width('');}switch(e.keyCode){case K.ARROW_LEFT:if(X){N-=z;}else{J.left-=z;}break;case K.ARROW_RIGHT:if(X){N+=z;}else{J.left+=z;}break;case K.ARROW_UP:if(X){Q-=z;}else{J.top-=z;}break;case K.ARROW_DOWN:if(X){Q+=z;}else{J.top+=z;}break;}if(X){Z=M.bottom-J.top-W+Q;if(e.keyCode===K.ARROW_DOWN){Z-=z;}Y={width:Math.min(N,M.right-J.left),height:Math.min(Q,Z)};}else{Y={left:Math.min(Math.max(M.left,J.left),M.right-N),top:Math.min(Math.max(M.top,J.top),M.bottom-W)};}$.css(Y);};F.prototype._isSpaceOrEnter=function(e){var i=e.which||e.keyCode;return i==K.SPACE||i==K.ENTER;};F.prototype._openAnimation=function($,i,e){$.addClass("sapMDialogOpen");setTimeout(e,x);};F.prototype._closeAnimation=function($,i,e){$.removeClass("sapMDialogOpen");setTimeout(e,x);};F.prototype._setDimensions=function(){var $=this.$(),e=this.getStretch(),i=this.getStretchOnPhone()&&D.system.phone,M=this.getType()===s.Message,J={};if(!e){if(!this._oManuallySetSize){J.width=this.getContentWidth()||undefined;J.height=this.getContentHeight()||undefined;}else{J.width=this._oManuallySetSize.width;J.height=this._oManuallySetSize.height;}}if(J.width=='auto'){J.width=undefined;}if(J.height=='auto'){J.height=undefined;}if((e&&!M)||(i)){this.$().addClass('sapMDialogStretched');}$.css(J);$.css(this._calcMaxSizes());if(!this._oManuallySetSize&&!this._bDisableRepositioning){$.css(this._calcPosition());}if(window.navigator.userAgent.toLowerCase().indexOf("chrome")!==-1&&this.getStretch()){$.find('> footer').css({bottom:'0.001px'});}};F.prototype._adjustScrollingPane=function(){if(this._oScroller){this._oScroller.refresh();}};F.prototype._onResize=function(){var $=this.$(),e=this.$('cont'),i=this.getContentWidth(),M=this._calcMaxSizes().maxWidth;if(this._oManuallySetSize){e.css({width:'auto'});return;}if(D.system.desktop&&!D.browser.chrome){var J=e.width()+"x"+e.height(),N=$.css("min-width")!==$.css("width");if(J!==this._iLastWidthAndHeightWithScroll&&N){if(this._hasVerticalScrollbar()&&(!i||i=='auto')&&!this.getStretch()&&e.width()<M){$.addClass("sapMDialogVerticalScrollIncluded");e.css({"padding-right":y});this._iLastWidthAndHeightWithScroll=J;}else{$.removeClass("sapMDialogVerticalScrollIncluded");e.css({"padding-right":""});this._iLastWidthAndHeightWithScroll=null;}}}if(!this._oManuallySetSize&&!this._bDisableRepositioning){this._positionDialog();}};F.prototype._hasVerticalScrollbar=function(){var $=this.$('cont');return $[0].clientHeight<$[0].scrollHeight;};F.prototype._positionDialog=function(){var $=this.$();$.css(this._calcMaxSizes());$.css(this._calcPosition());};F.prototype._calcPosition=function(){var e=this._getAreaDimensions(),$=this.$(),i,J,M;if(D.system.phone&&this.getStretch()){i=0;J=0;}else if(this.getStretch()){i=this._percentOfSize(e.width,H);J=this._percentOfSize(e.height,E);}else{i=(e.width-$.outerWidth())/2;J=(e.height-$.outerHeight())/2;}M={top:Math.round(e.top+J)};M[this._bRTL?"right":"left"]=Math.round(e.left+i);return M;};F.prototype._calcMaxSizes=function(){var e=this._getAreaDimensions(),$=this.$(),i=$.find(".sapMDialogTitle").height()||0,J=$.find(".sapMDialogSubHeader").height()||0,M=$.find("> footer").height()||0,N=i+J+M,Q,W;if(D.system.phone&&this.getStretch()){W=e.width;Q=e.height-N;}else{W=this._percentOfSize(e.width,100-2*H);Q=this._percentOfSize(e.height,100-2*E)-N;}return{maxWidth:Math.floor(W),maxHeight:Math.floor(Q)};};F.prototype._getAreaDimensions=function(){var W=P.getWithinAreaDomRef(),e;if(W===window){e={left:0,top:0,width:W.innerWidth,height:W.innerHeight};}else{var i=W.getBoundingClientRect(),$=q(W);e={left:i.left+parseFloat($.css("border-left-width")),top:i.top+parseFloat($.css("border-top-width")),width:W.clientWidth,height:W.clientHeight};}e.right=e.left+e.width;e.bottom=e.top+e.height;return e;};F.prototype._percentOfSize=function(i,e){return Math.round(i*e/100);};F.prototype._createHeader=function(){if(!this._header){this._header=new B(this.getId()+"-header",{titleAlignment:this.getTitleAlignment()});this.setAggregation("_header",this._header);}};F.prototype._applyTitleToHeader=function(){var e=this.getProperty("title");if(this._headerTitle){this._headerTitle.setText(e);}else{this._headerTitle=new a(this.getId()+"-title",{text:e,level:u.H2}).addStyleClass("sapMDialogTitle");this._header.addContentMiddle(this._headerTitle);}};F.prototype._hasSingleScrollableContent=function(){var e=this.getContent();while(e.length===1&&e[0]instanceof C&&e[0].isA("sap.ui.core.mvc.View")){e=e[0].getContent();}if(e.length===1&&e[0]instanceof C&&e[0].isA(this._scrollContentList)){return true;}return false;};F.prototype._getFocusDomRef=function(){var i=this.getInitialFocus();if(i){return document.getElementById(i);}return this._getFocusableHeader()||this._getFirstFocusableContentSubHeader()||this._getFirstFocusableContentElement()||this._getFirstVisibleButtonDomRef()||this.getDomRef();};F.prototype._getFirstVisibleButtonDomRef=function(){var e=this.getBeginButton(),J=this.getEndButton(),M=this.getButtons(),N;if(e&&e.getVisible()){N=e.getDomRef();}else if(J&&J.getVisible()){N=J.getDomRef();}else if(M&&M.length>0){for(var i=0;i<M.length;i++){if(M[i].getVisible()){N=M[i].getDomRef();break;}}}return N;};F.prototype._getFocusableHeader=function(){if(!this._isDraggableOrResizable()){return null;}return this.$().find('header.sapMDialogTitle')[0];};F.prototype._getFirstFocusableContentSubHeader=function(){var $=this.$().find('.sapMDialogSubHeader');return $.firstFocusableDomRef();};F.prototype._getFirstFocusableContentElement=function(){var $=this.$("cont");return $.firstFocusableDomRef();};F.prototype._setInitialFocus=function(){var e=this._getFocusDomRef(),i;if(e&&e.id){i=n.byId(e.id);}if(i){if(i.getVisible&&!i.getVisible()){this.focus();return;}e=i.getFocusDomRef();}if(!e){this.setInitialFocus("");e=this._getFocusDomRef();}if(!this.getInitialFocus()){this.setAssociation('initialFocus',e?e.id:this.getId(),true);}if(D.system.desktop||(e&&!/input|textarea|select/i.test(e.tagName))){if(e){e.focus();}}else{this.focus();}};F.prototype.getScrollDelegate=function(){return this._oScroller;};F.prototype._isToolbarEmpty=function(){var e=this._oToolbar.getContent().filter(function(i){return i.getMetadata().getName()!=='sap.m.ToolbarSpacer';});return e.length===0;};F.prototype._getAnyHeader=function(){var e=this.getCustomHeader();if(e){return e;}else{var i=this.getShowHeader();if(!i){return null;}this._createHeader();this._applyTitleToHeader();this._applyIconToHeader();return this._header;}};F.prototype._deregisterResizeHandler=function(){var W=P.getWithinAreaDomRef();if(W===window){D.resize.detachHandler(this._onResize,this);}else{f.deregister(this._withinResizeListenerId);this._withinResizeListenerId=null;}};F.prototype._registerResizeHandler=function(){var W=P.getWithinAreaDomRef();if(W===window){D.resize.attachHandler(this._onResize,this);}else{this._withinResizeListenerId=f.register(W,this._onResize.bind(this));}this._onResize();};F.prototype._deregisterContentResizeHandler=function(){if(this._sContentResizeListenerId){f.deregister(this._sContentResizeListenerId);this._sContentResizeListenerId=null;}};F.prototype._registerContentResizeHandler=function(){if(!this._sContentResizeListenerId){this._sContentResizeListenerId=f.register(this.getDomRef("scrollCont"),q.proxy(this._onResize,this));}this._onResize();};F.prototype._attachHandler=function(e){var i=this;if(!this._oButtonDelegate){this._oButtonDelegate={ontap:function(){i._oCloseTrigger=this;},onkeyup:function(){i._oCloseTrigger=this;},onkeydown:function(){i._oCloseTrigger=this;}};}if(e){e.addDelegate(this._oButtonDelegate,true,e);}};F.prototype._createToolbarButtons=function(){var e=this._getToolbar();var i=this.getButtons();var J=this.getBeginButton();var M=this.getEndButton(),N=this,Q=[J,M];Q.forEach(function(W){if(W&&N._oButtonDelegate){W.removeDelegate(N._oButtonDelegate);}});e.removeAllContent();if(!("_toolbarSpacer"in this)){this._toolbarSpacer=new T();}e.addContent(this._toolbarSpacer);Q.forEach(function(W){N._attachHandler(W);});if(i&&i.length){i.forEach(function(W){e.addContent(W);});}else{if(J){e.addContent(J);}if(M){e.addContent(M);}}};F.prototype._getToolbar=function(){if(!this._oToolbar){this._oToolbar=new A(this.getId()+"-footer").addStyleClass("sapMTBNoBorders");this._oToolbar.addDelegate({onAfterRendering:function(){if(this.getType()===s.Message){this.$("footer").removeClass("sapContrast sapContrastPlus");}}},false,this);this.setAggregation("_toolbar",this._oToolbar);}return this._oToolbar;};F.prototype.getValueStateString=function(e){var i=n.getLibraryResourceBundle("sap.m");switch(e){case(V.Success):return i.getText("LIST_ITEM_STATE_SUCCESS");case(V.Warning):return i.getText("LIST_ITEM_STATE_WARNING");case(V.Error):return i.getText("LIST_ITEM_STATE_ERROR");case(V.Information):return i.getText("LIST_ITEM_STATE_INFORMATION");default:return"";}};F.prototype._isDraggableOrResizable=function(){return!this.getStretch()&&(this.getDraggable()||this.getResizable());};F.prototype.setSubHeader=function(e){this.setAggregation("subHeader",e);if(e){e.setVisible=function(i){e.setProperty("visible",i);this.invalidate();}.bind(this);}return this;};F.prototype.setLeftButton=function(e){if(typeof e==="string"){e=n.byId(e);}this.setBeginButton(e);return this.setAssociation("leftButton",e);};F.prototype.setRightButton=function(e){if(typeof e==="string"){e=n.byId(e);}this.setEndButton(e);return this.setAssociation("rightButton",e);};F.prototype.getLeftButton=function(){var e=this.getBeginButton();return e?e.getId():null;};F.prototype.getRightButton=function(){var e=this.getEndButton();return e?e.getId():null;};F.prototype.setBeginButton=function(e){if(e&&e.isA("sap.m.Button")){e.addStyleClass("sapMDialogBeginButton");}return this.setAggregation("beginButton",e);};F.prototype.setEndButton=function(e){if(e&&e.isA("sap.m.Button")){e.addStyleClass("sapMDialogEndButton");}return this.setAggregation("endButton",e);};F.prototype.getAggregation=function(e,i,J){var M=C.prototype.getAggregation.apply(this,Array.prototype.slice.call(arguments,0,2));if(e==='buttons'&&M&&M.length===0){this.getBeginButton()&&M.push(this.getBeginButton());this.getEndButton()&&M.push(this.getEndButton());}return M;};F.prototype.getAriaLabelledBy=function(){var e=this._getAnyHeader(),i=this.getAssociation("ariaLabelledBy",[]).slice();var J=this.getSubHeader();if(J){var M=this._getTitles(J);if(M.length){i=M.map(function(Q){return Q.getId();}).concat(i);}}if(e){var N=this._getTitles(e);if(N.length){i=N.map(function(Q){return Q.getId();}).concat(i);}else{i.unshift(e.getId());}}return i;};F.prototype._applyIconToHeader=function(){var i=this.getIcon();if(!i){if(this._iconImage){this._iconImage.destroy();this._iconImage=null;}return;}if(!this._iconImage){this._iconImage=c.createControlByURI({id:this.getId()+"-icon",src:i,useIconTooltip:false},b).addStyleClass("sapMDialogIcon");this._header.insertAggregation("contentMiddle",this._iconImage,0);}this._iconImage.setSrc(i);};F.prototype.setInitialFocus=function(i){return this.setAssociation("initialFocus",i,true);};F.prototype.invalidate=function(e){if(this.isOpen()){C.prototype.invalidate.call(this,e);}};function G(e){var $=q(e);var i=$.control(0);if($.parents('.sapMDialogSection').length){return false;}if(!i||i.getMetadata().getInterfaces().indexOf("sap.m.IBar")>-1){return true;}return $.hasClass('sapMDialogTitle');}if(D.system.desktop){F.prototype.ondblclick=function(e){if(G(e.target)){var $=this.$('cont');this._bDisableRepositioning=false;this._oManuallySetPosition=null;this._oManuallySetSize=null;this.oPopup&&this.oPopup._applyPosition(this.oPopup._oLastPosition,true);$.css({height:'100%'});}};F.prototype.onmousedown=function(e){if(e.which===3){return;}if(!this._isDraggableOrResizable()){return;}var i;var J=this;var $=q(document);var M=q(e.target);var N=M.hasClass('sapMDialogResizeHandler')&&this.getResizable();var Q=function(f1){i=i?clearTimeout(i):setTimeout(function(){f1();},0);};var W=this._getAreaDimensions();var X=this.getDomRef().getBoundingClientRect();var Y={x:e.clientX,y:e.clientY,width:J._$dialog.width(),height:J._$dialog.height(),outerHeight:J._$dialog.outerHeight(),position:{x:X.x,y:X.y}};var Z;function _(){var f1=J.$(),g1=J.$('cont'),h1,i1;$.off("mouseup",_);$.off("mousemove",Z);if(N){J._$dialog.removeClass('sapMDialogResizing');h1=parseInt(f1.height());i1=parseInt(f1.css("border-top-width"))+parseInt(f1.css("border-bottom-width"));g1.height(h1+i1);}}if(G(e.target)&&this.getDraggable()||N){J._bDisableRepositioning=true;J._$dialog.addClass('sapDialogDisableTransition');}if(G(e.target)&&this.getDraggable()){Z=function(f1){f1.preventDefault();if(f1.buttons===0){_();return;}Q(function(){J._bDisableRepositioning=true;J._oManuallySetPosition={x:Math.max(W.left,Math.min(f1.clientX-e.clientX+Y.position.x,W.right-Y.width)),y:Math.max(W.top,Math.min(f1.clientY-e.clientY+Y.position.y,W.bottom-Y.outerHeight))};J._$dialog.css({top:J._oManuallySetPosition.y,left:J._oManuallySetPosition.x,right:J._bRTL?"":undefined});});};}else if(N){J._$dialog.addClass('sapMDialogResizing');var a1={};var b1=parseInt(J._$dialog.css('min-width'));var c1=Y.x+Y.width-b1;var d1=M.width()-e.offsetX;var e1=M.height()-e.offsetY;Z=function(f1){Q(function(){J._bDisableRepositioning=true;J.$('cont').height('').width('');if(f1.clientY+e1>W.bottom){f1.clientY=W.bottom-e1;}if(f1.clientX+d1>W.right){f1.clientX=W.right-d1;}J._oManuallySetSize={width:Y.width+f1.clientX-Y.x,height:Y.height+f1.clientY-Y.y};if(J._bRTL){a1.left=Math.min(Math.max(f1.clientX,0),c1);J._oManuallySetSize.width=Y.width+Y.x-Math.max(f1.clientX,0);}a1.width=J._oManuallySetSize.width;a1.height=J._oManuallySetSize.height;J._$dialog.css(a1);});};}else{return;}$.on("mousemove",Z);$.on("mouseup",_);e.stopPropagation();};}F.prototype._applyContextualSettings=function(){C.prototype._applyContextualSettings.call(this);};F.prototype._getTitles=function(e){return e.findAggregatedObjects(true,function(i){return i.isA("sap.m.Title");});};return F;});

/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(['./Button','./Dialog','./Text','./FormattedText','./Link','./MessageStrip','./VBox','sap/ui/core/IconPool','sap/ui/core/ElementMetadata','sap/ui/core/library','sap/ui/core/Control','sap/m/library',"sap/ui/thirdparty/jquery"],function(B,D,T,F,L,M,V,I,E,c,C,l,q){"use strict";var a=l.DialogType;var b=l.DialogRoleType;var d=l.ButtonType;var e=l.TitleAlignment;var f=l.FlexRendertype;var g=l.FlexAlignItems;var h=c.MessageType;var j=c.TextDirection;var k={};k.Action={OK:"OK",CANCEL:"CANCEL",YES:"YES",NO:"NO",ABORT:"ABORT",RETRY:"RETRY",IGNORE:"IGNORE",CLOSE:"CLOSE",DELETE:"DELETE"};k.Icon={NONE:undefined,INFORMATION:"INFORMATION",WARNING:"WARNING",ERROR:"ERROR",SUCCESS:"SUCCESS",QUESTION:"QUESTION"};var A=k.Action,m=k.Icon;function _(){if(k._rb!==sap.ui.getCore().getLibraryResourceBundle("sap.m")){k._rb=sap.ui.getCore().getLibraryResourceBundle("sap.m");}}function n(v){if(typeof v==="object"){return"<pre>"+JSON.stringify(v,null,"\t").replace(/{/gi,"&#x007B;")+"</pre>";}return v;}function o(O,i,p,r){var s,v,t,u,w=false,x=new V({renderType:f.Bare,alignItems:g.Start,items:[i]});if(!O.details){return x;}function y(G){s.setHtmlText(n(G));var H=p.getInitialFocus();p.addAriaLabelledBy(s);s.setVisible(true);v.setVisible(false);p._setInitialFocus();if(!H||H===v.getId()){r.focus();}}function z(){v.setBusyIndicatorDelay(0).setBusy(true);v.getDomRef("busyIndicator").focus();O.details().then(function(G){if(p.isDestroyed()){return;}y(G);}).catch(function(){if(p.isDestroyed()){return;}if(document.activeElement===v.getDomRef("busyIndicator")){w=true;}v.setVisible(false);t.setVisible(true);});}s=new F({visible:false});v=new L({text:k._rb.getText("MSGBOX_LINK_TITLE"),press:function(){if(typeof O.details==="function"){z();}else{y(O.details);}}});u=new L({text:k._rb.getText("MSGBOX_DETAILS_RETRY_LOADING"),press:function(){v.setVisible(true);t.setVisible(false);var G={onAfterRendering:function(){v.removeEventDelegate(G);z();}};v.addEventDelegate(G);}});u.addEventDelegate({onAfterRendering:function(){if(w){u.focus();}w=false;}});t=new M({text:k._rb.getText("MSGBOX_DETAILS_LOAD_ERROR"),type:h.Error,visible:false,link:u});v.addStyleClass("sapMMessageBoxLinkText");t.addStyleClass("sapMMessageBoxErrorText");s.addStyleClass("sapMMessageBoxDetails");x.addItem(v);x.addItem(t);x.addItem(s);return x;}k.show=function(v,O){var p,r,s,R=null,t=[],i,u,w,x,y,z,G,H={id:E.uid("mbox"),initialFocus:null,textDirection:j.Inherit,verticalScrolling:true,horizontalScrolling:true,details:"",contentWidth:null},J={"INFORMATION":"sapMMessageBoxInfo","WARNING":"sapMMessageBoxWarning","ERROR":"sapMMessageBoxError","SUCCESS":"sapMMessageBoxSuccess","QUESTION":"sapMMessageBoxQuestion","STANDARD":"sapMMessageBoxStandard"},K={"INFORMATION":I.getIconURI("information"),"WARNING":I.getIconURI("alert"),"ERROR":I.getIconURI("error"),"SUCCESS":I.getIconURI("sys-enter-2"),"QUESTION":I.getIconURI("sys-help-2")};_();if(typeof O==="string"||arguments.length>2){u=arguments[1];w=arguments[2];x=arguments[3];y=arguments[4];z=arguments[5];G=arguments[6];O={icon:u,title:w,actions:x,onClose:y,id:z,styleClass:G};}if(O&&O.hasOwnProperty("details")){H.icon=m.INFORMATION;H.emphasizedAction=A.OK;H.actions=[A.OK,A.CANCEL];O=q.extend({},H,O);}O=q.extend({},H,O);if(typeof O.actions!=="undefined"&&!Array.isArray(O.actions)){if(O.emphasizedAction!==null){O.emphasizedAction=O.actions;}O.actions=[O.actions];}if(!O.actions||O.actions.length===0){O.emphasizedAction=A.OK;O.actions=[A.OK];}function N(U,P){var W;if(k.Action.hasOwnProperty(U)){W=k._rb.getText("MSGBOX_"+U);}var X=new B({id:E.uid("mbox-btn-"),text:W||U,type:P,press:function(){R=U;p.close();}});return X;}var P;for(i=0;i<O.actions.length;i++){P=O.emphasizedAction===O.actions[i]?d.Emphasized:d.Default;t.push(N(O.actions[i],P));}function Q(){if(typeof O.onClose==="function"){O.onClose(R);}p.detachAfterClose(Q);p.destroy();}function S(){var i=0;var U=null;if(O.initialFocus){if(O.initialFocus instanceof C){U=O.initialFocus;}if(typeof O.initialFocus==="string"){for(i=0;i<t.length;i++){if(k.Action.hasOwnProperty(O.initialFocus)){if(k._rb.getText("MSGBOX_"+O.initialFocus).toLowerCase()===t[i].getText().toLowerCase()){U=t[i];break;}}else{if(O.initialFocus.toLowerCase()===t[i].getText().toLowerCase()){U=t[i];break;}}}}}return U;}if(typeof(v)==="string"){s=new T({textDirection:O.textDirection}).setText(v).addStyleClass("sapMMsgBoxText");r=s;}else if(v instanceof C){s=v.addStyleClass("sapMMsgBoxText");}p=new D({id:O.id,type:a.Message,title:O.title,titleAlignment:e.Auto,icon:K[O.icon],initialFocus:S(),verticalScrolling:O.verticalScrolling,horizontalScrolling:O.horizontalScrolling,afterClose:Q,buttons:t,ariaLabelledBy:r?r.getId():undefined,contentWidth:O.contentWidth,closeOnNavigation:O.closeOnNavigation}).addStyleClass("sapMMessageBox");if(O.hasOwnProperty("details")&&O.details!==""){s=o(O,s,p,t[0]);}p.addContent(s);p.setProperty("role",b.AlertDialog);if(J[O.icon]){p.addStyleClass(J[O.icon]);}else{p.addStyleClass(J.STANDARD);}if(O.styleClass){p.addStyleClass(O.styleClass);}p.open();};k.alert=function(v,O){_();var i={icon:m.NONE,title:k._rb.getText("MSGBOX_TITLE_ALERT"),emphasizedAction:O&&O.actions?null:A.OK,actions:A.OK,id:E.uid("alert"),initialFocus:null},p,t,s,S;if(typeof O==="function"||arguments.length>2){p=arguments[1];t=arguments[2];s=arguments[3];S=arguments[4];O={onClose:p,title:t,id:s,styleClass:S};}O=q.extend({},i,O);k.show(v,O);};k.confirm=function(v,O){_();var i={icon:m.QUESTION,title:k._rb.getText("MSGBOX_TITLE_CONFIRM"),emphasizedAction:O&&O.actions?null:A.OK,actions:[A.OK,A.CANCEL],id:E.uid("confirm"),initialFocus:null},p,t,s,S;if(typeof O==="function"||arguments.length>2){p=arguments[1];t=arguments[2];s=arguments[3];S=arguments[4];O={onClose:p,title:t,id:s,styleClass:S};}O=q.extend({},i,O);k.show(v,O);};k.error=function(v,O){_();var i={icon:m.ERROR,title:k._rb.getText("MSGBOX_TITLE_ERROR"),emphasizedAction:null,actions:A.CLOSE,id:E.uid("error"),initialFocus:null};O=q.extend({},i,O);k.show(v,O);};k.information=function(v,O){_();var i={icon:m.INFORMATION,title:k._rb.getText("MSGBOX_TITLE_INFO"),emphasizedAction:O&&O.actions?null:A.OK,actions:A.OK,id:E.uid("info"),initialFocus:null};O=q.extend({},i,O);k.show(v,O);};k.warning=function(v,O){_();var i={icon:m.WARNING,title:k._rb.getText("MSGBOX_TITLE_WARNING"),emphasizedAction:O&&O.actions?null:A.OK,actions:A.OK,id:E.uid("warning"),initialFocus:null};O=q.extend({},i,O);k.show(v,O);};k.success=function(v,O){_();var i={icon:m.SUCCESS,title:k._rb.getText("MSGBOX_TITLE_SUCCESS"),emphasizedAction:O&&O.actions?null:A.OK,actions:A.OK,id:E.uid("success"),initialFocus:null};O=q.extend({},i,O);k.show(v,O);};return k;},true);
